import{c as nt}from"./jquery.fca3dd19.js";import{c as rt}from"./jszip.f74de32f.js";var J={exports:{}};(function(t){(function(n){var e=/^[a-z]+:/,r=/[-a-z0-9]+(\.[-a-z0-9])*:\d+/i,i=/\/\/(.*?)(?::(.*?))?@/,o=/^win/i,s=/:$/,u=/^\?/,m=/^#/,p=/(.*\/)/,v=/^\/{2,}/,w=/(^\/?)/,M=/'/g,X=/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,H=/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,Y=/%([0-7][0-9a-f])/gi,C=/\+/g,B=/^\w:$/,G=/[^/#?]/,O,k=typeof window>"u"&&typeof nt<"u"&&typeof rt=="function",K=!k&&n.navigator&&n.navigator.userAgent&&~n.navigator.userAgent.indexOf("MSIE"),I=k?n.require:null,j={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},Z={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443};function z(){return k?O=O||"file://"+(process.platform.match(o)?"/":"")+I("fs").realpathSync("."):document.location.href==="about:srcdoc"?self.parent.document.location.href:document.location.href}function tt(a,c,d){var h,l,f;c=c||z(),k?h=I("url").parse(c):(h=document.createElement("a")).href=c;var y,b,x=(b={path:!0,query:!0,hash:!0},(y=c)&&e.test(y)&&(b.protocol=!0,b.host=!0,r.test(y)&&(b.port=!0),i.test(y)&&(b.user=!0,b.pass=!0)),b);for(l in f=c.match(i)||[],j)x[l]?a[l]=h[j[l]]||"":a[l]="";if(a.protocol=a.protocol.replace(s,""),a.query=a.query.replace(u,""),a.hash=S(a.hash.replace(m,"")),a.user=S(f[1]||""),a.pass=S(f[2]||""),a.port=Z[a.protocol]==a.port||a.port==0?"":a.port,!x.protocol&&G.test(c.charAt(0))&&(a.path=c.split("?")[0].split("#")[0]),!x.protocol&&d){var U=new g(z().match(p)[0]),W=U.path.split("/"),q=a.path.split("/"),F=["protocol","user","pass","host","port"],et=F.length;for(W.pop(),l=0;l<et;l++)a[F[l]]=U[F[l]];for(;q[0]==="..";)W.pop(),q.shift();a.path=(c.charAt(0)!=="/"?W.join("/"):"")+"/"+q.join("/")}a.path=a.path.replace(v,"/"),K&&(a.path=a.path.replace(w,"/")),a.paths(a.paths()),a.query=new E(a.query)}function P(a){return encodeURIComponent(a).replace(M,"%27")}function S(a){return(a=(a=(a=a.replace(C," ")).replace(X,function(c,d,h,l){var f=parseInt(d,16)-224,y=parseInt(h,16)-128;if(f==0&&y<32)return c;var b=(f<<12)+(y<<6)+(parseInt(l,16)-128);return 65535<b?c:String.fromCharCode(b)})).replace(H,function(c,d,h){var l=parseInt(d,16)-192;if(l<2)return c;var f=parseInt(h,16)-128;return String.fromCharCode((l<<6)+f)})).replace(Y,function(c,d){return String.fromCharCode(parseInt(d,16))})}function E(a){for(var c=a.split("&"),d=0,h=c.length;d<h;d++){var l=c[d].split("="),f=decodeURIComponent(l[0].replace(C," "));if(f){var y=l[1]!==void 0?S(l[1]):null;this[f]===void 0?this[f]=y:(this[f]instanceof Array||(this[f]=[this[f]]),this[f].push(y))}}}function g(a,c){tt(this,a,!c)}E.prototype.toString=function(){var a,c,d="",h=P;for(a in this){var l=this[a];if(!(l instanceof Function||l===void 0))if(l instanceof Array){var f=l.length;if(!f){d+=(d?"&":"")+h(a)+"=";continue}for(c=0;c<f;c++){var y=l[c];y!==void 0&&(d+=d?"&":"",d+=h(a)+(y===null?"":"="+h(y)))}}else d+=d?"&":"",d+=h(a)+(l===null?"":"="+h(l))}return d},g.prototype.clearQuery=function(){for(var a in this.query)this.query[a]instanceof Function||delete this.query[a];return this},g.prototype.queryLength=function(){var a=0;for(var c in this.query)this.query[c]instanceof Function||a++;return a},g.prototype.isEmptyQuery=function(){return this.queryLength()===0},g.prototype.paths=function(a){var c,d="",h=0;if(a&&a.length&&a+""!==a){for(this.isAbsolute()&&(d="/"),c=a.length;h<c;h++)a[h]=!h&&B.test(a[h])?a[h]:P(a[h]);this.path=d+a.join("/")}for(h=0,c=(a=(this.path.charAt(0)==="/"?this.path.slice(1):this.path).split("/")).length;h<c;h++)a[h]=S(a[h]);return a},g.prototype.encode=P,g.prototype.decode=S,g.prototype.isAbsolute=function(){return this.protocol||this.path.charAt(0)==="/"},g.prototype.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&P(this.user)+(this.pass&&":"+P(this.pass))+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+P(this.hash))},n[n.exports?"exports":"Url"]=g})(t.exports?t:window)})(J);const Lt=J.exports,Rt={methods:{timeStringToSeconds:function(t){if(t&&t.match(/\d/)){const n=t.match(/[0-9]( ?)+(m|min|åˆ†)/),e=t.match(/\d+/g),r={},i=function(s){return+s*60*60},o=function(s){return+s*60};return e.length===2?(r.h=e[0],r.m=e[1],r.numbers=i(r.h)+o(r.m)):n?(r.m=e[0],r.numbers=o(r.m)):(r.h=e[0],r.numbers=i(r.h)),r.numbers}else return 0}}},Vt={methods:{secondsToTimeString:function(t,n){var e=function(m,p){return n?m:("000"+m).slice(p*-1)},r=parseFloat(t).toFixed(3),i=Math.floor(r/60/60),o=Math.floor(r/60)%60;r.slice(-3);var s=(i.toString().length>1?i:e(i,2))+(n?"h ":"."),u=e(o,2)+(n?"m ":"");return n&&!i&&(s=""),s+u}}},Jt=6048e5,at=864e5,Nt=6e4,Qt=36e5,L=Symbol.for("constructDateFrom");function N(t,n){return typeof t=="function"?t(n):t&&typeof t=="object"&&L in t?t[L](n):t instanceof Date?new t.constructor(n):new Date(n)}function Q(t,n){return N(n||t,t)}let it={};function Xt(){return it}function R(t){const n=Q(t),e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+t-+e}function ot(t,...n){const e=N.bind(null,t||n.find(r=>typeof r=="object"));return n.map(e)}function V(t,n){const e=Q(t,n==null?void 0:n.in);return e.setHours(0,0,0,0),e}function Ht(t,n,e){const[r,i]=ot(e==null?void 0:e.in,t,n),o=V(r),s=V(i),u=+o-R(o),m=+s-R(s);return Math.round((u-m)/at)}const st={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ut=(t,n,e)=>{let r;const i=st[t];return typeof i=="string"?r=i:n===1?r=i.one:r=i.other.replace("{{count}}",n.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function T(t){return(n={})=>{const e=n.width?String(n.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const ct={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ht={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dt={date:T({formats:ct,defaultWidth:"full"}),time:T({formats:ht,defaultWidth:"full"}),dateTime:T({formats:lt,defaultWidth:"full"})},mt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ft=(t,n,e,r)=>mt[t];function D(t){return(n,e)=>{const r=e!=null&&e.context?String(e.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,u=e!=null&&e.width?String(e.width):s;i=t.formattingValues[u]||t.formattingValues[s]}else{const s=t.defaultWidth,u=e!=null&&e.width?String(e.width):t.defaultWidth;i=t.values[u]||t.values[s]}const o=t.argumentCallback?t.argumentCallback(n):n;return i[o]}}const yt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},pt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mt=(t,n)=>{const e=Number(t),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Pt={ordinalNumber:Mt,era:D({values:yt,defaultWidth:"wide"}),quarter:D({values:pt,defaultWidth:"wide",argumentCallback:t=>t-1}),month:D({values:gt,defaultWidth:"wide"}),day:D({values:bt,defaultWidth:"wide"}),dayPeriod:D({values:vt,defaultWidth:"wide",formattingValues:wt,defaultFormattingWidth:"wide"})};function A(t){return(n,e={})=>{const r=e.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=n.match(i);if(!o)return null;const s=o[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],m=Array.isArray(u)?Dt(u,w=>w.test(s)):St(u,w=>w.test(s));let p;p=t.valueCallback?t.valueCallback(m):m,p=e.valueCallback?e.valueCallback(p):p;const v=n.slice(s.length);return{value:p,rest:v}}}function St(t,n){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n(t[e]))return e}function Dt(t,n){for(let e=0;e<t.length;e++)if(n(t[e]))return e}function At(t){return(n,e={})=>{const r=n.match(t.matchPattern);if(!r)return null;const i=r[0],o=n.match(t.parsePattern);if(!o)return null;let s=t.valueCallback?t.valueCallback(o[0]):o[0];s=e.valueCallback?e.valueCallback(s):s;const u=n.slice(i.length);return{value:s,rest:u}}}const kt=/^(\d+)(th|st|nd|rd)?/i,xt=/\d+/i,Wt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qt={any:[/^b/i,/^(a|c)/i]},Ft={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Tt={any:[/1/i,/2/i,/3/i,/4/i]},_t={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ct={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ot={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},It={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Et={ordinalNumber:At({matchPattern:kt,parsePattern:xt,valueCallback:t=>parseInt(t,10)}),era:A({matchPatterns:Wt,defaultMatchWidth:"wide",parsePatterns:qt,defaultParseWidth:"any"}),quarter:A({matchPatterns:Ft,defaultMatchWidth:"wide",parsePatterns:Tt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:A({matchPatterns:_t,defaultMatchWidth:"wide",parsePatterns:Ct,defaultParseWidth:"any"}),day:A({matchPatterns:Ot,defaultMatchWidth:"wide",parsePatterns:It,defaultParseWidth:"any"}),dayPeriod:A({matchPatterns:jt,defaultMatchWidth:"any",parsePatterns:zt,defaultParseWidth:"any"})},Yt={code:"en-US",formatDistance:ut,formatLong:dt,formatRelative:ft,localize:Pt,match:Et,options:{weekStartsOn:0,firstWeekContainsDate:1}},Bt={methods:{shortenLength:function(t){if(t)if(t=DOMPurify.sanitize(t.trimToColon().trimAll()),t.match(/\d/)){const n=this.timeStringToSeconds(t);return this.secondsToTimeString(n,!0)}else return null;else return null},getSummary:function(t){if(!t)return"";t.removeAttribute("class");var n=t.querySelectorAll("*");return $.each(n,function(){this.removeAttribute("class")}),DOMPurify.sanitize(t.outerHTML.trimAll())},fixDates:function(t){var n=typeof t=="object"?DOMPurify.sanitize(t.textContent.trimToColon()):DOMPurify.sanitize(t);if(t&&n){const e=this.domainExtension,r={".com":["m-d-y","MM-dd-yyyy"],".ca":["y-m-d","yyyy-MM-dd"],".co.uk":["d-m-y","dd-MM-yyyy"],".de":["d-m-y","dd-MM-yyyy"],".fr":["d-m-y","dd-MM-yyyy"],".it":["d-m-y","dd-MM-yyyy"],".com.au":["d-m-y","dd-MM-yyyy"],".in":["d-m-y","dd-MM-yyyy"]},i=r[e]?r[e][0]:null;let o=n.split("-");if(!i||!n.match(/\-/)||o.length!==3)return n;{const s=i.split("-"),u={y:null,m:null,d:null};$.each(o,function(p,v){u[s[p]]=v}),n=null,u.y.length<=2&&(u.y>=95&&u.y<=99?u.y="19"+u.y:u.y<95&&(u.y="20"+u.y));const m=[u.y,u.m,u.d];return dateFormat(new Date(m[0],m[1]-1,m[2]),"yyyy-MM-dd")}}else return null},getSeries:function(t,n){const e=[];if(t){let i=DOMPurify.sanitize($(t).html()).trimAll().trimToColon();i=$.parseHTML(i),$.each(i,function(o,s){var u=_.get(s,"textContent","").trim().replace(/^,/,"").trimAll()||"",m=_.get(s,"href"),p=!m&&u.match(/\d/);if(m){let M=new Url(m);e.push({name:u,asin:n?M.query.asin:M.path.substring(M.path.lastIndexOf("/")+1)})}else if(p){var v=u.replace(/^[^0-9]*/,"").replace(/,$/,"").replace(/;$/,"").trim().split(","),w=_.last(e);w.bookNumbers=$.map(v,function(M){return""+M.trim()})}})}return e.length>0?n?e.reverse():e:null},getArray:function(t){const n=[];return $(t).each(function(){const r=new Url(DOMPurify.sanitize($(this).attr("href")),!0);let i,o,s;r.query.searchAuthor&&(i=r.query.searchAuthor),r.query.searchNarrator&&(o=r.query.searchNarrator),r.query.searchProvider&&(s=r.query.searchProvider),r.clearQuery(),i&&(r.query.searchAuthor=i),o&&(r.query.searchNarrator=o),s&&(r.query.searchProvider=s),o=null,s=null;let u={name:DOMPurify.sanitize($(this).text().trim())};const m=e(r.toString());m&&(u.url=m),n.push(u)}),n.length>0?n:null;function e(r){return r.match(/^\/cat\//)||r.match(/^\/author\//)?r.substring(r.lastIndexOf("/")+1):r.match(/^\/search\?searchAuthor/)||r.match(/^\/search\?searchNarrator/)||r.match(/^\/search\?searchProvider/)?null:r}},addedOrder:function(t){let n=t.length+1;_.each(t,function(e){--n,e.added=n})},makeFrenchFries:function(t){t.extras=t.extras||{},t.extras["domain-extension"]=t.extras["domain-extension"]||this.domainExtension,t.chunks=[],_.each(t,function(n,e){if(e!=="chunks"&&_.isArray(n)){const r=_.chunk(n,50);t.chunks.push(e),t[e+"-chunk-length"]=r.length,_.each(r,function(i,o){t[e+"-chunk-"+o]=i}),delete t[e]}})},glueFriesBackTogether:function(t){if(t&&_.isEmpty(t))return null;_.each(t.chunks,function(n){const e=t[n+"-chunk-length"],r=_.range(0,e);t[n]=[],_.each(r,function(i){t[n]=t[n].concat(t[n+"-chunk-"+i]),delete t[n+"-chunk-"+i]}),delete t[n+"-chunk-length"]}),delete t.chunks},removeFromSeries:function(t,n){_.each(n,function(e){e.series&&_.each(e.series,function(r){let i=_.find(t,{asin:r.asin});_.remove(i.books,function(o){return o===e.asin}),i.books.length<1&&_.remove(t,function(o){return o.asin===r.asin})})})},removeFromCollections:function(t,n){t=_.compact(t),_.each(t,function(e){e.books.length>0&&_.each(n,function(r){_.includes(e.books,r.asin)&&_.remove(e.books,function(o){return o===r.asin}),e.books.length<1&&_.remove(t,function(o){return o.id===e.id})})})}}};export{Lt as U,Nt as a,Rt as b,N as c,Ht as d,Yt as e,Jt as f,Xt as g,Bt as h,Qt as m,ot as n,Vt as s,Q as t};
