import{c as nt,g as rt}from"./jquery.TLgHKWof.js";import{c as at}from"./jszip.Ip5JjwIA.js";var C={exports:{}};C.exports;(function(t){(function(e){var n=/^[a-z]+:/,r=/[-a-z0-9]+(\.[-a-z0-9])*:\d+/i,o=/\/\/(.*?)(?::(.*?))?@/,i=/^win/i,s=/:$/,u=/^\?/,m=/^#/,p=/(.*\/)/,b=/^\/{2,}/,w=/(^\/?)/,M=/'/g,X=/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,H=/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,Y=/%([0-7][0-9a-f])/gi,O=/\+/g,B=/^\w:$/,G=/[^/#?]/,I,A=typeof window>"u"&&typeof nt<"u"&&typeof at=="function",K=!A&&e.navigator&&e.navigator.userAgent&&~e.navigator.userAgent.indexOf("MSIE"),j=A?e.require:null,z={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},Z={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443};function E(){return A?I=I||"file://"+(process.platform.match(i)?"/":"")+j("fs").realpathSync("."):document.location.href==="about:srcdoc"?self.parent.document.location.href:document.location.href}function tt(a,c,d){var h,l,f;c=c||E(),A?h=j("url").parse(c):(h=document.createElement("a")).href=c;var y,v,k=(v={path:!0,query:!0,hash:!0},(y=c)&&n.test(y)&&(v.protocol=!0,v.host=!0,r.test(y)&&(v.port=!0),o.test(y)&&(v.user=!0,v.pass=!0)),v);for(l in f=c.match(o)||[],z)k[l]?a[l]=h[z[l]]||"":a[l]="";if(a.protocol=a.protocol.replace(s,""),a.query=a.query.replace(u,""),a.hash=S(a.hash.replace(m,"")),a.user=S(f[1]||""),a.pass=S(f[2]||""),a.port=Z[a.protocol]==a.port||a.port==0?"":a.port,!k.protocol&&G.test(c.charAt(0))&&(a.path=c.split("?")[0].split("#")[0]),!k.protocol&&d){var L=new g(E().match(p)[0]),W=L.path.split("/"),q=a.path.split("/"),F=["protocol","user","pass","host","port"],et=F.length;for(W.pop(),l=0;l<et;l++)a[F[l]]=L[F[l]];for(;q[0]==="..";)W.pop(),q.shift();a.path=(c.charAt(0)!=="/"?W.join("/"):"")+"/"+q.join("/")}a.path=a.path.replace(b,"/"),K&&(a.path=a.path.replace(w,"/")),a.paths(a.paths()),a.query=new U(a.query)}function P(a){return encodeURIComponent(a).replace(M,"%27")}function S(a){return(a=(a=(a=a.replace(O," ")).replace(X,function(c,d,h,l){var f=parseInt(d,16)-224,y=parseInt(h,16)-128;if(f==0&&y<32)return c;var v=(f<<12)+(y<<6)+(parseInt(l,16)-128);return 65535<v?c:String.fromCharCode(v)})).replace(H,function(c,d,h){var l=parseInt(d,16)-192;if(l<2)return c;var f=parseInt(h,16)-128;return String.fromCharCode((l<<6)+f)})).replace(Y,function(c,d){return String.fromCharCode(parseInt(d,16))})}function U(a){for(var c=a.split("&"),d=0,h=c.length;d<h;d++){var l=c[d].split("="),f=decodeURIComponent(l[0].replace(O," "));if(f){var y=l[1]!==void 0?S(l[1]):null;this[f]===void 0?this[f]=y:(this[f]instanceof Array||(this[f]=[this[f]]),this[f].push(y))}}}function g(a,c){tt(this,a,!c)}U.prototype.toString=function(){var a,c,d="",h=P;for(a in this){var l=this[a];if(!(l instanceof Function||l===void 0))if(l instanceof Array){var f=l.length;if(!f){d+=(d?"&":"")+h(a)+"=";continue}for(c=0;c<f;c++){var y=l[c];y!==void 0&&(d+=d?"&":"",d+=h(a)+(y===null?"":"="+h(y)))}}else d+=d?"&":"",d+=h(a)+(l===null?"":"="+h(l))}return d},g.prototype.clearQuery=function(){for(var a in this.query)this.query[a]instanceof Function||delete this.query[a];return this},g.prototype.queryLength=function(){var a=0;for(var c in this.query)this.query[c]instanceof Function||a++;return a},g.prototype.isEmptyQuery=function(){return this.queryLength()===0},g.prototype.paths=function(a){var c,d="",h=0;if(a&&a.length&&a+""!==a){for(this.isAbsolute()&&(d="/"),c=a.length;h<c;h++)a[h]=!h&&B.test(a[h])?a[h]:P(a[h]);this.path=d+a.join("/")}for(h=0,c=(a=(this.path.charAt(0)==="/"?this.path.slice(1):this.path).split("/")).length;h<c;h++)a[h]=S(a[h]);return a},g.prototype.encode=P,g.prototype.decode=S,g.prototype.isAbsolute=function(){return this.protocol||this.path.charAt(0)==="/"},g.prototype.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&P(this.user)+(this.pass&&":"+P(this.pass))+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+P(this.hash))},e[e.exports?"exports":"Url"]=g})(t.exports?t:window)})(C);var ot=C.exports;const Vt=rt(ot),Jt={methods:{timeStringToSeconds:function(t){if(t&&t.match(/\d/)){const e=t.match(/[0-9]( ?)+(m|min|åˆ†)/),n=t.match(/\d+/g),r={},o=function(s){return+s*60*60},i=function(s){return+s*60};return n.length===2?(r.h=n[0],r.m=n[1],r.numbers=o(r.h)+i(r.m)):e?(r.m=n[0],r.numbers=i(r.m)):(r.h=n[0],r.numbers=o(r.h)),r.numbers}else return 0}}},Nt={methods:{secondsToTimeString:function(t,e){var n=function(m,p){return e?m:("000"+m).slice(p*-1)},r=parseFloat(t).toFixed(3),o=Math.floor(r/60/60),i=Math.floor(r/60)%60;r.slice(-3);var s=(o.toString().length>1?o:n(o,2))+(e?"h ":"."),u=n(i,2)+(e?"m ":"");return e&&!o&&(s=""),s+u}}},Qt=6048e5,it=864e5,Xt=6e4,Ht=36e5,R=Symbol.for("constructDateFrom");function N(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&R in t?t[R](e):t instanceof Date?new t.constructor(e):new Date(e)}function Q(t,e){return N(e||t,t)}let st={};function Yt(){return st}function V(t){const e=Q(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ut(t,...e){const n=N.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function J(t,e){const n=Q(t,e?.in);return n.setHours(0,0,0,0),n}function Bt(t,e,n){const[r,o]=ut(n?.in,t,e),i=J(r),s=J(o),u=+i-V(i),m=+s-V(s);return Math.round((u-m)/it)}const ct={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ht=(t,e,n)=>{let r;const o=ct[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function T(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const lt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},dt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ft={date:T({formats:lt,defaultWidth:"full"}),time:T({formats:dt,defaultWidth:"full"}),dateTime:T({formats:mt,defaultWidth:"full"})},yt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pt=(t,e,n,r)=>yt[t];function D(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,u=n?.width?String(n.width):s;o=t.formattingValues[u]||t.formattingValues[s]}else{const s=t.defaultWidth,u=n?.width?String(n.width):t.defaultWidth;o=t.values[u]||t.values[s]}const i=t.argumentCallback?t.argumentCallback(e):e;return o[i]}}const gt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Pt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},St=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Dt={ordinalNumber:St,era:D({values:gt,defaultWidth:"wide"}),quarter:D({values:vt,defaultWidth:"wide",argumentCallback:t=>t-1}),month:D({values:bt,defaultWidth:"wide"}),day:D({values:wt,defaultWidth:"wide"}),dayPeriod:D({values:Mt,defaultWidth:"wide",formattingValues:Pt,defaultFormattingWidth:"wide"})};function x(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(o);if(!i)return null;const s=i[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],m=Array.isArray(u)?At(u,w=>w.test(s)):xt(u,w=>w.test(s));let p;p=t.valueCallback?t.valueCallback(m):m,p=n.valueCallback?n.valueCallback(p):p;const b=e.slice(s.length);return{value:p,rest:b}}}function xt(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function At(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function kt(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],i=e.match(t.parsePattern);if(!i)return null;let s=t.valueCallback?t.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const u=e.slice(o.length);return{value:s,rest:u}}}const Wt=/^(\d+)(th|st|nd|rd)?/i,qt=/\d+/i,Ft={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tt={any:[/^b/i,/^(a|c)/i]},_t={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ct={any:[/1/i,/2/i,/3/i,/4/i]},Ot={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},It={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Et={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ut={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$t={ordinalNumber:kt({matchPattern:Wt,parsePattern:qt,valueCallback:t=>parseInt(t,10)}),era:x({matchPatterns:Ft,defaultMatchWidth:"wide",parsePatterns:Tt,defaultParseWidth:"any"}),quarter:x({matchPatterns:_t,defaultMatchWidth:"wide",parsePatterns:Ct,defaultParseWidth:"any",valueCallback:t=>t+1}),month:x({matchPatterns:Ot,defaultMatchWidth:"wide",parsePatterns:It,defaultParseWidth:"any"}),day:x({matchPatterns:jt,defaultMatchWidth:"wide",parsePatterns:zt,defaultParseWidth:"any"}),dayPeriod:x({matchPatterns:Et,defaultMatchWidth:"any",parsePatterns:Ut,defaultParseWidth:"any"})},Gt={code:"en-US",formatDistance:ht,formatLong:ft,formatRelative:pt,localize:Dt,match:$t,options:{weekStartsOn:0,firstWeekContainsDate:1}},Kt={methods:{shortenLength:function(t){if(t)if(t=DOMPurify.sanitize(t.trimToColon().trimAll()),t.match(/\d/)){const e=this.timeStringToSeconds(t);return this.secondsToTimeString(e,!0)}else return null;else return null},getSummary:function(t){if(!t)return"";t.removeAttribute("class");var e=t.querySelectorAll("*");return $.each(e,function(){this.removeAttribute("class")}),DOMPurify.sanitize(t.outerHTML.trimAll())},fixDates:function(t){var e=typeof t=="object"?DOMPurify.sanitize(t.textContent.trimToColon()):DOMPurify.sanitize(t);if(t&&e){const n=this.domainExtension,r={".com":["m-d-y","MM-dd-yyyy"],".ca":["y-m-d","yyyy-MM-dd"],".co.uk":["d-m-y","dd-MM-yyyy"],".de":["d-m-y","dd-MM-yyyy"],".fr":["d-m-y","dd-MM-yyyy"],".it":["d-m-y","dd-MM-yyyy"],".com.au":["d-m-y","dd-MM-yyyy"],".in":["d-m-y","dd-MM-yyyy"]},o=r[n]?r[n][0]:null;let i=e.split("-");if(!o||!e.match(/\-/)||i.length!==3)return e;{const s=o.split("-"),u={y:null,m:null,d:null};$.each(i,function(p,b){u[s[p]]=b}),e=null,u.y.length<=2&&(u.y>=95&&u.y<=99?u.y="19"+u.y:u.y<95&&(u.y="20"+u.y));const m=[u.y,u.m,u.d];return dateFormat(new Date(m[0],m[1]-1,m[2]),"yyyy-MM-dd")}}else return null},getSeries:function(t,e){const n=[];if(t){let o=DOMPurify.sanitize($(t).html()).trimAll().trimToColon();o=$.parseHTML(o),$.each(o,function(i,s){var u=_.get(s,"textContent","").trim().replace(/^,/,"").trimAll()||"",m=_.get(s,"href"),p=!m&&u.match(/\d/);if(m){let M=new Url(m);n.push({name:u,asin:e?M.query.asin:M.path.substring(M.path.lastIndexOf("/")+1)})}else if(p){var b=u.replace(/^[^0-9]*/,"").replace(/,$/,"").replace(/;$/,"").trim().split(","),w=_.last(n);w.bookNumbers=$.map(b,function(M){return""+M.trim()})}})}return n.length>0?e?n.reverse():n:null},getArray:function(t){const e=[];return $(t).each(function(){const r=new Url(DOMPurify.sanitize($(this).attr("href")),!0);let o,i,s;r.query.searchAuthor&&(o=r.query.searchAuthor),r.query.searchNarrator&&(i=r.query.searchNarrator),r.query.searchProvider&&(s=r.query.searchProvider),r.clearQuery(),o&&(r.query.searchAuthor=o),i&&(r.query.searchNarrator=i),s&&(r.query.searchProvider=s),i=null,s=null;let u={name:DOMPurify.sanitize($(this).text().trim())};const m=n(r.toString());m&&(u.url=m),e.push(u)}),e.length>0?e:null;function n(r){return r.match(/^\/cat\//)||r.match(/^\/author\//)?r.substring(r.lastIndexOf("/")+1):r.match(/^\/search\?searchAuthor/)||r.match(/^\/search\?searchNarrator/)||r.match(/^\/search\?searchProvider/)?null:r}},addedOrder:function(t){let e=t.length+1;_.each(t,function(n){--e,n.added=e})},makeFrenchFries:function(t){t.extras=t.extras||{},t.extras["domain-extension"]=t.extras["domain-extension"]||this.domainExtension,t.chunks=[],_.each(t,function(e,n){if(n!=="chunks"&&_.isArray(e)){const r=_.chunk(e,50);t.chunks.push(n),t[n+"-chunk-length"]=r.length,_.each(r,function(o,i){t[n+"-chunk-"+i]=o}),delete t[n]}})},glueFriesBackTogether:function(t){if(t&&_.isEmpty(t))return null;_.each(t.chunks,function(e){const n=t[e+"-chunk-length"],r=_.range(0,n);t[e]=[],_.each(r,function(o){t[e]=t[e].concat(t[e+"-chunk-"+o]),delete t[e+"-chunk-"+o]}),delete t[e+"-chunk-length"]}),delete t.chunks},removeFromSeries:function(t,e){_.each(e,function(n){n.series&&_.each(n.series,function(r){let o=_.find(t,{asin:r.asin});_.remove(o.books,function(i){return i===n.asin}),o.books.length<1&&_.remove(t,function(i){return i.asin===r.asin})})})},removeFromCollections:function(t,e){t=_.compact(t),_.each(t,function(n){n.books.length>0&&_.each(e,function(r){_.includes(n.books,r.asin)&&_.remove(n.books,function(i){return i===r.asin}),n.books.length<1&&_.remove(t,function(i){return i.id===n.id})})})}}};export{Vt as U,Xt as a,Jt as b,N as c,Bt as d,Gt as e,Qt as f,Yt as g,Kt as h,Ht as m,ut as n,Nt as s,Q as t};
