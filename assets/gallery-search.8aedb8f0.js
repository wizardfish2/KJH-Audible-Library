import{c as Ir,V as Dr,f as Nr,g as qr}from"./gallery.f59fb107.js";import{m as Ue,o as w,c as S,a as L,e as P,aV as Bt,g as Et,f as R,F as de,i as me,p as te,bP as Rt,t as J,h as tt,an as Mr,a8 as ie,aG as st,K as ae,H,L as fe,C as rt,b0 as Nt,aY as xr,z as We,P as Fr,_ as mt,r as Zt,b as qt,w as Me,s as jr,d as ce,u as ir,n as Pt,v as Vr}from"./lodash.4793ee9f.js";import{_ as Wr}from"./gallery-findSubPageSource.85dad557.js";import{_ as Kr}from"./gallery-page-title.3a2b50a5.js";import{F as zr}from"./fuse.esm.249bd5bb.js";import{b as lr}from"./content-script-helpers.caeeb6e9.js";const Hr={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Gr(e,r){return w(),S("svg",Hr,r[0]||(r[0]=[L("path",{fill:"currentColor",d:"M3 5v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2"},null,-1)]))}const Ur=Ue({name:"ic-round-square",render:Gr}),Qr={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Xr(e,r){return w(),S("svg",Qr,r[0]||(r[0]=[L("path",{fill:"currentColor",d:"M256 56c110.532 0 200 89.451 200 200c0 110.532-89.451 200-200 200c-110.532 0-200-89.451-200-200c0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248s248-111.033 248-248S392.967 8 256 8m0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80s80-35.817 80-80s-35.817-80-80-80"},null,-1)]))}const Yr=Ue({name:"fa-regular-dot-circle",render:Xr}),Zr={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Jr(e,r){return w(),S("svg",Zr,r[0]||(r[0]=[L("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248s248-111 248-248S393 8 256 8m0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200s-89.5 200-200 200"},null,-1)]))}const ea=Ue({name:"fa-regular-circle",render:Jr}),ta={viewBox:"0 0 320 512",width:"0.76em",height:"1.2em"};function ra(e,r){return w(),S("svg",ta,r[0]||(r[0]=[L("path",{fill:"currentColor",d:"M182.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9S19 224.1 32 224.1h256c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1)]))}const aa=Ue({name:"fa6-solid-sort-up",render:ra}),na={viewBox:"0 0 320 512",width:"0.76em",height:"1.2em"};function sa(e,r){return w(),S("svg",na,r[0]||(r[0]=[L("path",{fill:"currentColor",d:"M182.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9S19 287.9 32 287.9h256c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128z"},null,-1)]))}const ia=Ue({name:"fa6-solid-sort-down",render:sa});function ye(e){return e==null}function la(e,r,t){const{object:n,valueProp:a,mode:l}=ie(e),s=st().proxy,o=t.iv,c=(p,y=!0)=>{o.value=u(p);const g=d(p);r.emit("change",g,s),y&&(r.emit("input",g),r.emit("update:modelValue",g))},d=p=>n.value||ye(p)?p:Array.isArray(p)?p.map(y=>y[a.value]):p[a.value],u=p=>ye(p)?l.value==="single"?{}:[]:p;return{update:c}}function U(e){return Fr(()=>({get:e,set:()=>{}}))}function oa(e,r){const{value:t,modelValue:n,mode:a,valueProp:l}=ie(e),s=ae(a.value!=="single"?[]:{}),o=U(()=>n.value!==void 0?n.value:t.value),c=H(()=>a.value==="single"?s.value[l.value]:s.value.map(u=>u[l.value])),d=U(()=>a.value!=="single"?s.value.map(u=>u[l.value]).join(","):s.value[l.value]);return{iv:s,internalValue:s,ev:o,externalValue:o,textValue:d,plainValue:c}}function ua(e,r,t){const{regex:n}=ie(e),a=st().proxy,l=t.isOpen,s=t.open,o=ae(null),c=()=>{o.value=""},d=y=>{o.value=y.target.value},u=y=>{if(n.value){let g=n.value;typeof g=="string"&&(g=new RegExp(g)),y.key.match(g)||y.preventDefault()}},p=y=>{if(n.value){let C=(y.clipboardData||window.clipboardData).getData("Text"),b=n.value;typeof b=="string"&&(b=new RegExp(b)),C.split("").every(T=>!!T.match(b))||y.preventDefault()}r.emit("paste",y,a)};return fe(o,y=>{!l.value&&y&&s(),r.emit("search-change",y,a)}),{search:o,clearSearch:c,handleSearchInput:d,handleKeypress:u,handlePaste:p}}function ca(e,r,t){const{groupSelect:n,mode:a,groups:l,disabledProp:s}=ie(e),o=ae(null),c=u=>{u===void 0||u!==null&&u[s.value]||l.value&&u&&u.group&&(a.value==="single"||!n.value)||(o.value=u)};return{pointer:o,setPointer:c,clearPointer:()=>{c(null)}}}function At(e,r=!0){return r?String(e).toLowerCase().trim():String(e).toLowerCase().normalize("NFD").trim().replace(/æ/g,"ae").replace(/œ/g,"oe").replace(/ø/g,"o").replace(/\p{Diacritic}/gu,"")}function da(e){return Object.prototype.toString.call(e)==="[object Object]"}function fa(e,r){if(e.length!==r.length)return!1;const t=r.slice().sort();return e.slice().sort().every(function(n,a){return n===t[a]})}const or=(e,r)=>{if(e===r)return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;const t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(let a of t)if(!n.includes(a)||!or(e[a],r[a]))return!1;return!0};function pa(e,r,t){const{options:n,mode:a,trackBy:l,limit:s,hideSelected:o,createTag:c,createOption:d,label:u,appendNewTag:p,appendNewOption:y,multipleLabel:g,object:C,loading:b,delay:T,resolveOnLoad:O,minChars:A,filterResults:f,clearOnSearch:k,clearOnSelect:$,valueProp:m,allowAbsent:N,groupLabel:D,canDeselect:q,max:x,strict:j,closeOnSelect:E,closeOnDeselect:z,groups:Q,reverse:re,infinite:G,groupOptions:V,groupHideEmpty:Oe,groupSelect:F,onCreate:X,disabledProp:W,searchStart:ee,searchFilter:le}=ie(e),K=st().proxy,I=t.iv,h=t.ev,B=t.search,Z=t.clearSearch,ne=t.update,Qe=t.pointer,Xe=t.setPointer,$e=t.clearPointer,it=t.focus,wt=t.deactivate,_e=t.close,lt=t.localize,Be=ae([]),oe=ae([]),ue=ae(!1),ve=ae(null),ke=ae(G.value&&s.value===-1?10:s.value),ot=H({get:()=>oe.value,set:i=>oe.value=i}),Ye=U(()=>c.value||d.value||!1),Ze=U(()=>p.value!==void 0?p.value:y.value!==void 0?y.value:!0),he=H(()=>{if(Q.value){let i=Ie.value||[],v=[];return i.forEach(M=>{$t(M[V.value]).forEach(Y=>{v.push(Object.assign({},Y,M[W.value]?{[W.value]:!0}:{}))})}),v}else{let i=$t(oe.value||[]);return Be.value.length&&(i=i.concat(Be.value)),i}}),Je=H(()=>{let i=he.value;return re.value&&(i=i.reverse()),Fe.value.length&&(i=Fe.value.concat(i)),Tt(i)}),Ee=H(()=>{let i=Je.value;return ke.value>0&&(i=i.slice(0,ke.value)),i}),Ie=H(()=>{if(!Q.value)return[];let i=[],v=oe.value||[];return Be.value.length&&i.push({[D.value]:" ",[V.value]:[...Be.value],__CREATE__:!0}),i.concat(v)}),mr=H(()=>{let i=[...Ie.value].map(v=>({...v}));return Fe.value.length&&(i[0]&&i[0].__CREATE__?i[0][V.value]=[...Fe.value,...i[0][V.value]]:i=[{[D.value]:" ",[V.value]:[...Fe.value],__CREATE__:!0}].concat(i)),i}),Ot=H(()=>{if(!Q.value)return[];let i=mr.value;return Pr((i||[]).map((v,M)=>{const Y=$t(v[V.value]);return{...v,index:M,group:!0,[V.value]:Tt(Y,!1).map(Ne=>Object.assign({},Ne,v[W.value]?{[W.value]:!0}:{})),__VISIBLE__:Tt(Y).map(Ne=>Object.assign({},Ne,v[W.value]?{[W.value]:!0}:{}))}}))}),kt=H(()=>{switch(a.value){case"single":return!ye(I.value[m.value]);case"multiple":case"tags":return!ye(I.value)&&I.value.length>0}}),gr=H(()=>g.value!==void 0?g.value(I.value,K):I.value&&I.value.length>1?`${I.value.length} options selected`:"1 option selected"),yr=U(()=>!he.value.length&&!ue.value&&!Fe.value.length),br=U(()=>he.value.length>0&&Ee.value.length==0&&(B.value&&Q.value||!Q.value)),Fe=H(()=>Ye.value===!1||!B.value?[]:_r(B.value)!==-1?[]:[{[m.value]:B.value,[De.value[0]]:B.value,[u.value]:B.value,__CREATE__:!0}]),De=H(()=>l.value?Array.isArray(l.value)?l.value:[l.value]:[u.value]),wr=U(()=>{switch(a.value){case"single":return null;case"multiple":case"tags":return[]}}),Or=U(()=>b.value||ue.value),je=i=>{switch(typeof i!="object"&&(i=Ce(i)),a.value){case"single":ne(i);break;case"multiple":case"tags":ne(I.value.concat(i));break}r.emit("select",zt(i),i,K)},Ve=i=>{switch(typeof i!="object"&&(i=Ce(i)),a.value){case"single":Gt();break;case"tags":case"multiple":ne(Array.isArray(i)?I.value.filter(v=>i.map(M=>M[m.value]).indexOf(v[m.value])===-1):I.value.filter(v=>v[m.value]!=i[m.value]));break}r.emit("deselect",zt(i),i,K)},zt=i=>C.value?i:i[m.value],Ht=i=>{Ve(i)},kr=(i,v)=>{if(v.button!==0){v.preventDefault();return}Ht(i)},Gt=()=>{ne(wr.value),r.emit("clear",K)},Se=i=>{if(i.group!==void 0)return a.value==="single"?!1:$r(i[V.value])&&i[V.value].length;switch(a.value){case"single":return!ye(I.value)&&(I.value[m.value]==i[m.value]||typeof I.value[m.value]=="object"&&typeof i[m.value]=="object"&&or(I.value[m.value],i[m.value]));case"tags":case"multiple":return!ye(I.value)&&I.value.map(v=>v[m.value]).indexOf(i[m.value])!==-1}},St=i=>i[W.value]===!0,Ct=()=>x===void 0||x.value===-1||!kt.value&&x.value>0?!1:I.value.length>=x.value,Sr=i=>{if(!St(i)){if(X.value&&!Se(i)&&i.__CREATE__&&(i={...i},delete i.__CREATE__,i=X.value(i,K),i instanceof Promise)){ue.value=!0,i.then(v=>{ue.value=!1,Ut(v)});return}Ut(i)}},Ut=i=>{switch(i.__CREATE__&&(i={...i},delete i.__CREATE__),a.value){case"single":if(i&&Se(i)){q.value&&Ve(i),z.value&&($e(),_e());return}i&&Lt(i),$.value&&Z(),E.value&&($e(),_e()),i&&je(i);break;case"multiple":if(i&&Se(i)){Ve(i),z.value&&($e(),_e());return}if(Ct()){r.emit("max",K);return}i&&(Lt(i),je(i)),$.value&&Z(),o.value&&$e(),E.value&&_e();break;case"tags":if(i&&Se(i)){Ve(i),z.value&&($e(),_e());return}if(Ct()){r.emit("max",K);return}i&&Lt(i),$.value&&Z(),i&&je(i),o.value&&$e(),E.value&&_e();break}E.value||it()},Cr=i=>{if(!(St(i)||a.value==="single"||!F.value)){switch(a.value){case"multiple":case"tags":Tr(i[V.value])?Ve(i[V.value]):je(i[V.value].filter(v=>I.value.map(M=>M[m.value]).indexOf(v[m.value])===-1).filter(v=>!v[W.value]).filter((v,M)=>I.value.length+1+M<=x.value||x.value===-1)),o.value&&Qe.value&&Xe(Ot.value.filter(v=>!v[W.value])[Qe.value.index]);break}E.value&&wt()}},Lt=i=>{Ce(i[m.value])===void 0&&Ye.value&&(r.emit("tag",i[m.value],K),r.emit("option",i[m.value],K),r.emit("create",i[m.value],K),Ze.value&&Er(i),Z())},Lr=()=>{a.value!=="single"&&je(Ee.value.filter(i=>!i.disabled&&!Se(i)))},Tr=i=>i.find(v=>!Se(v)&&!v[W.value])===void 0,$r=i=>i.find(v=>!Se(v))===void 0,Ce=i=>he.value[he.value.map(v=>String(v[m.value])).indexOf(String(i))],_r=i=>he.value.findIndex(v=>De.value.some(M=>(parseInt(v[M])==v[M]?parseInt(v[M]):v[M])===(parseInt(i)==i?parseInt(i):i))),Br=i=>["tags","multiple"].indexOf(a.value)!==-1&&o.value&&Se(i),Er=i=>{Be.value.push(i)},Pr=i=>Oe.value?i.filter(v=>B.value?v.__VISIBLE__.length:v[V.value].length):i.filter(v=>B.value?v.__VISIBLE__.length:!0),Tt=(i,v=!0)=>{let M=i;if(B.value&&f.value){let Y=le.value;Y||(Y=(Ne,Xt,Zs)=>De.value.some(Rr=>{let Yt=At(lt(Ne[Rr]),j.value);return ee.value?Yt.startsWith(At(Xt,j.value)):Yt.indexOf(At(Xt,j.value))!==-1})),M=M.filter(Ne=>Y(Ne,B.value,K))}return o.value&&v&&(M=M.filter(Y=>!Br(Y))),M},$t=i=>{let v=i;return da(v)&&(v=Object.keys(v).map(M=>{let Y=v[M];return{[m.value]:M,[De.value[0]]:Y,[u.value]:Y}})),v&&Array.isArray(v)?v=v.map(M=>typeof M=="object"?M:{[m.value]:M,[De.value[0]]:M,[u.value]:M}):v=[],v},ut=()=>{ye(h.value)||(I.value=dt(h.value))},ct=i=>(ue.value=!0,new Promise((v,M)=>{n.value(B.value,K).then(Y=>{oe.value=Y||[],typeof i=="function"&&i(Y),ue.value=!1}).catch(Y=>{console.error(Y),oe.value=[],ue.value=!1}).finally(()=>{v()})})),_t=()=>{if(!!kt.value)if(a.value==="single"){let i=Ce(I.value[m.value]);if(i!==void 0){let v=i[u.value];I.value[u.value]=v,C.value&&(h.value[u.value]=v)}}else I.value.forEach((i,v)=>{let M=Ce(I.value[v][m.value]);if(M!==void 0){let Y=M[u.value];I.value[v][u.value]=Y,C.value&&(h.value[v][u.value]=Y)}})},Ar=i=>{ct(i)},dt=i=>ye(i)?a.value==="single"?{}:[]:C.value?i:a.value==="single"?Ce(i)||(N.value?{[u.value]:i,[m.value]:i,[De.value[0]]:i}:{}):i.filter(v=>!!Ce(v)||N.value).map(v=>Ce(v)||{[u.value]:v,[m.value]:v,[De.value[0]]:v}),Qt=()=>{ve.value=fe(B,i=>{i.length<A.value||!i&&A.value!==0||(ue.value=!0,k.value&&(oe.value=[]),setTimeout(()=>{i==B.value&&n.value(B.value,K).then(v=>{(i==B.value||!B.value)&&(oe.value=v,Qe.value=Ee.value.filter(M=>M[W.value]!==!0)[0]||null,ue.value=!1)}).catch(v=>{console.error(v)})},T.value))},{flush:"sync"})};if(a.value!=="single"&&!ye(h.value)&&!Array.isArray(h.value))throw new Error(`v-model must be an array when using "${a.value}" mode`);return n&&typeof n.value=="function"?O.value?ct(ut):C.value==!0&&ut():(oe.value=n.value,ut()),T.value>-1&&Qt(),fe(T,(i,v)=>{ve.value&&ve.value(),i>=0&&Qt()}),fe(h,i=>{if(ye(i)){ne(dt(i),!1);return}switch(a.value){case"single":(C.value?i[m.value]!=I.value[m.value]:i!=I.value[m.value])&&ne(dt(i),!1);break;case"multiple":case"tags":fa(C.value?i.map(v=>v[m.value]):i,I.value.map(v=>v[m.value]))||ne(dt(i),!1);break}},{deep:!0}),fe(n,(i,v)=>{typeof e.options=="function"?O.value&&(!v||i&&i.toString()!==v.toString())&&ct():(oe.value=e.options,Object.keys(I.value).length||ut(),_t())}),fe(u,_t),fe(s,(i,v)=>{ke.value=G.value&&i===-1?10:i}),{resolvedOptions:ot,pfo:Je,fo:Ee,filteredOptions:Ee,hasSelected:kt,multipleLabelText:gr,eo:he,extendedOptions:he,eg:Ie,extendedGroups:Ie,fg:Ot,filteredGroups:Ot,noOptions:yr,noResults:br,resolving:ue,busy:Or,offset:ke,select:je,deselect:Ve,remove:Ht,selectAll:Lr,clear:Gt,isSelected:Se,isDisabled:St,isMax:Ct,getOption:Ce,handleOptionClick:Sr,handleGroupClick:Cr,handleTagRemove:kr,refreshOptions:Ar,resolveOptions:ct,refreshLabels:_t}}function va(e,r,t){const{valueProp:n,showOptions:a,searchable:l,groupLabel:s,groups:o,mode:c,groupSelect:d,disabledProp:u,groupOptions:p}=ie(e),y=t.fo,g=t.fg,C=t.handleOptionClick,b=t.handleGroupClick,T=t.search,O=t.pointer,A=t.setPointer,f=t.clearPointer,k=t.multiselect,$=t.isOpen,m=H(()=>y.value.filter(h=>!h[u.value])),N=H(()=>g.value.filter(h=>!h[u.value])),D=U(()=>c.value!=="single"&&d.value),q=U(()=>O.value&&O.value.group),x=H(()=>K(O.value)),j=H(()=>{const h=q.value?O.value:K(O.value),B=N.value.map(ne=>ne[s.value]).indexOf(h[s.value]);let Z=N.value[B-1];return Z===void 0&&(Z=z.value),Z}),E=H(()=>{let h=N.value.map(B=>B.label).indexOf(q.value?O.value[s.value]:K(O.value)[s.value])+1;return N.value.length<=h&&(h=0),N.value[h]}),z=H(()=>[...N.value].slice(-1)[0]),Q=H(()=>O.value.__VISIBLE__.filter(h=>!h[u.value])[0]),re=H(()=>{const h=x.value.__VISIBLE__.filter(B=>!B[u.value]);return h[h.map(B=>B[n.value]).indexOf(O.value[n.value])-1]}),G=H(()=>{const h=K(O.value).__VISIBLE__.filter(B=>!B[u.value]);return h[h.map(B=>B[n.value]).indexOf(O.value[n.value])+1]}),V=H(()=>[...j.value.__VISIBLE__.filter(h=>!h[u.value])].slice(-1)[0]),Oe=H(()=>[...z.value.__VISIBLE__.filter(h=>!h[u.value])].slice(-1)[0]),F=h=>!!O.value&&(!h.group&&O.value[n.value]===h[n.value]||h.group!==void 0&&O.value[s.value]===h[s.value])?!0:void 0,X=()=>{A(m.value[0]||null)},W=()=>{!O.value||O.value[u.value]===!0||(q.value?b(O.value):C(O.value))},ee=()=>{if(O.value===null)A((o.value&&D.value?N.value[0].__CREATE__?m.value[0]:N.value[0]:m.value[0])||null);else if(o.value&&D.value){let h=q.value?Q.value:G.value;h===void 0&&(h=E.value,h.__CREATE__&&(h=h[p.value][0])),A(h||null)}else{let h=m.value.map(B=>B[n.value]).indexOf(O.value[n.value])+1;m.value.length<=h&&(h=0),A(m.value[h]||null)}rt(()=>{I()})},le=()=>{if(O.value===null){let h=m.value[m.value.length-1];o.value&&D.value&&(h=Oe.value,h===void 0&&(h=z.value)),A(h||null)}else if(o.value&&D.value){let h=q.value?V.value:re.value;h===void 0&&(h=q.value?j.value:x.value,h.__CREATE__&&(h=V.value,h===void 0&&(h=j.value))),A(h||null)}else{let h=m.value.map(B=>B[n.value]).indexOf(O.value[n.value])-1;h<0&&(h=m.value.length-1),A(m.value[h]||null)}rt(()=>{I()})},K=h=>N.value.find(B=>B.__VISIBLE__.map(Z=>Z[n.value]).indexOf(h[n.value])!==-1),I=()=>{let h=k.value.querySelector("[data-pointed]");if(!h)return;let B=h.parentElement.parentElement;o.value&&(B=q.value?h.parentElement.parentElement.parentElement:h.parentElement.parentElement.parentElement.parentElement),h.offsetTop+h.offsetHeight>B.clientHeight+B.scrollTop&&(B.scrollTop=h.offsetTop+h.offsetHeight-B.clientHeight),h.offsetTop<B.scrollTop&&(B.scrollTop=h.offsetTop)};return fe(T,h=>{l.value&&(h.length&&a.value?X():f())}),fe($,h=>{if(h&&k&&k.value){let B=k.value.querySelectorAll("[data-selected]")[0];if(!B)return;let Z=B.parentElement.parentElement;rt(()=>{Z.scrollTop=B.offsetTop})}}),{pointer:O,canPointGroups:D,isPointed:F,setPointerFirst:X,selectPointer:W,forwardPointer:ee,backwardPointer:le}}function se(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var r=e.ownerDocument;return r&&r.defaultView||window}return e}function xe(e){var r=se(e).Element;return e instanceof r||e instanceof Element}function pe(e){var r=se(e).HTMLElement;return e instanceof r||e instanceof HTMLElement}function Mt(e){if(typeof ShadowRoot>"u")return!1;var r=se(e).ShadowRoot;return e instanceof r||e instanceof ShadowRoot}var qe=Math.max,ht=Math.min,Ke=Math.round;function It(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(r){return r.brand+"/"+r.version}).join(" "):navigator.userAgent}function ur(){return!/^((?!chrome|android).)*safari/i.test(It())}function ze(e,r,t){r===void 0&&(r=!1),t===void 0&&(t=!1);var n=e.getBoundingClientRect(),a=1,l=1;r&&pe(e)&&(a=e.offsetWidth>0&&Ke(n.width)/e.offsetWidth||1,l=e.offsetHeight>0&&Ke(n.height)/e.offsetHeight||1);var s=xe(e)?se(e):window,o=s.visualViewport,c=!ur()&&t,d=(n.left+(c&&o?o.offsetLeft:0))/a,u=(n.top+(c&&o?o.offsetTop:0))/l,p=n.width/a,y=n.height/l;return{width:p,height:y,top:u,right:d+p,bottom:u+y,left:d,x:d,y:u}}function xt(e){var r=se(e),t=r.pageXOffset,n=r.pageYOffset;return{scrollLeft:t,scrollTop:n}}function ha(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ma(e){return e===se(e)||!pe(e)?xt(e):ha(e)}function be(e){return e?(e.nodeName||"").toLowerCase():null}function Re(e){return((xe(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ft(e){return ze(Re(e)).left+xt(e).scrollLeft}function Te(e){return se(e).getComputedStyle(e)}function jt(e){var r=Te(e),t=r.overflow,n=r.overflowX,a=r.overflowY;return/auto|scroll|overlay|hidden/.test(t+a+n)}function ga(e){var r=e.getBoundingClientRect(),t=Ke(r.width)/e.offsetWidth||1,n=Ke(r.height)/e.offsetHeight||1;return t!==1||n!==1}function ya(e,r,t){t===void 0&&(t=!1);var n=pe(r),a=pe(r)&&ga(r),l=Re(r),s=ze(e,a,t),o={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!t)&&((be(r)!=="body"||jt(l))&&(o=ma(r)),pe(r)?(c=ze(r,!0),c.x+=r.clientLeft,c.y+=r.clientTop):l&&(c.x=Ft(l))),{x:s.left+o.scrollLeft-c.x,y:s.top+o.scrollTop-c.y,width:s.width,height:s.height}}function cr(e){var r=ze(e),t=e.offsetWidth,n=e.offsetHeight;return Math.abs(r.width-t)<=1&&(t=r.width),Math.abs(r.height-n)<=1&&(n=r.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:n}}function gt(e){return be(e)==="html"?e:e.assignedSlot||e.parentNode||(Mt(e)?e.host:null)||Re(e)}function dr(e){return["html","body","#document"].indexOf(be(e))>=0?e.ownerDocument.body:pe(e)&&jt(e)?e:dr(gt(e))}function at(e,r){var t;r===void 0&&(r=[]);var n=dr(e),a=n===((t=e.ownerDocument)==null?void 0:t.body),l=se(n),s=a?[l].concat(l.visualViewport||[],jt(n)?n:[]):n,o=r.concat(s);return a?o:o.concat(at(gt(s)))}function ba(e){return["table","td","th"].indexOf(be(e))>=0}function Jt(e){return!pe(e)||Te(e).position==="fixed"?null:e.offsetParent}function wa(e){var r=/firefox/i.test(It()),t=/Trident/i.test(It());if(t&&pe(e)){var n=Te(e);if(n.position==="fixed")return null}var a=gt(e);for(Mt(a)&&(a=a.host);pe(a)&&["html","body"].indexOf(be(a))<0;){var l=Te(a);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||r&&l.willChange==="filter"||r&&l.filter&&l.filter!=="none")return a;a=a.parentNode}return null}function yt(e){for(var r=se(e),t=Jt(e);t&&ba(t)&&Te(t).position==="static";)t=Jt(t);return t&&(be(t)==="html"||be(t)==="body"&&Te(t).position==="static")?r:t||wa(e)||r}var ge="top",we="bottom",Ae="right",Le="left",Vt="auto",bt=[ge,we,Ae,Le],He="start",nt="end",Oa="clippingParents",fr="viewport",et="popper",ka="reference",er=bt.reduce(function(e,r){return e.concat([r+"-"+He,r+"-"+nt])},[]),Sa=[].concat(bt,[Vt]).reduce(function(e,r){return e.concat([r,r+"-"+He,r+"-"+nt])},[]),Ca="beforeRead",La="read",Ta="afterRead",$a="beforeMain",_a="main",Ba="afterMain",Ea="beforeWrite",Pa="write",Aa="afterWrite",Ra=[Ca,La,Ta,$a,_a,Ba,Ea,Pa,Aa];function Ia(e){var r=new Map,t=new Set,n=[];e.forEach(function(l){r.set(l.name,l)});function a(l){t.add(l.name);var s=[].concat(l.requires||[],l.requiresIfExists||[]);s.forEach(function(o){if(!t.has(o)){var c=r.get(o);c&&a(c)}}),n.push(l)}return e.forEach(function(l){t.has(l.name)||a(l)}),n}function Da(e){var r=Ia(e);return Ra.reduce(function(t,n){return t.concat(r.filter(function(a){return a.phase===n}))},[])}function Na(e){var r;return function(){return r||(r=new Promise(function(t){Promise.resolve().then(function(){r=void 0,t(e())})})),r}}function qa(e){var r=e.reduce(function(t,n){var a=t[n.name];return t[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,t},{});return Object.keys(r).map(function(t){return r[t]})}function Ma(e,r){var t=se(e),n=Re(e),a=t.visualViewport,l=n.clientWidth,s=n.clientHeight,o=0,c=0;if(a){l=a.width,s=a.height;var d=ur();(d||!d&&r==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:l,height:s,x:o+Ft(e),y:c}}function xa(e){var r,t=Re(e),n=xt(e),a=(r=e.ownerDocument)==null?void 0:r.body,l=qe(t.scrollWidth,t.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),s=qe(t.scrollHeight,t.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),o=-n.scrollLeft+Ft(e),c=-n.scrollTop;return Te(a||t).direction==="rtl"&&(o+=qe(t.clientWidth,a?a.clientWidth:0)-l),{width:l,height:s,x:o,y:c}}function Fa(e,r){var t=r.getRootNode&&r.getRootNode();if(e.contains(r))return!0;if(t&&Mt(t)){var n=r;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Dt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ja(e,r){var t=ze(e,!1,r==="fixed");return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function tr(e,r,t){return r===fr?Dt(Ma(e,t)):xe(r)?ja(r,t):Dt(xa(Re(e)))}function Va(e){var r=at(gt(e)),t=["absolute","fixed"].indexOf(Te(e).position)>=0,n=t&&pe(e)?yt(e):e;return xe(n)?r.filter(function(a){return xe(a)&&Fa(a,n)&&be(a)!=="body"}):[]}function Wa(e,r,t,n){var a=r==="clippingParents"?Va(e):[].concat(r),l=[].concat(a,[t]),s=l[0],o=l.reduce(function(c,d){var u=tr(e,d,n);return c.top=qe(u.top,c.top),c.right=ht(u.right,c.right),c.bottom=ht(u.bottom,c.bottom),c.left=qe(u.left,c.left),c},tr(e,s,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Pe(e){return e.split("-")[0]}function Ge(e){return e.split("-")[1]}function pr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function vr(e){var r=e.reference,t=e.element,n=e.placement,a=n?Pe(n):null,l=n?Ge(n):null,s=r.x+r.width/2-t.width/2,o=r.y+r.height/2-t.height/2,c;switch(a){case ge:c={x:s,y:r.y-t.height};break;case we:c={x:s,y:r.y+r.height};break;case Ae:c={x:r.x+r.width,y:o};break;case Le:c={x:r.x-t.width,y:o};break;default:c={x:r.x,y:r.y}}var d=a?pr(a):null;if(d!=null){var u=d==="y"?"height":"width";switch(l){case He:c[d]=c[d]-(r[u]/2-t[u]/2);break;case nt:c[d]=c[d]+(r[u]/2-t[u]/2);break}}return c}function hr(){return{top:0,right:0,bottom:0,left:0}}function Ka(e){return Object.assign({},hr(),e)}function za(e,r){return r.reduce(function(t,n){return t[n]=e,t},{})}function Wt(e,r){r===void 0&&(r={});var t=r,n=t.placement,a=n===void 0?e.placement:n,l=t.strategy,s=l===void 0?e.strategy:l,o=t.boundary,c=o===void 0?Oa:o,d=t.rootBoundary,u=d===void 0?fr:d,p=t.elementContext,y=p===void 0?et:p,g=t.altBoundary,C=g===void 0?!1:g,b=t.padding,T=b===void 0?0:b,O=Ka(typeof T!="number"?T:za(T,bt)),A=y===et?ka:et,f=e.rects.popper,k=e.elements[C?A:y],$=Wa(xe(k)?k:k.contextElement||Re(e.elements.popper),c,u,s),m=ze(e.elements.reference),N=vr({reference:m,element:f,strategy:"absolute",placement:a}),D=Dt(Object.assign({},f,N)),q=y===et?D:m,x={top:$.top-q.top+O.top,bottom:q.bottom-$.bottom+O.bottom,left:$.left-q.left+O.left,right:q.right-$.right+O.right},j=e.modifiersData.offset;if(y===et&&j){var E=j[a];Object.keys(x).forEach(function(z){var Q=[Ae,we].indexOf(z)>=0?1:-1,re=[ge,we].indexOf(z)>=0?"y":"x";x[z]+=E[re]*Q})}return x}var rr={placement:"bottom",modifiers:[],strategy:"absolute"};function ar(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return!r.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Ha(e){e===void 0&&(e={});var r=e,t=r.defaultModifiers,n=t===void 0?[]:t,a=r.defaultOptions,l=a===void 0?rr:a;return function(o,c,d){d===void 0&&(d=l);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},rr,l),modifiersData:{},elements:{reference:o,popper:c},attributes:{},styles:{}},p=[],y=!1,g={state:u,setOptions:function(O){var A=typeof O=="function"?O(u.options):O;b(),u.options=Object.assign({},l,u.options,A),u.scrollParents={reference:xe(o)?at(o):o.contextElement?at(o.contextElement):[],popper:at(c)};var f=Da(qa([].concat(n,u.options.modifiers)));return u.orderedModifiers=f.filter(function(k){return k.enabled}),C(),g.update()},forceUpdate:function(){if(!y){var O=u.elements,A=O.reference,f=O.popper;if(!!ar(A,f)){u.rects={reference:ya(A,yt(f),u.options.strategy==="fixed"),popper:cr(f)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(x){return u.modifiersData[x.name]=Object.assign({},x.data)});for(var k=0;k<u.orderedModifiers.length;k++){if(u.reset===!0){u.reset=!1,k=-1;continue}var $=u.orderedModifiers[k],m=$.fn,N=$.options,D=N===void 0?{}:N,q=$.name;typeof m=="function"&&(u=m({state:u,options:D,name:q,instance:g})||u)}}}},update:Na(function(){return new Promise(function(T){g.forceUpdate(),T(u)})}),destroy:function(){b(),y=!0}};if(!ar(o,c))return g;g.setOptions(d).then(function(T){!y&&d.onFirstUpdate&&d.onFirstUpdate(T)});function C(){u.orderedModifiers.forEach(function(T){var O=T.name,A=T.options,f=A===void 0?{}:A,k=T.effect;if(typeof k=="function"){var $=k({state:u,name:O,instance:g,options:f}),m=function(){};p.push($||m)}})}function b(){p.forEach(function(T){return T()}),p=[]}return g}}var ft={passive:!0};function Ga(e){var r=e.state,t=e.instance,n=e.options,a=n.scroll,l=a===void 0?!0:a,s=n.resize,o=s===void 0?!0:s,c=se(r.elements.popper),d=[].concat(r.scrollParents.reference,r.scrollParents.popper);return l&&d.forEach(function(u){u.addEventListener("scroll",t.update,ft)}),o&&c.addEventListener("resize",t.update,ft),function(){l&&d.forEach(function(u){u.removeEventListener("scroll",t.update,ft)}),o&&c.removeEventListener("resize",t.update,ft)}}var Ua={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ga,data:{}};function Qa(e){var r=e.state,t=e.name;r.modifiersData[t]=vr({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})}var Xa={name:"popperOffsets",enabled:!0,phase:"read",fn:Qa,data:{}},Ya={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Za(e,r){var t=e.x,n=e.y,a=r.devicePixelRatio||1;return{x:Ke(t*a)/a||0,y:Ke(n*a)/a||0}}function nr(e){var r,t=e.popper,n=e.popperRect,a=e.placement,l=e.variation,s=e.offsets,o=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,p=e.isFixed,y=s.x,g=y===void 0?0:y,C=s.y,b=C===void 0?0:C,T=typeof u=="function"?u({x:g,y:b}):{x:g,y:b};g=T.x,b=T.y;var O=s.hasOwnProperty("x"),A=s.hasOwnProperty("y"),f=Le,k=ge,$=window;if(d){var m=yt(t),N="clientHeight",D="clientWidth";if(m===se(t)&&(m=Re(t),Te(m).position!=="static"&&o==="absolute"&&(N="scrollHeight",D="scrollWidth")),m=m,a===ge||(a===Le||a===Ae)&&l===nt){k=we;var q=p&&m===$&&$.visualViewport?$.visualViewport.height:m[N];b-=q-n.height,b*=c?1:-1}if(a===Le||(a===ge||a===we)&&l===nt){f=Ae;var x=p&&m===$&&$.visualViewport?$.visualViewport.width:m[D];g-=x-n.width,g*=c?1:-1}}var j=Object.assign({position:o},d&&Ya),E=u===!0?Za({x:g,y:b},se(t)):{x:g,y:b};if(g=E.x,b=E.y,c){var z;return Object.assign({},j,(z={},z[k]=A?"0":"",z[f]=O?"0":"",z.transform=($.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",z))}return Object.assign({},j,(r={},r[k]=A?b+"px":"",r[f]=O?g+"px":"",r.transform="",r))}function Ja(e){var r=e.state,t=e.options,n=t.gpuAcceleration,a=n===void 0?!0:n,l=t.adaptive,s=l===void 0?!0:l,o=t.roundOffsets,c=o===void 0?!0:o,d={placement:Pe(r.placement),variation:Ge(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:a,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,nr(Object.assign({},d,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:s,roundOffsets:c})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,nr(Object.assign({},d,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}var en={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ja,data:{}};function tn(e){var r=e.state;Object.keys(r.elements).forEach(function(t){var n=r.styles[t]||{},a=r.attributes[t]||{},l=r.elements[t];!pe(l)||!be(l)||(Object.assign(l.style,n),Object.keys(a).forEach(function(s){var o=a[s];o===!1?l.removeAttribute(s):l.setAttribute(s,o===!0?"":o)}))})}function rn(e){var r=e.state,t={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,t.popper),r.styles=t,r.elements.arrow&&Object.assign(r.elements.arrow.style,t.arrow),function(){Object.keys(r.elements).forEach(function(n){var a=r.elements[n],l=r.attributes[n]||{},s=Object.keys(r.styles.hasOwnProperty(n)?r.styles[n]:t[n]),o=s.reduce(function(c,d){return c[d]="",c},{});!pe(a)||!be(a)||(Object.assign(a.style,o),Object.keys(l).forEach(function(c){a.removeAttribute(c)}))})}}var an={name:"applyStyles",enabled:!0,phase:"write",fn:tn,effect:rn,requires:["computeStyles"]},nn=[Ua,Xa,en,an],sn=Ha({defaultModifiers:nn});function ln(e){return e==="x"?"y":"x"}function pt(e,r,t){return qe(e,ht(r,t))}function on(e,r,t){var n=pt(e,r,t);return n>t?t:n}function un(e){var r=e.state,t=e.options,n=e.name,a=t.mainAxis,l=a===void 0?!0:a,s=t.altAxis,o=s===void 0?!1:s,c=t.boundary,d=t.rootBoundary,u=t.altBoundary,p=t.padding,y=t.tether,g=y===void 0?!0:y,C=t.tetherOffset,b=C===void 0?0:C,T=Wt(r,{boundary:c,rootBoundary:d,padding:p,altBoundary:u}),O=Pe(r.placement),A=Ge(r.placement),f=!A,k=pr(O),$=ln(k),m=r.modifiersData.popperOffsets,N=r.rects.reference,D=r.rects.popper,q=typeof b=="function"?b(Object.assign({},r.rects,{placement:r.placement})):b,x=typeof q=="number"?{mainAxis:q,altAxis:q}:Object.assign({mainAxis:0,altAxis:0},q),j=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,E={x:0,y:0};if(!!m){if(l){var z,Q=k==="y"?ge:Le,re=k==="y"?we:Ae,G=k==="y"?"height":"width",V=m[k],Oe=V+T[Q],F=V-T[re],X=g?-D[G]/2:0,W=A===He?N[G]:D[G],ee=A===He?-D[G]:-N[G],le=r.elements.arrow,K=g&&le?cr(le):{width:0,height:0},I=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:hr(),h=I[Q],B=I[re],Z=pt(0,N[G],K[G]),ne=f?N[G]/2-X-Z-h-x.mainAxis:W-Z-h-x.mainAxis,Qe=f?-N[G]/2+X+Z+B+x.mainAxis:ee+Z+B+x.mainAxis,Xe=r.elements.arrow&&yt(r.elements.arrow),$e=Xe?k==="y"?Xe.clientTop||0:Xe.clientLeft||0:0,it=(z=j==null?void 0:j[k])!=null?z:0,wt=V+ne-it-$e,_e=V+Qe-it,lt=pt(g?ht(Oe,wt):Oe,V,g?qe(F,_e):F);m[k]=lt,E[k]=lt-V}if(o){var Be,oe=k==="x"?ge:Le,ue=k==="x"?we:Ae,ve=m[$],ke=$==="y"?"height":"width",ot=ve+T[oe],Ye=ve-T[ue],Ze=[ge,Le].indexOf(O)!==-1,he=(Be=j==null?void 0:j[$])!=null?Be:0,Je=Ze?ot:ve-N[ke]-D[ke]-he+x.altAxis,Ee=Ze?ve+N[ke]+D[ke]-he-x.altAxis:Ye,Ie=g&&Ze?on(Je,ve,Ee):pt(g?Je:ot,ve,g?Ee:Ye);m[$]=Ie,E[$]=Ie-ve}r.modifiersData[n]=E}}var cn={name:"preventOverflow",enabled:!0,phase:"main",fn:un,requiresIfExists:["offset"]},dn={left:"right",right:"left",bottom:"top",top:"bottom"};function vt(e){return e.replace(/left|right|bottom|top/g,function(r){return dn[r]})}var fn={start:"end",end:"start"};function sr(e){return e.replace(/start|end/g,function(r){return fn[r]})}function pn(e,r){r===void 0&&(r={});var t=r,n=t.placement,a=t.boundary,l=t.rootBoundary,s=t.padding,o=t.flipVariations,c=t.allowedAutoPlacements,d=c===void 0?Sa:c,u=Ge(n),p=u?o?er:er.filter(function(C){return Ge(C)===u}):bt,y=p.filter(function(C){return d.indexOf(C)>=0});y.length===0&&(y=p);var g=y.reduce(function(C,b){return C[b]=Wt(e,{placement:b,boundary:a,rootBoundary:l,padding:s})[Pe(b)],C},{});return Object.keys(g).sort(function(C,b){return g[C]-g[b]})}function vn(e){if(Pe(e)===Vt)return[];var r=vt(e);return[sr(e),r,sr(r)]}function hn(e){var r=e.state,t=e.options,n=e.name;if(!r.modifiersData[n]._skip){for(var a=t.mainAxis,l=a===void 0?!0:a,s=t.altAxis,o=s===void 0?!0:s,c=t.fallbackPlacements,d=t.padding,u=t.boundary,p=t.rootBoundary,y=t.altBoundary,g=t.flipVariations,C=g===void 0?!0:g,b=t.allowedAutoPlacements,T=r.options.placement,O=Pe(T),A=O===T,f=c||(A||!C?[vt(T)]:vn(T)),k=[T].concat(f).reduce(function(K,I){return K.concat(Pe(I)===Vt?pn(r,{placement:I,boundary:u,rootBoundary:p,padding:d,flipVariations:C,allowedAutoPlacements:b}):I)},[]),$=r.rects.reference,m=r.rects.popper,N=new Map,D=!0,q=k[0],x=0;x<k.length;x++){var j=k[x],E=Pe(j),z=Ge(j)===He,Q=[ge,we].indexOf(E)>=0,re=Q?"width":"height",G=Wt(r,{placement:j,boundary:u,rootBoundary:p,altBoundary:y,padding:d}),V=Q?z?Ae:Le:z?we:ge;$[re]>m[re]&&(V=vt(V));var Oe=vt(V),F=[];if(l&&F.push(G[E]<=0),o&&F.push(G[V]<=0,G[Oe]<=0),F.every(function(K){return K})){q=j,D=!1;break}N.set(j,F)}if(D)for(var X=C?3:1,W=function(I){var h=k.find(function(B){var Z=N.get(B);if(Z)return Z.slice(0,I).every(function(ne){return ne})});if(h)return q=h,"break"},ee=X;ee>0;ee--){var le=W(ee);if(le==="break")break}r.placement!==q&&(r.modifiersData[n]._skip=!0,r.placement=q,r.reset=!0)}}var mn={name:"flip",enabled:!0,phase:"main",fn:hn,requiresIfExists:["offset"],data:{_skip:!1}};function gn(e,r,t){const{disabled:n,appendTo:a,appendToBody:l,openDirection:s}=ie(e),o=st().proxy,c=t.multiselect,d=t.dropdown,u=ae(!1),p=ae(null),y=ae(null),g=U(()=>a.value||l.value),C=U(()=>s.value==="top"&&y.value==="bottom"||s.value==="bottom"&&y.value!=="top"?"bottom":"top"),b=()=>{u.value||n.value||(u.value=!0,r.emit("open",o),g.value&&rt(()=>{O()}))},T=()=>{!u.value||(u.value=!1,r.emit("close",o))},O=()=>{if(!p.value)return;let f=parseInt(window.getComputedStyle(d.value).borderTopWidth.replace("px","")),k=parseInt(window.getComputedStyle(d.value).borderBottomWidth.replace("px",""));p.value.setOptions($=>({...$,modifiers:[...$.modifiers,{name:"offset",options:{offset:[0,(C.value==="top"?f:k)*-1]}}]})),p.value.update()},A=f=>{for(;f&&f!==document.body;){if(getComputedStyle(f).position==="fixed")return!0;f=f.parentElement}return!1};return Nt(()=>{!g.value||(p.value=sn(c.value,d.value,{strategy:A(c.value)?"fixed":void 0,placement:s.value,modifiers:[cn,mn,{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:f})=>{f.styles.popper.width=`${f.rects.reference.width}px`},effect:({state:f})=>{f.elements.popper.style.width=`${f.elements.reference.offsetWidth}px`}},{name:"toggleClass",enabled:!0,phase:"write",fn({state:f}){y.value=f.placement}}]}))}),xr(()=>{!g.value||!p.value||(p.value.destroy(),p.value=null)}),{popper:p,isOpen:u,open:b,close:T,placement:C,updatePopper:O}}function yn(e,r,t){const{searchable:n,disabled:a,clearOnBlur:l}=ie(e),s=t.input,o=t.open,c=t.close,d=t.clearSearch,u=t.isOpen,p=t.wrapper,y=t.tags,g=ae(!1),C=ae(!1),b=U(()=>n.value||a.value?-1:0),T=()=>{n.value&&s.value.blur(),p.value.blur()},O=()=>{n.value&&!a.value&&s.value.focus()},A=(D=!0)=>{a.value||(g.value=!0,D&&o())},f=()=>{g.value=!1,setTimeout(()=>{g.value||(c(),l.value&&d())},1)};return{tabindex:b,isActive:g,mouseClicked:C,blur:T,focus:O,activate:A,deactivate:f,handleFocusIn:D=>{D.target.closest("[data-tags]")&&D.target.nodeName!=="INPUT"||D.target.closest("[data-clear]")||A(C.value)},handleFocusOut:()=>{f()},handleCaretClick:()=>{f(),T()},handleMousedown:D=>{C.value=!0,u.value&&(D.target.isEqualNode(p.value)||D.target.isEqualNode(y.value))?setTimeout(()=>{f()},0):!u.value&&(document.activeElement.isEqualNode(p.value)||document.activeElement.isEqualNode(s.value))&&A(),setTimeout(()=>{C.value=!1},0)}}}function bn(e,r,t){const{mode:n,addTagOn:a,openDirection:l,searchable:s,showOptions:o,valueProp:c,groups:d,addOptionOn:u,createTag:p,createOption:y,reverse:g}=ie(e),C=st().proxy,b=t.iv,T=t.update,O=t.deselect,A=t.search,f=t.setPointer,k=t.selectPointer,$=t.backwardPointer,m=t.forwardPointer,N=t.multiselect,D=t.wrapper,q=t.tags,x=t.isOpen,j=t.open,E=t.blur,z=t.fo,Q=U(()=>p.value||y.value||!1),re=U(()=>a.value!==void 0?a.value:u.value!==void 0?u.value:["enter"]),G=()=>{n.value==="tags"&&!o.value&&Q.value&&s.value&&!d.value&&f(z.value[z.value.map(F=>F[c.value]).indexOf(A.value)])};return{handleKeydown:F=>{r.emit("keydown",F,C);let X,W;switch(["ArrowLeft","ArrowRight","Enter"].indexOf(F.key)!==-1&&n.value==="tags"&&(X=[...N.value.querySelectorAll("[data-tags] > *")].filter(ee=>ee!==q.value),W=X.findIndex(ee=>ee===document.activeElement)),F.key){case"Backspace":if(n.value==="single"||s.value&&[null,""].indexOf(A.value)===-1||b.value.length===0)return;let ee=b.value.filter(le=>!le.disabled&&le.remove!==!1);ee.length&&O(ee[ee.length-1]);break;case"Enter":if(F.preventDefault(),F.keyCode===229)return;if(W!==-1&&W!==void 0){T([...b.value].filter((le,K)=>K!==W)),W===X.length-1&&(X.length-1?X[X.length-2].focus():s.value?q.value.querySelector("input").focus():D.value.focus());return}if(re.value.indexOf("enter")===-1&&Q.value)return;G(),k();break;case" ":if(!Q.value&&!s.value){F.preventDefault(),G(),k();return}if(!Q.value)return!1;if(re.value.indexOf("space")===-1&&Q.value)return;F.preventDefault(),G(),k();break;case"Tab":case";":case",":if(re.value.indexOf(F.key.toLowerCase())===-1||!Q.value)return;G(),k(),F.preventDefault();break;case"Escape":E();break;case"ArrowUp":if(F.preventDefault(),!o.value)return;x.value||j(),$();break;case"ArrowDown":if(F.preventDefault(),!o.value)return;x.value||j(),m();break;case"ArrowLeft":if(s.value&&q.value&&q.value.querySelector("input").selectionStart||F.shiftKey||n.value!=="tags"||!b.value||!b.value.length)return;F.preventDefault(),W===-1?X[X.length-1].focus():W>0&&X[W-1].focus();break;case"ArrowRight":if(W===-1||F.shiftKey||n.value!=="tags"||!b.value||!b.value.length)return;F.preventDefault(),X.length>W+1?X[W+1].focus():s.value?q.value.querySelector("input").focus():s.value||D.value.focus();break}},handleKeyup:F=>{r.emit("keyup",F,C)},preparePointer:G}}function wn(e,r,t){const{classes:n,disabled:a,showOptions:l,breakTags:s}=ie(e),o=t.isOpen,c=t.isPointed,d=t.isSelected,u=t.isDisabled,p=t.isActive,y=t.canPointGroups,g=t.resolving,C=t.fo,b=t.placement,T=U(()=>({container:"multiselect",containerDisabled:"is-disabled",containerOpen:"is-open",containerOpenTop:"is-open-top",containerActive:"is-active",wrapper:"multiselect-wrapper",singleLabel:"multiselect-single-label",singleLabelText:"multiselect-single-label-text",multipleLabel:"multiselect-multiple-label",search:"multiselect-search",tags:"multiselect-tags",tag:"multiselect-tag",tagWrapper:"multiselect-tag-wrapper",tagWrapperBreak:"multiselect-tag-wrapper-break",tagDisabled:"is-disabled",tagRemove:"multiselect-tag-remove",tagRemoveIcon:"multiselect-tag-remove-icon",tagsSearchWrapper:"multiselect-tags-search-wrapper",tagsSearch:"multiselect-tags-search",tagsSearchCopy:"multiselect-tags-search-copy",placeholder:"multiselect-placeholder",caret:"multiselect-caret",caretOpen:"is-open",clear:"multiselect-clear",clearIcon:"multiselect-clear-icon",spinner:"multiselect-spinner",inifinite:"multiselect-inifite",inifiniteSpinner:"multiselect-inifite-spinner",dropdown:"multiselect-dropdown",dropdownTop:"is-top",dropdownHidden:"is-hidden",options:"multiselect-options",optionsTop:"is-top",group:"multiselect-group",groupLabel:"multiselect-group-label",groupLabelPointable:"is-pointable",groupLabelPointed:"is-pointed",groupLabelSelected:"is-selected",groupLabelDisabled:"is-disabled",groupLabelSelectedPointed:"is-selected is-pointed",groupLabelSelectedDisabled:"is-selected is-disabled",groupOptions:"multiselect-group-options",option:"multiselect-option",optionPointed:"is-pointed",optionSelected:"is-selected",optionDisabled:"is-disabled",optionSelectedPointed:"is-selected is-pointed",optionSelectedDisabled:"is-selected is-disabled",noOptions:"multiselect-no-options",noResults:"multiselect-no-results",fakeInput:"multiselect-fake-input",assist:"multiselect-assistive-text",spacer:"multiselect-spacer",...n.value})),O=U(()=>!!(o.value&&l.value&&(!g.value||g.value&&C.value.length)));return{classList:H(()=>{const f=T.value;return{container:[f.container].concat(a.value?f.containerDisabled:[]).concat(O.value&&b.value==="top"?f.containerOpenTop:[]).concat(O.value&&b.value!=="top"?f.containerOpen:[]).concat(p.value?f.containerActive:[]),wrapper:f.wrapper,spacer:f.spacer,singleLabel:f.singleLabel,singleLabelText:f.singleLabelText,multipleLabel:f.multipleLabel,search:f.search,tags:f.tags,tag:[f.tag].concat(a.value?f.tagDisabled:[]),tagWrapper:[f.tagWrapper,s.value?f.tagWrapperBreak:null],tagDisabled:f.tagDisabled,tagRemove:f.tagRemove,tagRemoveIcon:f.tagRemoveIcon,tagsSearchWrapper:f.tagsSearchWrapper,tagsSearch:f.tagsSearch,tagsSearchCopy:f.tagsSearchCopy,placeholder:f.placeholder,caret:[f.caret].concat(o.value?f.caretOpen:[]),clear:f.clear,clearIcon:f.clearIcon,spinner:f.spinner,inifinite:f.inifinite,inifiniteSpinner:f.inifiniteSpinner,dropdown:[f.dropdown].concat(b.value==="top"?f.dropdownTop:[]).concat(!o.value||!l.value||!O.value?f.dropdownHidden:[]),options:[f.options].concat(b.value==="top"?f.optionsTop:[]),group:f.group,groupLabel:k=>{let $=[f.groupLabel];return c(k)?$.push(d(k)?f.groupLabelSelectedPointed:f.groupLabelPointed):d(k)&&y.value?$.push(u(k)?f.groupLabelSelectedDisabled:f.groupLabelSelected):u(k)&&$.push(f.groupLabelDisabled),y.value&&$.push(f.groupLabelPointable),$},groupOptions:f.groupOptions,option:(k,$)=>{let m=[f.option];return c(k)?m.push(d(k)?f.optionSelectedPointed:f.optionPointed):d(k)?m.push(u(k)?f.optionSelectedDisabled:f.optionSelected):(u(k)||$&&u($))&&m.push(f.optionDisabled),m},noOptions:f.noOptions,noResults:f.noResults,assist:f.assist,fakeInput:f.fakeInput}}),showDropdown:O}}function On(e,r,t){const{limit:n,infinite:a}=ie(e),l=t.isOpen,s=t.offset,o=t.search,c=t.pfo,d=t.eo,u=ae(null),p=We(null),y=U(()=>s.value<c.value.length),g=b=>{const{isIntersecting:T,target:O}=b[0];if(T){const A=O.offsetParent,f=A.scrollTop;s.value+=n.value==-1?10:n.value,rt(()=>{A.scrollTop=f})}},C=()=>{l.value&&s.value<c.value.length?u.value.observe(p.value):!l.value&&u.value&&u.value.disconnect()};return fe(l,()=>{!a.value||C()}),fe(o,()=>{!a.value||(s.value=n.value,C())},{flush:"post"}),fe(d,()=>{!a.value||C()},{immediate:!1,flush:"post"}),Nt(()=>{window&&window.IntersectionObserver&&(u.value=new IntersectionObserver(g))}),{hasMore:y,infiniteLoader:p}}function kn(e,r,t){const{placeholder:n,id:a,valueProp:l,label:s,mode:o,groupLabel:c,aria:d,searchable:u}=ie(e),p=t.pointer,y=t.iv,g=t.hasSelected,C=t.multipleLabelText,b=ae(null),T=U(()=>`${a.value?a.value+"-":""}assist`),O=U(()=>`${a.value?a.value+"-":""}multiselect-options`),A=U(()=>{if(p.value){let E=a.value?`${a.value}-`:"";return E+=`${p.value.group?"multiselect-group":"multiselect-option"}-`,E+=p.value.group?p.value.index:p.value[l.value],E}}),f=U(()=>n.value),k=U(()=>o.value!=="single"),$=H(()=>o.value==="single"&&g.value?y.value[s.value]:o.value==="multiple"&&g.value?C.value:o.value==="tags"&&g.value?y.value.map(E=>E[s.value]).join(", "):""),m=H(()=>{let E={...d.value};return u.value&&(E["aria-labelledby"]=E["aria-labelledby"]?`${T.value} ${E["aria-labelledby"]}`:T.value,$.value&&E["aria-label"]&&(E["aria-label"]=`${$.value}, ${E["aria-label"]}`)),E}),N=E=>`${a.value?a.value+"-":""}multiselect-option-${E[l.value]}`,D=E=>`${a.value?a.value+"-":""}multiselect-group-${E.index}`,q=E=>`${E}`,x=E=>`${E}`,j=E=>`${E} \u274E`;return Nt(()=>{if(a.value&&document&&document.querySelector){let E=document.querySelector(`[for="${a.value}"]`);b.value=E?E.innerText:null}}),{arias:m,ariaLabel:$,ariaAssist:T,ariaControls:O,ariaPlaceholder:f,ariaMultiselectable:k,ariaActiveDescendant:A,ariaOptionId:N,ariaOptionLabel:q,ariaGroupId:D,ariaGroupLabel:x,ariaTagLabel:j}}function Sn(e,r,t){const{locale:n,fallbackLocale:a}=ie(e);return{localize:s=>!s||typeof s!="object"?s:s&&s[n.value]?s[n.value]:s&&n.value&&s[n.value.toUpperCase()]?s[n.value.toUpperCase()]:s&&s[a.value]?s[a.value]:s&&a.value&&s[a.value.toUpperCase()]?s[a.value.toUpperCase()]:s&&Object.keys(s)[0]?s[Object.keys(s)[0]]:""}}function Cn(e,r,t){const n=We(null),a=We(null),l=We(null),s=We(null),o=We(null);return{multiselect:n,wrapper:a,tags:l,input:s,dropdown:o}}function Ln(e,r,t,n={}){return t.forEach(a=>{n={...n,...a(e,r,n)}}),n}var Kt={name:"Multiselect",emits:["paste","open","close","select","deselect","input","search-change","tag","option","update:modelValue","change","clear","keydown","keyup","max","create"],props:{value:{required:!1},modelValue:{required:!1},options:{type:[Array,Object,Function],required:!1,default:()=>[]},id:{type:[String,Number],required:!1,default:void 0},name:{type:[String,Number],required:!1,default:"multiselect"},disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"label"},trackBy:{type:[String,Array],required:!1,default:void 0},valueProp:{type:String,required:!1,default:"value"},placeholder:{type:String,required:!1,default:null},mode:{type:String,required:!1,default:"single"},searchable:{type:Boolean,required:!1,default:!1},limit:{type:Number,required:!1,default:-1},hideSelected:{type:Boolean,required:!1,default:!0},createTag:{type:Boolean,required:!1,default:void 0},createOption:{type:Boolean,required:!1,default:void 0},appendNewTag:{type:Boolean,required:!1,default:void 0},appendNewOption:{type:Boolean,required:!1,default:void 0},addTagOn:{type:Array,required:!1,default:void 0},addOptionOn:{type:Array,required:!1,default:void 0},caret:{type:Boolean,required:!1,default:!0},loading:{type:Boolean,required:!1,default:!1},noOptionsText:{type:[String,Object],required:!1,default:"The list is empty"},noResultsText:{type:[String,Object],required:!1,default:"No results found"},multipleLabel:{type:Function,required:!1,default:void 0},object:{type:Boolean,required:!1,default:!1},delay:{type:Number,required:!1,default:-1},minChars:{type:Number,required:!1,default:0},resolveOnLoad:{type:Boolean,required:!1,default:!0},filterResults:{type:Boolean,required:!1,default:!0},clearOnSearch:{type:Boolean,required:!1,default:!1},clearOnSelect:{type:Boolean,required:!1,default:!0},canDeselect:{type:Boolean,required:!1,default:!0},canClear:{type:Boolean,required:!1,default:!0},max:{type:Number,required:!1,default:-1},showOptions:{type:Boolean,required:!1,default:!0},required:{type:Boolean,required:!1,default:!1},openDirection:{type:String,required:!1,default:"bottom"},nativeSupport:{type:Boolean,required:!1,default:!1},classes:{type:Object,required:!1,default:()=>({})},strict:{type:Boolean,required:!1,default:!0},closeOnSelect:{type:Boolean,required:!1,default:!0},closeOnDeselect:{type:Boolean,required:!1,default:!1},autocomplete:{type:String,required:!1,default:void 0},groups:{type:Boolean,required:!1,default:!1},groupLabel:{type:String,required:!1,default:"label"},groupOptions:{type:String,required:!1,default:"options"},groupHideEmpty:{type:Boolean,required:!1,default:!1},groupSelect:{type:Boolean,required:!1,default:!0},inputType:{type:String,required:!1,default:"text"},attrs:{required:!1,type:Object,default:()=>({})},onCreate:{required:!1,type:Function,default:void 0},disabledProp:{type:String,required:!1,default:"disabled"},searchStart:{type:Boolean,required:!1,default:!1},reverse:{type:Boolean,required:!1,default:!1},regex:{type:[Object,String,RegExp],required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},infinite:{type:Boolean,required:!1,default:!1},aria:{required:!1,type:Object,default:()=>({})},clearOnBlur:{required:!1,type:Boolean,default:!0},locale:{required:!1,type:String,default:null},fallbackLocale:{required:!1,type:String,default:"en"},searchFilter:{required:!1,type:Function,default:null},allowAbsent:{required:!1,type:Boolean,default:!1},appendToBody:{required:!1,type:Boolean,default:!1},closeOnScroll:{required:!1,type:Boolean,default:!1},breakTags:{required:!1,type:Boolean,default:!1},appendTo:{required:!1,type:String,default:void 0}},setup(e,r){return Ln(e,r,[Cn,Sn,oa,ca,gn,ua,la,yn,pa,On,va,bn,wn,kn])},beforeMount(){(this.$root.constructor&&this.$root.constructor.version&&this.$root.constructor.version.match(/^2\./)||this.vueVersionMs===2)&&(this.$options.components.Teleport||(this.$options.components.Teleport={render(){return this.$slots.default?this.$slots.default[0]:null}}))}};const Tn=["id","dir"],$n=["tabindex","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable","role"],_n=["type","modelValue","value","autocomplete","id","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],Bn=["onKeyup","aria-label"],En=["onClick"],Pn=["type","modelValue","value","id","autocomplete","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],An=["innerHTML"],Rn=["id"],In=["id"],Dn=["id","aria-label","aria-selected"],Nn=["data-pointed","onMouseenter","onClick"],qn=["innerHTML"],Mn=["aria-label"],xn=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],Fn=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],jn=["innerHTML"],Vn=["innerHTML"],Wn=["value"],Kn=["name","value"],zn=["name","value"],Hn=["id"];function Gn(e,r,t,n,a,l){return w(),S("div",{ref:"multiselect",class:R(e.classList.container),id:t.searchable?void 0:t.id,dir:t.rtl?"rtl":void 0,onFocusin:r[12]||(r[12]=(...s)=>e.handleFocusIn&&e.handleFocusIn(...s)),onFocusout:r[13]||(r[13]=(...s)=>e.handleFocusOut&&e.handleFocusOut(...s)),onKeyup:r[14]||(r[14]=(...s)=>e.handleKeyup&&e.handleKeyup(...s)),onKeydown:r[15]||(r[15]=(...s)=>e.handleKeydown&&e.handleKeydown(...s))},[L("div",Bt({class:e.classList.wrapper,onMousedown:r[9]||(r[9]=(...s)=>e.handleMousedown&&e.handleMousedown(...s)),ref:"wrapper",tabindex:e.tabindex,"aria-controls":t.searchable?void 0:e.ariaControls,"aria-placeholder":t.searchable?void 0:e.ariaPlaceholder,"aria-expanded":t.searchable?void 0:e.isOpen,"aria-activedescendant":t.searchable?void 0:e.ariaActiveDescendant,"aria-multiselectable":t.searchable?void 0:e.ariaMultiselectable,role:t.searchable?void 0:"combobox"},t.searchable?{}:e.arias),[P(" Search "),t.mode!=="tags"&&t.searchable&&!t.disabled?(w(),S("input",Bt({key:0,type:t.inputType,modelValue:e.search,value:e.search,class:e.classList.search,autocomplete:t.autocomplete,id:t.searchable?t.id:void 0,onInput:r[0]||(r[0]=(...s)=>e.handleSearchInput&&e.handleSearchInput(...s)),onKeypress:r[1]||(r[1]=(...s)=>e.handleKeypress&&e.handleKeypress(...s)),onPaste:r[2]||(r[2]=Et((...s)=>e.handlePaste&&e.handlePaste(...s),["stop"])),ref:"input","aria-controls":e.ariaControls,"aria-placeholder":e.ariaPlaceholder,"aria-expanded":e.isOpen,"aria-activedescendant":e.ariaActiveDescendant,"aria-multiselectable":e.ariaMultiselectable,role:"combobox"},{...t.attrs,...e.arias}),null,16,_n)):P("v-if",!0),P(" Tags (with search) "),t.mode=="tags"?(w(),S("div",{key:1,class:R(e.classList.tags),"data-tags":""},[(w(!0),S(de,null,me(e.iv,(s,o,c)=>te(e.$slots,"tag",{option:s,handleTagRemove:e.handleTagRemove,disabled:t.disabled},()=>[(w(),S("span",{class:R([e.classList.tag,s.disabled?e.classList.tagDisabled:null]),tabindex:"-1",onKeyup:Rt(d=>e.handleTagRemove(s,d),["enter"]),key:c,"aria-label":e.ariaTagLabel(e.localize(s[t.label]))},[L("span",{class:R(e.classList.tagWrapper)},J(e.localize(s[t.label])),3),!t.disabled&&!s.disabled?(w(),S("span",{key:0,class:R(e.classList.tagRemove),onClick:Et(d=>e.handleTagRemove(s,d),["stop"])},[L("span",{class:R(e.classList.tagRemoveIcon)},null,2)],10,En)):P("v-if",!0)],42,Bn))])),256)),L("div",{class:R(e.classList.tagsSearchWrapper),ref:"tags"},[P(" Used for measuring search width "),L("span",{class:R(e.classList.tagsSearchCopy)},J(e.search),3),P(" Actual search input "),t.searchable&&!t.disabled?(w(),S("input",Bt({key:0,type:t.inputType,modelValue:e.search,value:e.search,class:e.classList.tagsSearch,id:t.searchable?t.id:void 0,autocomplete:t.autocomplete,onInput:r[3]||(r[3]=(...s)=>e.handleSearchInput&&e.handleSearchInput(...s)),onKeypress:r[4]||(r[4]=(...s)=>e.handleKeypress&&e.handleKeypress(...s)),onPaste:r[5]||(r[5]=Et((...s)=>e.handlePaste&&e.handlePaste(...s),["stop"])),ref:"input","aria-controls":e.ariaControls,"aria-placeholder":e.ariaPlaceholder,"aria-expanded":e.isOpen,"aria-activedescendant":e.ariaActiveDescendant,"aria-multiselectable":e.ariaMultiselectable,role:"combobox"},{...t.attrs,...e.arias}),null,16,Pn)):P("v-if",!0)],2)],2)):P("v-if",!0),P(" Single label "),t.mode=="single"&&e.hasSelected&&!e.search&&e.iv?te(e.$slots,"singlelabel",{key:2,value:e.iv},()=>[L("div",{class:R(e.classList.singleLabel)},[L("span",{class:R(e.classList.singleLabelText)},J(e.localize(e.iv[t.label])),3)],2)]):P("v-if",!0),P(" Multiple label "),t.mode=="multiple"&&e.hasSelected&&!e.search?te(e.$slots,"multiplelabel",{key:3,values:e.iv},()=>[L("div",{class:R(e.classList.multipleLabel),innerHTML:e.multipleLabelText},null,10,An)]):P("v-if",!0),P(" Placeholder "),t.placeholder&&!e.hasSelected&&!e.search?te(e.$slots,"placeholder",{key:4},()=>[L("div",{class:R(e.classList.placeholder),"aria-hidden":"true"},J(t.placeholder),3)]):P("v-if",!0),P(" Spinner "),t.loading||e.resolving?te(e.$slots,"spinner",{key:5},()=>[L("span",{class:R(e.classList.spinner),"aria-hidden":"true"},null,2)]):P("v-if",!0),P(" Clear "),e.hasSelected&&!t.disabled&&t.canClear&&!e.busy?te(e.$slots,"clear",{key:6,clear:e.clear},()=>[L("span",{"aria-hidden":"true",tabindex:"0",role:"button","data-clear":"","aria-roledescription":"\u274E",class:R(e.classList.clear),onClick:r[6]||(r[6]=(...s)=>e.clear&&e.clear(...s)),onKeyup:r[7]||(r[7]=Rt((...s)=>e.clear&&e.clear(...s),["enter"]))},[L("span",{class:R(e.classList.clearIcon)},null,2)],34)]):P("v-if",!0),P(" Caret "),t.caret&&t.showOptions?te(e.$slots,"caret",{key:7,handleCaretClick:e.handleCaretClick,isOpen:e.isOpen},()=>[L("span",{class:R(e.classList.caret),onClick:r[8]||(r[8]=(...s)=>e.handleCaretClick&&e.handleCaretClick(...s)),"aria-hidden":"true"},null,2)]):P("v-if",!0)],16,$n),P(" Options "),(w(),tt(Mr,{to:t.appendTo||"body",disabled:!t.appendToBody&&!t.appendTo},[L("div",{id:t.id?`${t.id}-dropdown`:void 0,class:R(e.classList.dropdown),tabindex:"-1",ref:"dropdown",onFocusin:r[10]||(r[10]=(...s)=>e.handleFocusIn&&e.handleFocusIn(...s)),onFocusout:r[11]||(r[11]=(...s)=>e.handleFocusOut&&e.handleFocusOut(...s))},[te(e.$slots,"beforelist",{options:e.fo}),L("ul",{class:R(e.classList.options),id:e.ariaControls,role:"listbox"},[t.groups?(w(!0),S(de,{key:0},me(e.fg,(s,o,c)=>(w(),S("li",{class:R(e.classList.group),key:c,id:e.ariaGroupId(s),"aria-label":e.ariaGroupLabel(e.localize(s[t.groupLabel])),"aria-selected":e.isSelected(s),role:"option"},[s.__CREATE__?P("v-if",!0):(w(),S("div",{key:0,class:R(e.classList.groupLabel(s)),"data-pointed":e.isPointed(s),onMouseenter:d=>e.setPointer(s,o),onClick:d=>e.handleGroupClick(s)},[te(e.$slots,"grouplabel",{group:s,isSelected:e.isSelected,isPointed:e.isPointed},()=>[L("span",{innerHTML:e.localize(s[t.groupLabel])},null,8,qn)])],42,Nn)),L("ul",{class:R(e.classList.groupOptions),"aria-label":e.ariaGroupLabel(e.localize(s[t.groupLabel])),role:"group"},[(w(!0),S(de,null,me(s.__VISIBLE__,(d,u,p)=>(w(),S("li",{class:R(e.classList.option(d,s)),"data-pointed":e.isPointed(d),"data-selected":e.isSelected(d)||void 0,key:p,onMouseenter:y=>e.setPointer(d),onClick:y=>e.handleOptionClick(d),id:e.ariaOptionId(d),"aria-selected":e.isSelected(d),"aria-label":e.ariaOptionLabel(e.localize(d[t.label])),role:"option"},[te(e.$slots,"option",{option:d,isSelected:e.isSelected,isPointed:e.isPointed,search:e.search},()=>[L("span",null,J(e.localize(d[t.label])),1)])],42,xn))),128))],10,Mn)],10,Dn))),128)):(w(!0),S(de,{key:1},me(e.fo,(s,o,c)=>(w(),S("li",{class:R(e.classList.option(s)),"data-pointed":e.isPointed(s),"data-selected":e.isSelected(s)||void 0,key:c,onMouseenter:d=>e.setPointer(s),onClick:d=>e.handleOptionClick(s),id:e.ariaOptionId(s),"aria-selected":e.isSelected(s),"aria-label":e.ariaOptionLabel(e.localize(s[t.label])),role:"option"},[te(e.$slots,"option",{option:s,isSelected:e.isSelected,isPointed:e.isPointed,search:e.search},()=>[L("span",null,J(e.localize(s[t.label])),1)])],42,Fn))),128))],10,In),e.noOptions?te(e.$slots,"nooptions",{key:0},()=>[L("div",{class:R(e.classList.noOptions),innerHTML:e.localize(t.noOptionsText)},null,10,jn)]):P("v-if",!0),e.noResults?te(e.$slots,"noresults",{key:1},()=>[L("div",{class:R(e.classList.noResults),innerHTML:e.localize(t.noResultsText)},null,10,Vn)]):P("v-if",!0),t.infinite&&e.hasMore?(w(),S("div",{key:2,class:R(e.classList.inifinite),ref:"infiniteLoader"},[te(e.$slots,"infinite",{},()=>[L("span",{class:R(e.classList.inifiniteSpinner)},null,2)])],2)):P("v-if",!0),te(e.$slots,"afterlist",{options:e.fo})],42,Rn)],8,["to","disabled"])),P(" Hacky input element to show HTML5 required warning "),t.required?(w(),S("input",{key:0,class:R(e.classList.fakeInput),tabindex:"-1",value:e.textValue,required:""},null,10,Wn)):P("v-if",!0),P(" Native input support "),t.nativeSupport?(w(),S(de,{key:1},[t.mode=="single"?(w(),S("input",{key:0,type:"hidden",name:t.name,value:e.plainValue!==void 0?e.plainValue:""},null,8,Kn)):(w(!0),S(de,{key:1},me(e.plainValue,(s,o)=>(w(),S("input",{type:"hidden",name:`${t.name}[]`,value:s,key:o},null,8,zn))),128))],64)):P("v-if",!0),P(" Screen reader assistive text "),t.searchable&&e.hasSelected?(w(),S("div",{key:2,class:R(e.classList.assist),id:e.ariaAssist,"aria-hidden":"true"},J(e.ariaLabel),11,Hn)):P("v-if",!0),P(" Create height for empty input "),L("div",{class:R(e.classList.spacer)},null,2)],42,Tn)}Kt.render=Gn;Kt.__file="src/Multiselect.vue";const Un={name:"sorter",props:["label","currentList","listName","item","index","tippyTop"],mixins:[Ir],components:{VueSlider:Dr,Multiselect:Kt},data:function(){return{range:null,dropdownOptions:null}},created:function(){if(this.item.range){var e={min:this.item.rangeMin(),max:this.item.rangeMax()};e.min<0&&(e.min=0),e.max<0&&(e.max=0),e.min>e.max&&(e.min=e.max),_.isArray(this.item.range)?(e.value=_.clone(this.item.range),(e.value[0]<e.min||e.value[0]>e.max)&&(e.value[0]=e.min),(e.value[1]<e.min||e.value[1]>e.max)&&(e.value[1]=e.max)):e.value=[e.min,e.max],this.item.rangeMarks&&(e.marks=this.item.rangeMarks(e)),this.range=e}else this.$store.getters.filterExtrasKeys.match(this.item.key)&&!this.dropdownOptions&&!!this.item.dropdownOpts&&(this.dropdownOptions=this.item.dropdownOpts())},computed:{filterBooks:function(){this.$compEmitter.emit("repositionSearchOpts");let e=!(this.item.range||this.item.dropdownOpts),r=!e&&this.item.active===!0;if(e||r){const t=this,n=_.filter(this.$store.state.listRenderingOpts.filter,{type:"filterExtras",active:!0});let a=function(s){let o=_.map(n,function(c){return!!c.condition(s,c)});return!_.includes(o,!1)},l=this.item.type==="filter"?this.$store.getters.searchIsActive?this.$store.state.searchCollection:this.$store.getters.collectionSource:this.$store.getters.collection;return _.filter(l,function(s){return t.item.condition(s)&&a(s)})}else return[]},filterAmounts:function(){return this.filterBooks.length},rangeVal:function(){return this.range.value},inputVmodel:{get:function(){return this.item.active},set:function(e){let r={listName:this.listName,key:this.item.key,active:e};this.item.range&&(r.range=e?_.clone(this.range.value):!0),this.item.group&&(r.group=!0),this.$store.commit("updateListRenderingOpts",r),this.doTheThings(e)}}},methods:{isActiveSortItem:function(e){if(this.listName==="sort"&&e.current){const r=this.$store.getters.searchIsActive;if(!r||r&&this.$route.query.sort)return!0}return!1},tooltipFormatter:function(e){return e+this.item.rangeSuffix},dropdownChanged:function(e){let r={listName:this.listName,key:this.item.key,active:e.length>0,value:e};this.item.group&&(r.group=!0),this.$store.commit("updateListRenderingOpts",r),this.doTheThings(e,!0)},dropdownOpened:function(e){!this.dropdownOptions&&!!this.item.dropdownOpts&&(this.dropdownOptions=this.item.dropdownOpts())},rangeChanged:function(e){this.range.value=e;let r={listName:this.listName,key:this.item.key,range:e,active:!0};this.item.group&&(r.group=!0),this.$store.commit("updateListRenderingOpts",r),this.doTheThings(e,!0)},adjustRange:function(e){let r={listName:this.listName,key:this.item.key,active:!0,range:[0,0]};if(e==="left"){const t=this.range.min;r.range[0]=t,this.range.value=[t,this.range.value[1]]}else{const t=this.range.max;r.range[1]=t,this.range.value=[this.range.value[0],t]}this.item.group&&(r.group=!0),this.$store.commit("updateListRenderingOpts",r),this.doTheThings(r.range,!0)},doTheThings:function(e,r){const t={change:{scope:this.listName==="scope",sort:this.listName==="sort",filter:this.listName==="filter"},randomize:this.item.key==="randomize"&&!this.$store.getters.searchIsActive,noSortvalues:this.item.key!=="sortValues",start:""};t.change.scope?t.start="start-scope":(t.change.sort||t.randomize)&&t.noSortvalues?(this.$store.commit("prop",{key:"searchSort",value:!1}),t.start="start-sort"):t.change.filter&&(t.start="start-filter"),this.saveOptions(e,r),this.$compEmitter.emit(t.start)},saveOptions:function(e,r){const t=this.item.key,n=this.item.type,a={};if(t==="sortValues")a[t]=e;else if(n==="sort")a[n]=t,a.sortDir=e?"desc":"asc";else if(this.listName==="filter"){if(n==="filter"&&(a[n]=encodeURIComponent(this.$store.getters.filterKeys)),n==="filterExtras"){this.$route.name==="series"&&t.match(/inLibrary|notInLibrary/)&&this.$store.commit("prop",{key:"sticky.seriesFilters."+t,value:e});let l=this;const s=l.$store.getters.filterExtrasKeys,o=s?_.map(s.split(","),function(c){const d=_.find(l.$store.state.listRenderingOpts.filter,{key:c});let u=_.get(l.range,"value");if(u||(u=_.get(d,"range")),u&&_.isArray(u))return encodeURIComponent(c+":"+u[0]+"-"+(u[1]||u[0]));if(_.get(d,"value.0"))return encodeURIComponent(c+":")+encodeURIComponent(_.map(d.value,function(p){return p}).join("|"));if(c)return encodeURIComponent(c)}):!1;a[n]=_.isArray(o)?o.join(", "):null}}else this.listName==="scope"&&(a[this.listName]=encodeURIComponent(this.$store.getters.scopeKeys));a.book=null,this.$store.commit("prop",{key:"bookClicked",value:!0}),this.$updateQueries(a,{src:"saveOptions"})}}},Qn={class:"sorter-button-wrapper"},Xn=["content"],Yn=["value"],Zn={key:2,class:"radiobutton"},Jn={key:3,class:"checkbox"},es={key:0,class:"dropdown-label-suffix"},ts={key:0,class:"label-exclude"},rs={key:1,class:"label-include"},as={key:5,class:"books-in-filter"},ns={key:0,class:"range-slider"},ss={key:1};function is(e,r,t,n,a,l){const s=ia,o=aa,c=ea,d=Yr,u=Ur,p=Nr,y=Zt("vue-slider"),g=Zt("Multiselect"),C=qt("tippy");return w(),S("span",Qn,[t.item?Me((w(),S("span",{key:0,class:R(t.item.key),content:t.item.tippy?t.item.tippy:!1},[L("label",{class:R(["sorter-button",{ranged:t.item.range,"faux-disabled":t.item.type==="filterExtras"?l.filterAmounts<1:!1,"is-dropdown":t.item.dropdownOpts}])},[t.label===!1?(w(),S("span",{key:0,class:R(["input-label",{active:l.isActiveSortItem(t.item)}])},[te(e.$slots,"default",{},void 0,!0)],2)):P("",!0),Me(L("input",{type:"checkbox",value:t.index,"onUpdate:modelValue":r[0]||(r[0]=b=>l.inputVmodel=b)},null,8,Yn),[[jr,l.inputVmodel]]),t.item.type==="sort"?(w(),S("span",{key:1,class:R(["sortbox",{active:l.isActiveSortItem(t.item)}])},[ce(s,{"data-icon":"sort-down"}),ce(o,{"data-icon":"sort-up"})],2)):t.item.radiobutton?(w(),S("span",Zn,[ce(c,{"data-icon":"circle"}),ce(d,{"data-icon":"circle"})])):(w(),S("span",Jn,[ce(u,{"data-icon":"square"}),ce(p,{"data-icon":"check"})])),t.label!==!1?(w(),S("span",{key:4,class:R(["input-label",{active:l.isActiveSortItem(t.item)}])},[L("span",null,[ir(J(t.item.label||t.item.key.replace(".name",""))+" ",1),t.item.dropdownOpts?(w(),S("span",es,[t.item.exclude?(w(),S("span",ts,"Exclude")):(w(),S("span",rs,"Include"))])):P("",!0)])],2)):P("",!0),t.listName==="filter"?(w(),S("span",as,J(l.filterAmounts),1)):P("",!0)],2),t.item.range?(w(),S("div",ns,[L("span",{style:{"font-size":"13px","line-height":"13px",cursor:"w-resize"},onClick:r[1]||(r[1]=b=>l.adjustRange("left"))},J(e.range.value[0])+J(t.item.rangeSuffix),1),ce(y,{disabled:e.range.disabled,dragOnClick:!0,adsorb:!0,lazy:!0,hideLabel:!0,included:!!e.range.marks,interval:e.range.min===e.range.max?1:t.item.rangeInterval||1,marks:e.range.marks,modelValue:e.range.value,min:e.range.min,max:e.range.max,"min-range":e.range.min===e.range.max?0:t.item.rangeMinDist||0,"enable-cross":!1,onChange:l.rangeChanged,"tooltip-formatter":t.item.tooltipFormatter||l.tooltipFormatter,"tooltip-placement":"top",tooltip:"active","use-keyboard":!1,onDragStart:r[2]||(r[2]=b=>e.$store.commit("prop",{key:"searchOptCloseGuard",value:!0})),onDragEnd:r[3]||(r[3]=b=>e.$store.commit("prop",{key:"searchOptCloseGuard",value:!1}))},null,8,["disabled","included","interval","marks","modelValue","min","max","min-range","onChange","tooltip-formatter"]),L("span",{style:{"font-size":"13px","line-height":"13px",cursor:"e-resize"},onClick:r[4]||(r[4]=b=>l.adjustRange("right"))},J(e.range.value[1])+J(t.item.rangeSuffix),1)])):P("",!0),t.item.dropdownOpts?(w(),S("div",ss,[ce(g,{ref:"multiselect",value:t.item.value,placeholder:t.item.placeholder||"Include...",onChange:l.dropdownChanged,onOpen:l.dropdownOpened,options:e.dropdownOptions,mode:"tags",hideSelected:!0,clearOnSelect:!1,closeOnSelect:!1,multiple:!0,taggable:!0,searchable:!0,"track-by":t.item.dropdownTrackBy,label:t.item.dropdownLabel,valueProp:t.item.dropdownValueProp},null,8,["value","placeholder","onChange","onOpen","options","track-by","label","valueProp"])])):P("",!0)],10,Xn)),[[C,{delay:150,maxWidth:350,placement:t.tippyTop?"top":"left",flipBehavior:t.tippyTop?["top","bottom","left","right"]:["left","top","bottom","right"],distance:t.listName?20:10}]]):P("",!0)])}const ls=mt(Un,[["render",is],["__scopeId","data-v-2ac66435"]]),os={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function us(e,r){return w(),S("svg",os,r[0]||(r[0]=[L("path",{fill:"currentColor",d:"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273c-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556c4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504C119.034 504 8.001 392.967 8 256.002C7.999 119.193 119.646 7.755 256.455 8"},null,-1)]))}const cs=Ue({name:"fa-solid-redo-alt",render:us});const ds={name:"searchOptions",props:["listName"],data:function(){return{css:{arrow:{left:"0px"},options:{right:"0px"}}}},computed:{mainfilters(){const e=this.$route.name==="wishlist",r=this.$route.name==="series",t=this.$route.name==="podcasts";return _.filter(this.optionsList,n=>{let a=this.allTrue({"is regular filter":n.type==="filter","exclude from wishlist":e?!n.excludeFromWishlist:!0,"exclude from series subpage":r?!n.excludeFromSeriesSubPage:!0,"exclude from podcasts":t?!n.excludeFromPodcasts:!0});return!e&&n.onlyWishlist&&(a=!1),a})},filteredOptionsList(){const e=this.$route.name==="wishlist",r=this.$route.name==="series",t=this.$route.name==="podcasts",n=this.$store.state.sticky.viewMode!=="grid";return _.filter(this.optionsList,a=>{let l=this.allTrue({"no sort values in list view":!(n&&a.key==="sortValues"),"is not a regular filter":a.type!=="filter","exclude from wishlist":e?!a.excludeFromWishlist:!0,"exclude from series subpage":r?!a.excludeFromSeriesSubPage:!0,"exclude from podcasts":t?!a.excludeFromPodcasts:!0});return!e&&a.onlyWishlist&&(l=!1),l})}},created:function(){this.$store.commit("prop",{key:"lazyScroll",value:!1}),this.$updateQueries({y:null}),this.optionsList=this.$store.state.listRenderingOpts[this.listName]},mounted:function(){this.repositionSearchOptions(),this.$compEmitter.on("repositionSearchOpts",this.repositionSearchOptions),this.$compEmitter.on("afterWindowResize",this.repositionSearchOptions)},beforeUnmount:function(){this.$compEmitter.off("repositionSearchOpts",this.repositionSearchOptions),this.$compEmitter.off("afterWindowResize",this.repositionSearchOptions),scroll({top:0,behavior:"smooth"}),this.$store.commit("prop",{key:"searchOptOpenHeight",value:null}),this.$store.commit("prop",{key:"lazyScroll",value:!0})},methods:{allTrue(e){return e=_.values(e),_.every(e)},resetFilters:function(){this.$updateQueries({filter:null,filterExtras:null}),this.$store.commit("resetFilters"),this.$compEmitter.emit("start-filter")},repositionSearchOptions:_.debounce(function(){this.$nextTick(function(){const e={};e.el=this.$refs.options,e.width=e.el.offsetWidth,e.left=e.el.offsetLeft;const r={};r.el=document.querySelector("#ale-search > .icons"),r.width=r.el.offsetWidth;const t={};t.el=document.querySelector(".search-opt-btn.active").parentNode,t.width=t.el.offsetWidth,t.left=t.el.offsetLeft,t.middle=r.width-(t.left+t.width/2),e.position=t.middle-e.width/2;const n=t.el.getBoundingClientRect().left+t.width/2+e.width/2-window.innerWidth,a=n>0?n+20:0;this.css.options.right=e.position+a+"px",this.css.arrow.left=e.width/2-10+a+"px"})},150,{leading:!0,trailing:!1}),sortersMounted:_.debounce(function(){if(this.$refs.options){let e=this.$refs.options.offsetHeight+this.$refs.options.offsetTop;window.innerHeight>e?e=window.innerHeight:e=e+100,this.$store.commit("prop",{key:"searchOptOpenHeight",value:e})}},250,{leading:!1,trailing:!0})}},fs={class:"search-options-inner-wrap"},ps={class:"total"},vs=["content"];function hs(e,r,t,n,a,l){const s=cs,o=ls,c=qt("tippy");return w(),S("div",{id:"search-options",ref:"options",class:R(t.listName+"-options"),style:Pt(e.css.options)},[L("div",fs,[L("div",{class:"search-opts-arrow",style:Pt(e.css.arrow)},null,4),t.listName==="filter"&&e.$store.getters.regularFilters?(w(),S("ul",{key:0,class:"regular-filters",style:Pt({top:e.$store.state.topNavOffset+"px"})},[Me((w(),S("li",{class:"reset-filters",onClick:r[0]||(r[0]=(...d)=>l.resetFilters&&l.resetFilters(...d)),content:"Reset filters"},[ce(s)])),[[c,{placement:"top",flipBehavior:["top","right","bottom","left"]}]]),L("li",ps,[L("span",{class:R({difference:e.$store.getters.collection.length!==e.$store.getters.collectionTotal})},J(e.$store.getters.collection.length),3),ir(" / "+J(e.$store.getters.collectionTotal),1)]),(w(!0),S(de,null,me(l.mainfilters,(d,u)=>(w(),S("li",{class:"search-option",key:d.key},[ce(o,{label:d.label,item:d,index:u,currentList:e.optionsList,listName:t.listName,onVnodeMounted:l.sortersMounted},null,8,["label","item","index","currentList","listName","onVnodeMounted"])]))),128)),e.$store.getters.collectionHours?Me((w(),S("li",{key:0,class:"duration-text",content:e.$store.getters.collectionHours},[L("small",null,J(e.$store.getters.collectionDuration),1)],8,vs)),[[c,{placement:"top",flipBehavior:["top","left","bottom","right"]}]]):P("",!0)],4)):P("",!0),L("ul",null,[(w(!0),S(de,null,me(l.filteredOptionsList,(d,u)=>(w(),S("li",{class:R(["search-option",{extras:d.type&&d.type.match(/extra/i),divider:d.type==="divider"}]),key:d.key},[d.type!=="divider"?(w(),tt(o,{key:0,label:d.label,item:d,index:u,currentList:e.optionsList,listName:t.listName,onVnodeMounted:l.sortersMounted},null,8,["label","item","index","currentList","listName","onVnodeMounted"])):P("",!0)],2))),128))])])],6)}const ms=mt(ds,[["render",hs]]);const gs={name:"searchIcons",props:["listName"],data:function(){return{items:[{name:"scope",on:!0,active:!1,icon:"fa-solid fa-microscope",tooltip:"Change the search scope for more accurate results"},{name:"filter",on:!0,active:!1,icon:"fa-solid fa-filter",tooltip:"Filter books"},{name:"sort",on:!0,active:!1,icon:"fa-solid fa-sort",tooltip:"Sort books"}]}},computed:{filtersActive:function(){return this.$store.getters.filterExtrasKeys||this.$store.getters.filterKeys!=="notStarted,started,finished"&&this.$store.getters.filterKeysLength},filteredItems(){return _.filter(this.items,e=>this.showIcon(e))}},methods:{openSearchOptions:function(e,r){const t=this.listName;this.$emit("update:listName",!1),t!==e.name&&this.$nextTick(function(){this.$emit("update:listName",e.name)})},showIcon:function(e){if(!!e)switch(e.name){case"scope":return this.$store.state.listRenderingOpts[e.name].length>0;case"filter":let r=!this.$store.getters.regularFilters;return _.filter(this.$store.state.listRenderingOpts[e.name],function(t){let n=t.type==="divider",a=r?!0:t.type===e.name;return!n&&a}).length>0;case"sort":return _.filter(this.$store.state.listRenderingOpts[e.name],function(t){let n=t.type==="divider",a=t.type===e.name;return!n&&a}).length>0}}}},ys={class:"icons"},bs=["content"],ws={class:"book-in-selection"},Os={class:"inner-wrap"},ks=["content","onClick"],Ss=["data-option"];function Cs(e,r,t,n,a,l){const s=qt("tippy");return w(),S("div",ys,[Me((w(),S("div",{class:"icon-wrap",content:"Items in current selection: <strong>"+e.$store.getters.collection.length+"</strong> / <strong>"+e.$store.getters.collectionTotal+"</strong>."+(e.$store.getters.collectionHours?"<br> That amounts to: "+e.$store.getters.collectionHours+` or ${e.$store.getters.collectionDuration}.`:"")+" "+(e.$route.name==="series"?"Owned books only!":"")},[L("div",ws,[L("div",Os,J(e.$store.getters.collection.length),1)])],8,bs)),[[s,{trigger:"click mouseenter"}]]),(w(!0),S(de,null,me(l.filteredItems,o=>Me((w(),S("div",{key:o.name,class:R(["icon-wrap",{disabled:!o.on}]),content:o.tooltip,onClick:c=>l.openSearchOptions(o,c)},[L("div",{class:R(["search-opt-btn",{active:t.listName===o.name,"active-filters":o.name==="filter"&&l.filtersActive}]),"data-option":o.name},[L("i",{class:R(o.icon)},null,2)],10,Ss)],10,ks)),[[s]])),128))])}const Ls=mt(gs,[["render",Cs],["__scopeId","data-v-3649eece"]]),Ts={methods:{sortName:function(e){return _.orderBy(e.books,function(r){if(r.name)return r.name},e.direction)}}},$s={methods:{sortIsbns:function(e){return _.orderBy(e.books,function(r){if(r.isbns){if(e.sortKey==="isbn10"){const t=_.find(r.isbns,["type","ISBN_10"]);return t?""+t.identifier:null}else if(e.sortKey==="isbn13"){const t=_.find(r.isbns,["type","ISBN_13"]);return t?""+t.identifier:null}}else return null},e.direction)}}},_s={methods:{sortTitle:function(e){return _.orderBy(e.books,[function(r){const t=r[e.sortKey];return t?e.sortKey==="title"?r.title||r.titleShort:_.isArray(t)&&_.find(t,"name")?_.map(t,"name").join(", "):t:null}],e.direction)}}},Bs={methods:{sortAmount:function(e){return _.orderBy(e.books,function(r){if(e.sortKey==="amountTotal"){if(r.allBooksMinusDupes)return r.allBooksMinusDupes.length;if(r.allBooks)return r.allBooks.length}else if(r.books)return r.books.length},e.direction)}}},Es={mixins:[lr],methods:{sortLength:function(e){const r=this;return _.orderBy(e.books,function(t){return t.length?r.timeStringToSeconds(t.length):0},e.direction)}}},Ps={methods:{sortRatings:function(e){const r=e.sortKey,t=[],n=[e.direction];switch(t.push(function(a){const l=_.get(a,r,0);return Number(l)}),r){case"myRating":case"rating":t.push(function(a){const l=_.get(a,"ratings",0);return Number(l)}),n.push(e.direction);break;case"ratings":t.push(function(a){const l=_.get(a,"rating",0);return Number(l)}),n.push(e.direction);break}return _.orderBy(e.books,t,n)}}},As={methods:{sortByLength:function(e){return _.orderBy(e.books,function(r){if(e.sortKey==="narratorsNumber")if(r.narrators){let t=_.find(r.narrators,function(n){return n.name.match("full cast")});return t&&r.narrators.length===1?99999999:r.narrators.length-(t?1:0)}else return 0;else return r[e.sortKey].length||0},e.direction)}}},Rs={mixins:[lr],methods:{sortProgress:function(e){var r=this;return _.orderBy(e.books,[function(t){if(t.progress){if(t.progress.toLowerCase().trim()==="finished")return 100;if(t.length){var n=r.timeStringToSeconds(t.progress);const a=r.timeStringToSeconds(t.length);return n=a-n,n/a*100}else return 0}else return 0},function(t){return t.length?!r.timeStringToSeconds(t.length):0}],e.direction)}}},Is={methods:{sortDateAdded:function(e){return _.orderBy(e.books,function(r){return r.added},e.direction)}}},Ds={methods:{sortFavorites:function(e){return _.orderBy(e.books,function(r){return r.favorite},e.direction)}}},Ns={methods:{sortWhispersync:function(e){return _.orderBy(e.books,function(r){const t=r[e.sortKey];if(t){if(t==="owned")return 2;if(t==="available")return 1}else return 0},e.direction)}}},qs={methods:{sortBookNumbers:function(e){return _.orderBy(e.books,function(r){return r.added},e.direction)},sortBookNumbersOriginal:function(e){const r=this.$route.params.series;return _.orderBy(e.books,function(t){let n=function(a){(_.isEmpty(a)||!a)&&(a=void 0);const l=_.isArray(a)?a[0]:a,s=typeof l=="string"?l.split("-"):[l];return s[0]?parseFloat(s[0]):s[0]};if(r&&t.series){let a=_.find(t.series,{asin:r});return n(a.bookNumbers)}else if(_.find(t.series,"bookNumbers")){let l=_.filter(t.series,"bookNumbers");return l=_.map(l,"bookNumbers"),l=_.flatten(l),n(l)}else return _.find(t.series)?-1:-2},e.direction)}}},Ms={methods:{sortReleaseDate:function(e){return _.orderBy(e.books,function(r){return r.releaseDate?new Date(r.releaseDate.split("-").join("/")):0},e.direction)}}},xs={methods:{sortStringNameProp:function(e){const r=e.sortKey.replace(".name","");return _.orderBy(e.books,function(t){return t[r]?t[r][0].name.toLowerCase():null},e.direction)}}},Fs={methods:{sortMissing:function(e){return _.orderBy(e.books,[r=>r.allBooksMinusDupes?r.allBooksMinusDupes.length-r.books.length:r.allBooks?r.allBooks.length-r.books.length:0,r=>r.myRating],[e.direction,"desc"])}}},js={methods:{sortPrice:function(e){return _.orderBy(e.books,function(r){return r.price},e.direction)}}},Vs={mixins:[Ts,$s,_s,Bs,Es,Ps,Rs,As,Is,Ds,Ns,qs,Ms,xs,Fs,js],methods:{filterBooks:function(e){const r=_.filter(this.$store.state.listRenderingOpts.filter,{type:"filter",active:!0}),t=_.find(this.$store.state.listRenderingOpts.filter,{type:"filter"}),n=_.filter(this.$store.state.listRenderingOpts.filter,{type:"filterExtras",active:!0});if(r||n){let a=function(l){let s=_.map(r,function(c){return!!c.condition(l)}),o=_.map(n,function(c){return!!c.condition(l)});return(t?_.includes(s,!0):!0)&&!_.includes(o,!1)};return _.filter(e,a)}else return e},sortBooks:function(e){const r=_.find(this.$store.state.listRenderingOpts.sort,function(t){if(t.key==="randomize"&&t.active)return!0;if(t.current)return!0});if(r){const t={books:e,direction:r.active?"desc":"asc",sortKey:r.key};switch(t.sortKey){case"randomize":e=_.shuffle(e);break;case"bookNumbers":t.missingNumber=0,e=this.sortBookNumbersOriginal(t);break;case"seriesOrder":t.missingNumber=0,e=this.sortBookNumbers(t);break;case"added":e=this.sortDateAdded(t);break;case"releaseDate":e=this.sortReleaseDate(t);break;case"authors.name":case"narrators.name":case"publishers.name":case"categories":case"tags.name":e=this.sortStringNameProp(t);break;case"narratorsNumber":e=this.sortByLength(t);break;case"title":case"series":case"format":case"isNew":case"language":case"fromPlusCatalog":case"unavailable":case"favorite":case"downloaded":case"storePageMissing":case"storePageChanged":case"archived":e=this.sortTitle(t);break;case"whispersync":e=this.sortWhispersync(t);break;case"length":e=this.sortLength(t);break;case"myRating":case"rating":case"ratings":e=this.sortRatings(t);break;case"progress":e=this.sortProgress(t);break;case"favorite":e=this.sortFavorites(t);break;case"name":e=this.sortName(t);break;case"amount":case"amountTotal":e=this.sortAmount(t);break;case"isbn10":case"isbn13":e=this.sortIsbns(t);break;case"missing":e=this.sortMissing(t);break;case"price":e=this.sortPrice(t);break}}return e}}};const Ws={name:"GallerySearch",mixins:[Vs],props:["collectionSource"],data:function(){return{enableZoomTimer:null,fuse:null,fuseOptions:{keys:[],location:0,threshold:.3,ignoreLocation:!0,shouldSort:!0,includeScore:!0,includeMatches:!0,useExtendedSearch:!0,minMatchCharLength:2},listName:!1,waypointOpts:{rootMargin:"-37px"},fixedSearch:!1,highlightSearch:!1,readyToCloseOpts:!1,autocompleteResults:[],useAutocomplete:!1}},mounted:function(){if(this.$route.query.search){let t=decodeURIComponent(this.$route.query.search);this.$store.commit("prop",{key:"searchQuery",value:t})}this.$store.commit("prop",{key:"collectionSource",value:this.collectionSource});let e=this.$store.getters.collectionSource;this.$route.query.sort||this.$route.query.filter||this.$route.query.filterExtras?((this.$route.query.filter||this.$route.query.filterExtras)&&(e=this.filterBooks(e)),this.$route.query.sort&&(e=this.sortBooks(e)),this.$store.commit("prop",{key:"mutatingCollection",value:e})):this.$store.commit("prop",{key:"mutatingCollection",value:this.sortBooks(this.filterBooks(e))}),this.$route.query.search&&(this.$route.query.sort&&(this.fuseOptions.shouldSort=!1),this.search(null,"on-load")),this.$refs.aleSearch.addEventListener("touchstart",this.iosAutozoomDisable,{passive:!0}),this.$compEmitter.on("ios-auto-zoom-disable",this.iosAutozoomDisable),this.$compEmitter.on("start-scope",this.scope),this.$compEmitter.on("start-sort",this.sort),this.$compEmitter.on("start-filter",this.filter),this.$compEmitter.on("search-focus",this.focusOnSearch),this.$store.commit("prop",{key:"searchMounted",value:!0})},beforeUnmount:function(){this.$store.commit("prop",{key:"searchQuery",value:""}),this.$refs.aleSearch.removeEventListener("touchstart",this.iosAutozoomDisable),this.$compEmitter.off("ios-auto-zoom-disable",this.iosAutozoomDisable),this.$compEmitter.off("start-scope",this.scope),this.$compEmitter.off("start-sort",this.sort),this.$compEmitter.off("start-filter",this.filter),this.$compEmitter.off("search-focus",this.focusOnSearch),this.$store.commit("prop",{key:"searchMounted",value:!1})},methods:{dontCloseOpts:_.throttle(function(){this.readyToCloseOpts&&(this.readyToCloseOpts=!1)},50,{leading:!1,trailing:!0}),closeOpts:function(){this.readyToCloseOpts&&(this.readyToCloseOpts=!1,this.$nextTick(function(){let e=this;setTimeout(function(){e.listName=!1},30)}))},scope:function(){this.$nextTick(()=>{this.$store.getters.searchIsActive&&(this.$store.commit("prop",{key:"mutatingCollection",value:this.sortBooks(this.filterBooks(this.$store.getters.collectionSource))}),this.$store.getters.searchIsActive||(this.fuseOptions.shouldSort=!1),this.search())})},filter:function(){this.$nextTick(()=>{this.$store.commit("prop",{key:"mutatingCollection",value:this.sortBooks(this.filterBooks(this.$store.getters.collectionSource))}),this.$store.getters.searchIsActive||(this.fuseOptions.shouldSort=!1),this.$store.getters.searchIsActive&&this.search()})},sort:function(){this.$nextTick(()=>{this.$store.commit("prop",{key:this.$store.getters.searchIsActive?"searchCollection":"mutatingCollection",value:this.sortBooks(this.$store.getters.collection)})})},search:_.debounce(function(e,r){const t={};if(decodeURIComponent(this.$route.query.search),r||(t.book=null,this.$store.commit("prop",{key:"bookClicked",value:!0})),e)if(this.fuseOptions.shouldSort=!0,this.$store.commit("prop",{key:"searchQuery",value:e.target.value}),t.search=encodeURIComponent(e.target.value),t.search||(t.search=null),e.target.value.trim()!=="")this.$route.query.sort&&(t.sort=null,t.sortDir=null);else{var a=_.find(this.$store.state.listRenderingOpts.sort,"current");t.sort=a.key,t.sortDir=a.active?"desc":"asc"}if(this.$updateQueries(t),this.$store.getters.searchIsActive){const l=this.modifyQuery(this.$store.state.searchQuery);this.fuseOptions.keys=this.aliciaKeys;let s=this;s.fuse=new zr(s.$store.state.mutatingCollection,s.fuseOptions);let o=s.fuse.search(l);s.useAutocomplete&&s.autocomplete(o),o=_.map(o,"item"),s.$store.commit("prop",{key:"searchCollection",value:o})}else this.$store.commit("prop",{key:"searchCollection",value:[]})},270,{leading:!1,trailing:!0}),autocomplete:function(e){let r=_.map(JSON.parse(JSON.stringify(this.aliciaKeys)),function(t,n){return t.key=t.name,t.name=t.name.replace(".name",""),t.active=n<1,t});_.each(e,function(t){_.each(t.matches,function(n){const a=_.find(r,{key:n.key});a.books=a.books||[],a.books.push({item:t.item,match:n,refIndex:t.refIndex,score:t.score})})}),r=_.filter(r,"books"),_.each(r,function(t,n){t.books=_.uniqBy(t.books,"match.value"),t.books=t.books.slice(0,5),t.books.length<2&&(r[n]=null),t.active=!1}),r=_.compact(r),r.length&&(r[0].active=!0),console.log("sections",r),this.autocompleteResults=r,console.log(r)},active_ac_item:function(e){_.each(this.autocompleteResults,function(r){r.active=!1}),e.active=!0},searchAutocompleteResult:function(e){const r=e.match.value;this.$store.commit("prop",{key:"searchQuery",value:r}),this.search()},searchEnterBlur:_.debounce(function(e){this.$refs.searchInput.blur()},100,{leading:!1,trailing:!0}),restoreOptions:function(){updateListRenderingOpts()},focusOnSearch:function(){scroll({top:0}),this.$refs.searchInput.focus()},modifyQuery:function(e){let r=e;return(e.match(/&/i)||e.match(/ and /i)||e.match(/ a /i)||e.match(/ the /i))&&(r=e+"|"+e.replace(/ & /ig," ")+"|"+e.replace(/ and /ig," ")+"|"+e.replace(/ a /ig," ")+"|"+e.replace(/ an /ig," ")+"|"+e.replace(/ the /ig," ")),r},iosAutozoomDisable:function(){if(document.querySelector(".is-ios")){let r=document.querySelector("head").querySelector("meta[name=viewport]");r.content="width=device-width, initial-scale=1.0, user-scalable=0",clearTimeout(this.enableZoomTimer),this.enableZoomTimer=setTimeout(function(){r.content="width=device-width, initial-scale=1.0, user-scalable=1"},700)}}},computed:{aliciaKeys:function(){const e=_.filter(this.$store.state.listRenderingOpts.scope,["active",!0]);return _.map(e,function(r){return{name:r.key,weight:r.weight||0}})},placeholder:function(){return"Search: "+function(r){return _.map(r,function(t){return t.name.replace(".name","")}).join(", ")}(this.aliciaKeys)}}},Ks={id:"ale-search",ref:"aleSearch"},zs=["value","placeholder"],Hs={key:1,class:"autocomplete"},Gs={class:"header-wrapper"},Us=["onClick"],Qs={class:"content"},Xs=["onClick"];function Ys(e,r,t,n,a,l){const s=Kr,o=Wr,c=Ls,d=ms,u=qr;return w(),S("div",null,[ce(s),e.$route.meta.subPage?(w(),tt(o,{key:0,aboveSearch:!0})):P("",!0),L("div",{id:"ale-search-wrap",ref:"searchWrap",class:R({"search-fixed":e.fixedSearch,"highlight-search":e.highlightSearch})},[Me(L("div",{id:"search-dropdown-overlay",onMousedown:r[0]||(r[0]=p=>e.readyToCloseOpts=!0),onTouchstart:r[1]||(r[1]=p=>e.readyToCloseOpts=!0),onTouchmove:r[2]||(r[2]=(...p)=>l.dontCloseOpts&&l.dontCloseOpts(...p)),onClick:r[3]||(r[3]=(...p)=>l.closeOpts&&l.closeOpts(...p))},null,544),[[Vr,e.listName]]),L("div",Ks,[L("div",{class:"search-wrapper",onClick:r[7]||(r[7]=p=>e.$refs.searchInput.focus())},[L("input",{type:"search",ref:"searchInput",value:e.$store.state.searchQuery,onInput:r[4]||(r[4]=(...p)=>l.search&&l.search(...p)),onKeyup:r[5]||(r[5]=Rt((...p)=>l.searchEnterBlur&&l.searchEnterBlur(...p),["enter"])),placeholder:l.placeholder,onFocus:r[6]||(r[6]=p=>e.listName=!1)},null,40,zs)]),ce(c,{"list-name":e.listName,"onUpdate:listName":r[8]||(r[8]=p=>e.listName=p)},null,8,["list-name"]),e.listName?(w(),tt(d,{key:0,"list-name":e.listName,"onUpdate:listName":r[9]||(r[9]=p=>e.listName=p)},null,8,["list-name"])):P("",!0)],512),e.$route.meta.gallery&&e.$store.state.windowWidth>=450?(w(),tt(u,{key:0})):P("",!0)],2),e.useAutocomplete&&e.autocompleteResults&&e.autocompleteResults.length?(w(),S("div",Hs,[L("div",Gs,[r[10]||(r[10]=L("div",{class:"title"},"Autocomplete: ",-1)),(w(!0),S(de,null,me(e.autocompleteResults,p=>(w(),S("div",{class:R(["header",{active:p.active}]),key:p.key+"-header",onClick:y=>l.active_ac_item(p)},[L("div",null,J(p.name),1)],10,Us))),128))]),e.item.active?(w(!0),S(de,{key:0},me(e.autocompleteResults,p=>(w(),S("div",{class:"content-wrapper",key:p.key},[L("div",Qs,[(w(!0),S(de,null,me(p.books,y=>(w(),S("div",{onClick:g=>l.searchAutocompleteResult(y)},[L("span",null,J(y.match.value),1)],8,Xs))),256))])]))),128)):P("",!0)])):P("",!0)])}const si=mt(Ws,[["render",Ys]]);export{ls as _,si as a};
