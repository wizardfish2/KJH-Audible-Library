import{_ as $}from"./gallery-lazy.D_imdb33.js";import{_ as w}from"./gallery-page-title.CSSwydTm.js";import{c as T}from"./gallery.D2do1gyG.js";import{m as H}from"./gallery-makeCoverUrl.zIZ8I3-C.js";import{_ as x,c as l,b as h,o as i,d as p,a,t as g,F as m,i as y,e as L,r as P,g as v,h as b,j as r,w as z}from"./lodash.DACQP5Pu.js";import"./content-script-helpers.DqBukurb.js";import"./jquery.TLgHKWof.js";import"./jszip.Ip5JjwIA.js";import"./index.D8jzMlQu.js";import"./howler.DKQBfetK.js";import"./tippy.CrdWBEYJ.js";const D={name:"aleCollections",mixins:[T,H],data:function(){return{collections:null,pageTitle:null,pageSubTitle:null}},computed:{filteredCollections(){const e=this;return _.filter(this.collections,function(o){return o.key==="audible"?!e.$store.state.sticky.collectionsHidePremade:!0})}},created:function(){this.pageTitle="Collections",this.pageSubTitle=null;const e=this;let t=[];_.each(this.$store.state.library.collections,function(o){let c={id:o.id,title:o.title,isSpecial:e.isSpecial(o)};c.books=_.filter(e.$store.state.library.books,function(k){return _.includes(o.books,k.asin)}),t.push(c)}),t=_.orderBy(t,[function(o){return e.isSpecial(o)},"title"],["desc","asc"]),this.collections=this.chunkify(t),this.$store.commit("prop",[{key:"pageCollection",value:[]},{key:"mutatingCollection",value:[]}])},methods:{getRandomBooks:function(e,t){return _.sampleSize(e,t)},isSpecial(e){return _.get(e,"id","").indexOf("__")===0},chunkify(e){const t=_.filter(e,{isSpecial:!0}).length;return[{key:"audible",items:e.splice(0,t)},{key:"user",items:e}]}}},N={key:0,id:"ale-collections",class:"box-layout-wrapper"},V={class:"hide-premade-btn-wrapper"},q={class:"sample-covers-square"},F=["src"],M=["innerHTML"];function R(e,t,o,c,k,f){const C=w,u=L("router-link"),S=$,B=P("tippy");return e.collections?(i(),l("div",N,[p(C),a("div",V,[a("div",{onClick:t[0]||(t[0]=n=>e.$store.commit("prop",{key:"sticky.collectionsHidePremade",value:!e.$store.state.sticky.collectionsHidePremade}))},g(e.$store.state.sticky.collectionsHidePremade?"show":"hide")+" premade collections ",1)]),(i(!0),l(m,null,y(f.filteredCollections,n=>(i(),l("div",{key:n.key,class:v([n.key+"-collection"])},[(i(!0),l(m,null,y(n.items,(s,U)=>(i(),b(S,{tag:s.isSpecial?"span":"div",class:v(["single-box",{"is-special":s.isSpecial}]),"data-collection-id":s.id,key:s.id},{default:r(()=>[a("div",q,[(i(!0),l(m,null,y(f.getRandomBooks(s.books,4),d=>(i(),l("div",{class:"sample-cover",key:d.asin},[p(u,{to:{name:"collection",params:{collection:s.id},query:{book:d.asin}}},{default:r(()=>[a("img",{crossorigin:"anonymous",src:e.makeCoverUrl(d.cover),alt:""},null,8,F)]),_:2},1032,["to"])]))),128))]),p(u,{class:"collection-title",to:{name:"collection",params:{collection:s.id}}},{default:r(()=>[a("h2",null,g(s.title),1)]),_:2},1032,["to"]),s.books&&s.books.length?(i(),b(u,{key:0,class:"books-total",to:{name:"collection",params:{collection:s.id}}},{default:r(()=>[z(a("div",{innerHTML:s.books.length,content:"Total number of books in this collection."},null,8,M),[[B,{placement:"right"}]])]),_:2},1032,["to"])):h("",!0)]),_:2},1032,["tag","data-collection-id","class"]))),128))],2))),128))])):h("",!0)}const Y=x(D,[["render",R],["__scopeId","data-v-19827482"]]);export{Y as default};
