import{f as B,_ as w}from"./gallery-findSubPageSource.b5dbe77b.js";import{_ as L}from"./gallery-page-title.2c997460.js";import{c as R}from"./gallery.0e89d352.js";import{m as $}from"./gallery-makeCoverUrl.8378190f.js";import{_ as q,c as a,e as p,d as u,b as S,F as b,j as h,i as H,r as M,o as t,a as k,k as y,s as T,t as f,h as C}from"./lodash.21348ef7.js";import"./content-script-helpers.e49fc91b.js";import"./jquery.050764e9.js";import"./howler.22814ddb.js";import"./index.abab9d81.js";import"./tippy.f48e1c74.js";const N={name:"aleCategories",mixins:[R,$,B],data:function(){return{categories:null,listReady:!1,pageTitle:"Categories",pageSubTitle:null}},methods:{getRandomBooks:function(s,n){let r=_.filter(s,function(c){return c.categories&&c.categories.length>1&&c.cover});return _.sampleSize(r,n)},makeCollection:function(){const s=this;let n={};n.parent=[],_.each(s.subPageSource.collection,function(r,c){if(r.categories){const m=_.get(r,"categories[0].name");let i=_.find(n.parent,["name",m]);i||(i=n.parent.push({name:m,slug:s.slugify(m),books:[]})),i=_.find(n.parent,["name",m]),i.books.push(r);const l=_.get(r,"categories[1].name");if(l){i.sub||(i.sub=[]);let g=_.find(i.sub,["name",l]);g||(g=i.sub.push({name:l,slug:s.slugify(l),books:[]})),g=_.find(i.sub,["name",l]),g.books.push(r)}}}),n.parent=_.orderBy(n.parent,"name","asc"),_.each(n.parent,function(r,c){r.sub=_.orderBy(r.sub,"name","asc")}),this.categories=n.parent,this.$store.commit("prop",{key:"pageCollection",value:[]}),this.$store.commit("prop",{key:"mutatingCollection",value:[]}),this.listReady=!0}}},V={key:0,id:"ale-categories",class:"box-layout-wrapper"},j=["data-category"],D={key:1},F=["innerHTML"],O=["innerHTML"],U={key:2,class:"child-categories"},x={key:1},z={key:2,class:"number-of-books"},E={class:"sample-covers"},I=["src"];function W(s,n,r,c,m,i){const l=L,g=w,d=H("router-link"),v=M("tippy");return s.listReady?(t(),a("div",V,[s.pageTitle||s.pageSubTitle?(t(),p(l,{key:0,pageTitle:s.pageTitle,pageSubTitle:s.pageSubTitle},null,8,["pageTitle","pageSubTitle"])):u("",!0),S(g),(t(!0),a(b,null,h(s.categories,(e,A)=>(t(),a("div",{class:"single-box","data-category":e.name,key:e.name},[k("h2",null,[e.slug?(t(),p(d,{key:0,to:{name:"category",params:{parent:e.slug,child:void 0},query:{subPageSource:s.subPageSource.name}}},{default:y(()=>[T(f(e.name),1)]),_:2},1032,["to"])):(t(),a("span",D,f(e.name),1))]),e.slug?(t(),p(d,{key:0,class:"books-total",to:{name:"category",params:{parent:e.slug,child:void 0},query:{subPageSource:s.subPageSource.name}}},{default:y(()=>[e.books?C((t(),a("div",{key:0,innerHTML:e.books.length,content:"Total number of books in this category."},null,8,F)),[[v,{placement:"right"}]]):u("",!0)]),_:2},1032,["to"])):e.books?C((t(),a("div",{key:1,innerHTML:e.books.length,content:"Total number of books in this category."},null,8,O)),[[v,{placement:"right"}]]):u("",!0),e.sub?(t(),a("div",U,[(t(!0),a(b,null,h(e.sub,(o,P)=>(t(),a("div",{key:o.name},[e&&e.slug&&o&&o.slug?(t(),p(d,{key:0,to:{name:"category",params:{parent:e.slug,child:o.slug},query:{subPageSource:s.subPageSource.name}}},{default:y(()=>[T(f(o.name),1)]),_:2},1032,["to"])):(t(),a("span",x)),o.books?(t(),a("span",z,"("+f(o.books.length)+")",1)):u("",!0)]))),128))])):u("",!0),k("div",E,[e&&e.books?(t(!0),a(b,{key:0},h(i.getRandomBooks(e.books,5),(o,P)=>(t(),a("div",{class:"sample-cover",key:o.asin},[S(d,{to:{name:"category",params:{parent:o.categories[0]?s.slugify(o.categories[0].name):null,child:o.categories[1]?s.slugify(o.categories[1].name):null},query:{book:o.asin,subPageSource:s.subPageSource.name}}},{default:y(()=>[k("img",{crossorigin:"anonymous",src:s.makeCoverUrl(o.cover),alt:""},null,8,I)]),_:2},1032,["to"])]))),128)):u("",!0)])],8,j))),128))])):u("",!0)}var oe=q(N,[["render",W],["__scopeId","data-v-0252bdde"]]);export{oe as default};
