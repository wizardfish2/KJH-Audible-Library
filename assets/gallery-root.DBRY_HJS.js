import{_ as ri}from"./gallery-lazy.D_imdb33.js";import{m as jt}from"./gallery-makeCoverUrl.zIZ8I3-C.js";import{_ as q,e as Oe,r as me,c,o as a,d as R,j as ie,h as O,l as yt,a as h,b,t as F,u as J,w as Q,A as si,p as ut,J as Di,Q as Zn,R as Jn,K as Kn,G as $i,b7 as eo,E as to,I as io,F as pe,i as ye,m as oe,n as ue,g as G,k as Qi,v as Zi,f as no,T as oo}from"./lodash.DACQP5Pu.js";import{m as Ce,_ as ro,a as so,s as Ji,p as ao,b as lo,c as Ge,d as uo,e as co}from"./gallery.D21Uiafa.js";import{b as Ot,s as Ki}from"./content-script-helpers.DqBukurb.js";import{_ as fo,a as ho}from"./gallery-search.D-CvpJGr.js";import{g as go}from"./jquery.TLgHKWof.js";import{f as mo}from"./gallery-findSubPageSource.Bbd9uvvg.js";import"./index.D8jzMlQu.js";import"./howler.DKQBfetK.js";import"./tippy.CrdWBEYJ.js";import"./jszip.Ip5JjwIA.js";import"./gallery-page-title.CSSwydTm.js";import"./fuse.esm.BiDyM4rQ.js";const po={name:"carousel-slide",props:["detailsBook","book","index","mobileWidth","inLibrary","inSeries","inSameSeries","inWishlist","storePageURL"],mixins:[jt],data:function(){return{}},computed:{tag(){return this.mobileWidth?"div":"a"}}},yo=["data-splide-lazy"],vo={style:{"font-weight":"normal","text-align":"left",padding:"10px","font-size":"13px","line-height":"17px"}},bo={key:0},ko={style:{"font-size":"1.2em","font-weight":"bold",margin:"0 0 3px 0"}},_o=["href"],So={key:1},wo={style:{"font-size":"1.1em","font-weight":"normal",margin:"0 0 3px 0"}},Mo={key:2},Lo={key:3},Io={key:4},To=["content"],Eo={key:0},Ao={key:0};function No(e,i,t,n,o,r){const s=Oe("router-link"),l=Oe("tippy"),u=me("tippy");return a(),c("div",null,[R(l,{tag:"div",ref:"tippy","data-book-index":t.index,"data-book-asin":t.book.asin,class:"carousel-cover-tippy"},{content:ie(()=>[h("div",vo,[t.book.title?(a(),c("div",bo,[h("h3",ko,[h("a",{href:t.storePageURL,target:"_blank",rel:"noopener noreferrer"},F(t.book.title),9,_o)])])):b("",!0),t.book.subHeading?(a(),c("div",So,[h("h2",wo,F(t.book.subHeading),1)])):b("",!0),t.book.authors?(a(),c("div",Mo,[i[0]||(i[0]=h("strong",null,"Authors: ",-1)),J(F(t.book.authors),1)])):b("",!0),t.book.narrators?(a(),c("div",Lo,[i[1]||(i[1]=h("strong",null,"Narrators: ",-1)),J(F(t.book.narrators),1)])):b("",!0),t.book.length?(a(),c("div",Io,[i[2]||(i[2]=h("strong",null,"Length: ",-1)),J(F(t.book.length),1)])):b("",!0),h("div",null,[t.inSameSeries?Q((a(),c("div",{key:0,class:"carousel-gallery-link not-link in-same-series",content:"This carousel book is in the same series as the one you have book details open on right now: <strong>"+t.detailsBook.title||t.detailsBook.titleShort+"</strong>"},i[3]||(i[3]=[J(" from this series ")]),8,To)),[[u,{maxWidth:300}]]):b("",!0),t.inLibrary&&t.book.asin?(a(),O(s,{key:1,style:{background:"#1065d9"},class:"carousel-gallery-link",to:{name:"library",query:{book:t.book.asin,refresh:!0}}},{default:ie(()=>i[4]||(i[4]=[J(" book in library ")])),_:1,__:[4]},8,["to"])):b("",!0),t.inSeries&&t.inSeries.asin?(a(),O(s,{key:2,style:{background:"#ae2753"},class:"carousel-gallery-link",to:{name:"series",params:{series:t.inSeries.asin},query:{subPageSource:"library",refresh:!0,scrolltop:!0}}},{default:ie(()=>[i[6]||(i[6]=J(" series in library ")),t.inSeries.ownedBooksLength?(a(),c("span",Eo,[J(" ("+F(t.inSeries.ownedBooksLength),1),t.inSeries.obj.allBooks?(a(),c("span",Ao,"/"+F(t.inSeries.obj.allBooks.length),1)):b("",!0),i[5]||(i[5]=J(") "))])):b("",!0)]),_:1,__:[6]},8,["to"])):b("",!0),t.inWishlist&&t.book.asin?(a(),O(s,{key:3,style:{background:"#dd7100"},class:"carousel-gallery-link",to:{name:"wishlist",query:{book:t.book.asin,refresh:!0}}},{default:ie(()=>i[7]||(i[7]=[J(" book in wishlist ")])),_:1,__:[7]},8,["to"])):b("",!0)])])]),default:ie(()=>[(a(),O(yt(r.tag),{class:"cover-wrapper",href:r.tag==="a"?t.storePageURL:null,target:"_blank",rel:"noopener noreferrer",ref:"coverLink"},{default:ie(()=>[h("img",{crossorigin:"anonymous",class:"cover","data-splide-lazy":e.makeCoverUrl(t.book.cover,150),alt:""},null,8,yo)]),_:1},8,["href"]))]),_:1},8,["data-book-index","data-book-asin"])])}const Do=q(po,[["render",No],["__scopeId","data-v-dbbbb0ac"]]);function $o(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Co(e,i,t){return i&&$o(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),e}/*!
 * Splide.js
 * Version  : 4.1.3
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var Ci="(prefers-reduced-motion: reduce)",Ze=1,xo=2,et=3,nt=4,vt=5,Tt=6,Dt=7,jo={CREATED:Ze,MOUNTED:xo,IDLE:et,MOVING:nt,SCROLLING:vt,DRAGGING:Tt,DESTROYED:Dt};function De(e){e.length=0}function Pe(e,i,t){return Array.prototype.slice.call(e,i,t)}function K(e){return e.bind.apply(e,[null].concat(Pe(arguments,1)))}var en=setTimeout,Kt=function(){};function xi(e){return requestAnimationFrame(e)}function zt(e,i){return typeof i===e}function ct(e){return!li(e)&&zt("object",e)}var ai=Array.isArray,tn=K(zt,"function"),ze=K(zt,"string"),bt=K(zt,"undefined");function li(e){return e===null}function nn(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function kt(e){return ai(e)?e:[e]}function ke(e,i){kt(e).forEach(i)}function ui(e,i){return e.indexOf(i)>-1}function Et(e,i){return e.push.apply(e,kt(i)),e}function Ee(e,i,t){e&&ke(i,function(n){n&&e.classList[t?"add":"remove"](n)})}function Me(e,i){Ee(e,ze(i)?i.split(" "):i,!0)}function _t(e,i){ke(i,e.appendChild.bind(e))}function ci(e,i){ke(e,function(t){var n=(i||t).parentNode;n&&n.insertBefore(t,i)})}function dt(e,i){return nn(e)&&(e.msMatchesSelector||e.matches).call(e,i)}function on(e,i){var t=e?Pe(e.children):[];return i?t.filter(function(n){return dt(n,i)}):t}function St(e,i){return i?on(e,i)[0]:e.firstElementChild}var ft=Object.keys;function He(e,i,t){return e&&(t?ft(e).reverse():ft(e)).forEach(function(n){n!=="__proto__"&&i(e[n],n)}),e}function ht(e){return Pe(arguments,1).forEach(function(i){He(i,function(t,n){e[n]=i[n]})}),e}function je(e){return Pe(arguments,1).forEach(function(i){He(i,function(t,n){ai(t)?e[n]=t.slice():ct(t)?e[n]=je({},ct(e[n])?e[n]:{},t):e[n]=t})}),e}function ji(e,i){ke(i||ft(e),function(t){delete e[t]})}function Le(e,i){ke(e,function(t){ke(i,function(n){t&&t.removeAttribute(n)})})}function Y(e,i,t){ct(i)?He(i,function(n,o){Y(e,o,n)}):ke(e,function(n){li(t)||t===""?Le(n,i):n.setAttribute(i,String(t))})}function Je(e,i,t){var n=document.createElement(e);return i&&(ze(i)?Me(n,i):Y(n,i)),t&&_t(t,n),n}function _e(e,i,t){if(bt(t))return getComputedStyle(e)[i];li(t)||(e.style[i]=""+t)}function gt(e,i){_e(e,"display",i)}function rn(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function Se(e,i){return e.getAttribute(i)}function Oi(e,i){return e&&e.classList.contains(i)}function ve(e){return e.getBoundingClientRect()}function Ye(e){ke(e,function(i){i&&i.parentNode&&i.parentNode.removeChild(i)})}function sn(e){return St(new DOMParser().parseFromString(e,"text/html").body)}function Te(e,i){e.preventDefault(),i&&(e.stopPropagation(),e.stopImmediatePropagation())}function an(e,i){return e&&e.querySelector(i)}function di(e,i){return i?Pe(e.querySelectorAll(i)):[]}function Ae(e,i){Ee(e,i,!1)}function ei(e){return e.timeStamp}function Ue(e){return ze(e)?e:e?e+"px":""}var wt="splide",fi="data-"+wt;function at(e,i){if(!e)throw new Error("["+wt+"] "+(i||""))}var Re=Math.min,$t=Math.max,Ct=Math.floor,mt=Math.ceil,ge=Math.abs;function ln(e,i,t){return ge(e-i)<t}function At(e,i,t,n){var o=Re(i,t),r=$t(i,t);return n?o<e&&e<r:o<=e&&e<=r}function Xe(e,i,t){var n=Re(i,t),o=$t(i,t);return Re($t(n,e),o)}function ti(e){return+(e>0)-+(e<0)}function ii(e,i){return ke(i,function(t){e=e.replace("%s",""+t)}),e}function hi(e){return e<10?"0"+e:""+e}var zi={};function Oo(e){return""+e+hi(zi[e]=(zi[e]||0)+1)}function un(){var e=[];function i(s,l,u,f){o(s,l,function(d,g,v){var k="addEventListener"in d,m=k?d.removeEventListener.bind(d,g,u,f):d.removeListener.bind(d,u);k?d.addEventListener(g,u,f):d.addListener(u),e.push([d,g,v,u,m])})}function t(s,l,u){o(s,l,function(f,d,g){e=e.filter(function(v){return v[0]===f&&v[1]===d&&v[2]===g&&(!u||v[3]===u)?(v[4](),!1):!0})})}function n(s,l,u){var f,d=!0;return typeof CustomEvent=="function"?f=new CustomEvent(l,{bubbles:d,detail:u}):(f=document.createEvent("CustomEvent"),f.initCustomEvent(l,d,!1,u)),s.dispatchEvent(f),f}function o(s,l,u){ke(s,function(f){f&&ke(l,function(d){d.split(" ").forEach(function(g){var v=g.split(".");u(f,v[0],v[1])})})})}function r(){e.forEach(function(s){s[4]()}),De(e)}return{bind:i,unbind:t,dispatch:n,destroy:r}}var Be="mounted",Ri="ready",$e="move",ot="moved",gi="click",cn="active",dn="inactive",fn="visible",hn="hidden",ae="refresh",fe="updated",tt="resize",Rt="resized",gn="drag",mn="dragging",pn="dragged",Pt="scroll",qe="scrolled",zo="overflow",mi="destroy",yn="arrows:mounted",vn="arrows:updated",bn="pagination:mounted",kn="pagination:updated",pi="navigation:mounted",yi="autoplay:play",_n="autoplay:playing",vi="autoplay:pause",bi="lazyload:loaded",Sn="sk",wn="sh",xt="ei";function ne(e){var i=e?e.event.bus:document.createDocumentFragment(),t=un();function n(r,s){t.bind(i,kt(r).join(" "),function(l){s.apply(s,ai(l.detail)?l.detail:[])})}function o(r){t.dispatch(i,r,Pe(arguments,1))}return e&&e.event.on(mi,t.destroy),ht(t,{bus:i,on:n,off:K(t.unbind,i),emit:o})}function Bt(e,i,t,n){var o=Date.now,r,s=0,l,u=!0,f=0;function d(){if(!u){if(s=e?Re((o()-r)/e,1):1,t&&t(s),s>=1&&(i(),r=o(),n&&++f>=n))return v();l=xi(d)}}function g(L){L||m(),r=o()-(L?s*e:0),u=!1,l=xi(d)}function v(){u=!0}function k(){r=o(),s=0,t&&t(s)}function m(){l&&cancelAnimationFrame(l),s=0,l=0,u=!0}function p(L){e=L}function S(){return u}return{start:g,rewind:k,pause:v,cancel:m,set:p,isPaused:S}}function Ro(e){var i=e;function t(o){i=o}function n(o){return ui(kt(o),i)}return{set:t,is:n}}function Po(e,i){var t=Bt(0,e,null,1);return function(){t.isPaused()&&t.start()}}function Bo(e,i,t){var n=e.state,o=t.breakpoints||{},r=t.reducedMotion||{},s=un(),l=[];function u(){var m=t.mediaQuery==="min";ft(o).sort(function(p,S){return m?+p-+S:+S-+p}).forEach(function(p){d(o[p],"("+(m?"min":"max")+"-width:"+p+"px)")}),d(r,Ci),g()}function f(m){m&&s.destroy()}function d(m,p){var S=matchMedia(p);s.bind(S,"change",g),l.push([m,S])}function g(){var m=n.is(Dt),p=t.direction,S=l.reduce(function(L,M){return je(L,M[1].matches?M[0]:{})},{});ji(t),k(S),t.destroy?e.destroy(t.destroy==="completely"):m?(f(!0),e.mount()):p!==t.direction&&e.refresh()}function v(m){matchMedia(Ci).matches&&(m?je(t,r):ji(t,ft(r)))}function k(m,p,S){je(t,m),p&&je(Object.getPrototypeOf(t),m),(S||!n.is(Ze))&&e.emit(fe,t)}return{setup:u,destroy:f,reduce:v,set:k}}var Wt="Arrow",Ft=Wt+"Left",Ut=Wt+"Right",Mn=Wt+"Up",Ln=Wt+"Down",Pi="rtl",Ht="ttb",Xt={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Mn,Ut],ArrowRight:[Ln,Ft]};function Wo(e,i,t){function n(r,s,l){l=l||t.direction;var u=l===Pi&&!s?1:l===Ht?0:-1;return Xt[r]&&Xt[r][u]||r.replace(/width|left|right/i,function(f,d){var g=Xt[f.toLowerCase()][u]||f;return d>0?g.charAt(0).toUpperCase()+g.slice(1):g})}function o(r){return r*(t.direction===Pi?1:-1)}return{resolve:n,orient:o}}var Ne="role",Ke="tabindex",Fo="disabled",we="aria-",Mt=we+"controls",In=we+"current",Bi=we+"selected",be=we+"label",ki=we+"labelledby",Tn=we+"hidden",_i=we+"orientation",pt=we+"roledescription",Wi=we+"live",Fi=we+"busy",Ui=we+"atomic",Si=[Ne,Ke,Fo,Mt,In,be,ki,Tn,_i,pt],Ie=wt+"__",We="is-",Qt=wt,Hi=Ie+"track",Uo=Ie+"list",Yt=Ie+"slide",En=Yt+"--clone",Ho=Yt+"__container",wi=Ie+"arrows",Vt=Ie+"arrow",An=Vt+"--prev",Nn=Vt+"--next",Gt=Ie+"pagination",Dn=Gt+"__page",Yo=Ie+"progress",Vo=Yo+"__bar",Go=Ie+"toggle",qo=Ie+"spinner",Xo=Ie+"sr",Qo=We+"initialized",Ve=We+"active",$n=We+"prev",Cn=We+"next",ni=We+"visible",oi=We+"loading",xn=We+"focus-in",jn=We+"overflow",Zo=[Ve,ni,$n,Cn,oi,xn,jn],Jo={slide:Yt,clone:En,arrows:wi,arrow:Vt,prev:An,next:Nn,pagination:Gt,page:Dn,spinner:qo};function Ko(e,i){if(tn(e.closest))return e.closest(i);for(var t=e;t&&t.nodeType===1&&!dt(t,i);)t=t.parentElement;return t}var er=5,Yi=200,On="touchstart mousedown",Zt="touchmove mousemove",Jt="touchend touchcancel mouseup click";function tr(e,i,t){var n=ne(e),o=n.on,r=n.bind,s=e.root,l=t.i18n,u={},f=[],d=[],g=[],v,k,m;function p(){w(),y(),M()}function S(){o(ae,L),o(ae,p),o(fe,M),r(document,On+" keydown",function(I){m=I.type==="keydown"},{capture:!0}),r(s,"focusin",function(){Ee(s,xn,!!m)})}function L(I){var C=Si.concat("style");De(f),Ae(s,d),Ae(v,g),Le([v,k],C),Le(s,I?C:["style",pt])}function M(){Ae(s,d),Ae(v,g),d=D(Qt),g=D(Hi),Me(s,d),Me(v,g),Y(s,be,t.label),Y(s,ki,t.labelledby)}function w(){v=T("."+Hi),k=St(v,"."+Uo),at(v&&k,"A track/list element is missing."),Et(f,on(k,"."+Yt+":not(."+En+")")),He({arrows:wi,pagination:Gt,prev:An,next:Nn,bar:Vo,toggle:Go},function(I,C){u[C]=T("."+I)}),ht(u,{root:s,track:v,list:k,slides:f})}function y(){var I=s.id||Oo(wt),C=t.role;s.id=I,v.id=v.id||I+"-track",k.id=k.id||I+"-list",!Se(s,Ne)&&s.tagName!=="SECTION"&&C&&Y(s,Ne,C),Y(s,pt,l.carousel),Y(k,Ne,"presentation")}function T(I){var C=an(s,I);return C&&Ko(C,"."+Qt)===s?C:void 0}function D(I){return[I+"--"+t.type,I+"--"+t.direction,t.drag&&I+"--draggable",t.isNavigation&&I+"--nav",I===Qt&&Ve]}return ht(u,{setup:p,mount:S,destroy:L})}var it="slide",rt="loop",Lt="fade";function ir(e,i,t,n){var o=ne(e),r=o.on,s=o.emit,l=o.bind,u=e.Components,f=e.root,d=e.options,g=d.isNavigation,v=d.updateOnMove,k=d.i18n,m=d.pagination,p=d.slideFocus,S=u.Direction.resolve,L=Se(n,"style"),M=Se(n,be),w=t>-1,y=St(n,"."+Ho),T;function D(){w||(n.id=f.id+"-slide"+hi(i+1),Y(n,Ne,m?"tabpanel":"group"),Y(n,pt,k.slide),Y(n,be,M||ii(k.slideLabel,[i+1,e.length]))),I()}function I(){l(n,"click",K(s,gi,U)),l(n,"keydown",K(s,Sn,U)),r([ot,wn,qe],N),r(pi,W),v&&r($e,P)}function C(){T=!0,o.destroy(),Ae(n,Zo),Le(n,Si),Y(n,"style",L),Y(n,be,M||"")}function W(){var B=e.splides.map(function(A){var z=A.splide.Components.Slides.getAt(i);return z?z.slide.id:""}).join(" ");Y(n,be,ii(k.slideX,(w?t:i)+1)),Y(n,Mt,B),Y(n,Ne,p?"button":""),p&&Le(n,pt)}function P(){T||N()}function N(){if(!T){var B=e.index;$(),x(),Ee(n,$n,i===B-1),Ee(n,Cn,i===B+1)}}function $(){var B=V();B!==Oi(n,Ve)&&(Ee(n,Ve,B),Y(n,In,g&&B||""),s(B?cn:dn,U))}function x(){var B=re(),A=!B&&(!V()||w);if(e.state.is([nt,vt])||Y(n,Tn,A||""),Y(di(n,d.focusableNodes||""),Ke,A?-1:""),p&&Y(n,Ke,A?-1:0),B!==Oi(n,ni)&&(Ee(n,ni,B),s(B?fn:hn,U)),!B&&document.activeElement===n){var z=u.Slides.getAt(e.index);z&&rn(z.slide)}}function H(B,A,z){_e(z&&y||n,B,A)}function V(){var B=e.index;return B===i||d.cloneStatus&&B===t}function re(){if(e.is(Lt))return V();var B=ve(u.Elements.track),A=ve(n),z=S("left",!0),X=S("right",!0);return Ct(B[z])<=mt(A[z])&&Ct(A[X])<=mt(B[X])}function te(B,A){var z=ge(B-i);return!w&&(d.rewind||e.is(rt))&&(z=Re(z,e.length-z)),z<=A}var U={index:i,slideIndex:t,slide:n,container:y,isClone:w,mount:D,destroy:C,update:N,style:H,isWithin:te};return U}function nr(e,i,t){var n=ne(e),o=n.on,r=n.emit,s=n.bind,l=i.Elements,u=l.slides,f=l.list,d=[];function g(){v(),o(ae,k),o(ae,v)}function v(){u.forEach(function(N,$){p(N,$,-1)})}function k(){T(function(N){N.destroy()}),De(d)}function m(){T(function(N){N.update()})}function p(N,$,x){var H=ir(e,$,x,N);H.mount(),d.push(H),d.sort(function(V,re){return V.index-re.index})}function S(N){return N?D(function($){return!$.isClone}):d}function L(N){var $=i.Controller,x=$.toIndex(N),H=$.hasFocus()?1:t.perPage;return D(function(V){return At(V.index,x,x+H-1)})}function M(N){return D(N)[0]}function w(N,$){ke(N,function(x){if(ze(x)&&(x=sn(x)),nn(x)){var H=u[$];H?ci(x,H):_t(f,x),Me(x,t.classes.slide),C(x,K(r,tt))}}),r(ae)}function y(N){Ye(D(N).map(function($){return $.slide})),r(ae)}function T(N,$){S($).forEach(N)}function D(N){return d.filter(tn(N)?N:function($){return ze(N)?dt($.slide,N):ui(kt(N),$.index)})}function I(N,$,x){T(function(H){H.style(N,$,x)})}function C(N,$){var x=di(N,"img"),H=x.length;H?x.forEach(function(V){s(V,"load error",function(){--H||$()})}):$()}function W(N){return N?u.length:d.length}function P(){return d.length>t.perPage}return{mount:g,destroy:k,update:m,register:p,get:S,getIn:L,getAt:M,add:w,remove:y,forEach:T,filter:D,style:I,getLength:W,isEnough:P}}function or(e,i,t){var n=ne(e),o=n.on,r=n.bind,s=n.emit,l=i.Slides,u=i.Direction.resolve,f=i.Elements,d=f.root,g=f.track,v=f.list,k=l.getAt,m=l.style,p,S,L;function M(){w(),r(window,"resize load",Po(K(s,tt))),o([fe,ae],w),o(tt,y)}function w(){p=t.direction===Ht,_e(d,"maxWidth",Ue(t.width)),_e(g,u("paddingLeft"),T(!1)),_e(g,u("paddingRight"),T(!0)),y(!0)}function y(U){var B=ve(d);(U||S.width!==B.width||S.height!==B.height)&&(_e(g,"height",D()),m(u("marginRight"),Ue(t.gap)),m("width",C()),m("height",W(),!0),S=B,s(Rt),L!==(L=te())&&(Ee(d,jn,L),s(zo,L)))}function T(U){var B=t.padding,A=u(U?"right":"left");return B&&Ue(B[A]||(ct(B)?0:B))||"0px"}function D(){var U="";return p&&(U=I(),at(U,"height or heightRatio is missing."),U="calc("+U+" - "+T(!1)+" - "+T(!0)+")"),U}function I(){return Ue(t.height||ve(v).width*t.heightRatio)}function C(){return t.autoWidth?null:Ue(t.fixedWidth)||(p?"":P())}function W(){return Ue(t.fixedHeight)||(p?t.autoHeight?null:P():I())}function P(){var U=Ue(t.gap);return"calc((100%"+(U&&" + "+U)+")/"+(t.perPage||1)+(U&&" - "+U)+")"}function N(){return ve(v)[u("width")]}function $(U,B){var A=k(U||0);return A?ve(A.slide)[u("width")]+(B?0:V()):0}function x(U,B){var A=k(U);if(A){var z=ve(A.slide)[u("right")],X=ve(v)[u("left")];return ge(z-X)+(B?0:V())}return 0}function H(U){return x(e.length-1)-x(0)+$(0,U)}function V(){var U=k(0);return U&&parseFloat(_e(U.slide,u("marginRight")))||0}function re(U){return parseFloat(_e(g,u("padding"+(U?"Right":"Left"))))||0}function te(){return e.is(Lt)||H(!0)>N()}return{mount:M,resize:y,listSize:N,slideSize:$,sliderSize:H,totalSize:x,getPadding:re,isOverflow:te}}var rr=2;function sr(e,i,t){var n=ne(e),o=n.on,r=i.Elements,s=i.Slides,l=i.Direction.resolve,u=[],f;function d(){o(ae,g),o([fe,tt],k),(f=S())&&(m(f),i.Layout.resize(!0))}function g(){v(),d()}function v(){Ye(u),De(u),n.destroy()}function k(){var L=S();f!==L&&(f<L||!L)&&n.emit(ae)}function m(L){var M=s.get().slice(),w=M.length;if(w){for(;M.length<L;)Et(M,M);Et(M.slice(-L),M.slice(0,L)).forEach(function(y,T){var D=T<L,I=p(y.slide,T);D?ci(I,M[0].slide):_t(r.list,I),Et(u,I),s.register(I,T-L+(D?0:w),y.index)})}}function p(L,M){var w=L.cloneNode(!0);return Me(w,t.classes.clone),w.id=e.root.id+"-clone"+hi(M+1),w}function S(){var L=t.clones;if(!e.is(rt))L=0;else if(bt(L)){var M=t[l("fixedWidth")]&&i.Layout.slideSize(0),w=M&&mt(ve(r.track)[l("width")]/M);L=w||t[l("autoWidth")]&&e.length||t.perPage*rr}return L}return{mount:d,destroy:v}}function ar(e,i,t){var n=ne(e),o=n.on,r=n.emit,s=e.state.set,l=i.Layout,u=l.slideSize,f=l.getPadding,d=l.totalSize,g=l.listSize,v=l.sliderSize,k=i.Direction,m=k.resolve,p=k.orient,S=i.Elements,L=S.list,M=S.track,w;function y(){w=i.Transition,o([Be,Rt,fe,ae],T)}function T(){i.Controller.isBusy()||(i.Scroll.cancel(),I(e.index),i.Slides.update())}function D(A,z,X,ce){A!==z&&U(A>X)&&(N(),C(P(H(),A>X),!0)),s(nt),r($e,z,X,A),w.start(z,function(){s(et),r(ot,z,X,A),ce&&ce()})}function I(A){C(x(A,!0))}function C(A,z){if(!e.is(Lt)){var X=z?A:W(A);_e(L,"transform","translate"+m("X")+"("+X+"px)"),A!==X&&r(wn)}}function W(A){if(e.is(rt)){var z=$(A),X=z>i.Controller.getEnd(),ce=z<0;(ce||X)&&(A=P(A,X))}return A}function P(A,z){var X=A-te(z),ce=v();return A-=p(ce*(mt(ge(X)/ce)||1))*(z?1:-1),A}function N(){C(H(),!0),w.cancel()}function $(A){for(var z=i.Slides.get(),X=0,ce=1/0,le=0;le<z.length;le++){var xe=z[le].index,E=ge(x(xe,!0)-A);if(E<=ce)ce=E,X=xe;else break}return X}function x(A,z){var X=p(d(A-1)-re(A));return z?V(X):X}function H(){var A=m("left");return ve(L)[A]-ve(M)[A]+p(f(!1))}function V(A){return t.trimSpace&&e.is(it)&&(A=Xe(A,0,p(v(!0)-g()))),A}function re(A){var z=t.focus;return z==="center"?(g()-u(A,!0))/2:+z*u(A)||0}function te(A){return x(A?i.Controller.getEnd():0,!!t.trimSpace)}function U(A){var z=p(P(H(),A));return A?z>=0:z<=L[m("scrollWidth")]-ve(M)[m("width")]}function B(A,z){z=bt(z)?H():z;var X=A!==!0&&p(z)<p(te(!1)),ce=A!==!1&&p(z)>p(te(!0));return X||ce}return{mount:y,move:D,jump:I,translate:C,shift:P,cancel:N,toIndex:$,toPosition:x,getPosition:H,getLimit:te,exceededLimit:B,reposition:T}}function lr(e,i,t){var n=ne(e),o=n.on,r=n.emit,s=i.Move,l=s.getPosition,u=s.getLimit,f=s.toPosition,d=i.Slides,g=d.isEnough,v=d.getLength,k=t.omitEnd,m=e.is(rt),p=e.is(it),S=K(H,!1),L=K(H,!0),M=t.start||0,w,y=M,T,D,I;function C(){W(),o([fe,ae,xt],W),o(Rt,P)}function W(){T=v(!0),D=t.perMove,I=t.perPage,w=U();var E=Xe(M,0,k?w:T-1);E!==M&&(M=E,s.reposition())}function P(){w!==U()&&r(xt)}function N(E,Z,he){if(!xe()){var se=x(E),de=te(se);de>-1&&(Z||de!==M)&&(X(de),s.move(se,de,y,he))}}function $(E,Z,he,se){i.Scroll.scroll(E,Z,he,function(){var de=te(s.toIndex(l()));X(k?Re(de,w):de),se&&se()})}function x(E){var Z=M;if(ze(E)){var he=E.match(/([+\-<>])(\d+)?/)||[],se=he[1],de=he[2];se==="+"||se==="-"?Z=V(M+ +(""+se+(+de||1)),M):se===">"?Z=de?B(+de):S(!0):se==="<"&&(Z=L(!0))}else Z=m?E:Xe(E,0,w);return Z}function H(E,Z){var he=D||(le()?1:I),se=V(M+he*(E?-1:1),M,!(D||le()));return se===-1&&p&&!ln(l(),u(!E),1)?E?0:w:Z?se:te(se)}function V(E,Z,he){if(g()||le()){var se=re(E);se!==E&&(Z=E,E=se,he=!1),E<0||E>w?!D&&(At(0,E,Z,!0)||At(w,Z,E,!0))?E=B(A(E)):m?E=he?E<0?-(T%I||I):T:E:t.rewind?E=E<0?w:0:E=-1:he&&E!==Z&&(E=B(A(Z)+(E<Z?-1:1)))}else E=-1;return E}function re(E){if(p&&t.trimSpace==="move"&&E!==M)for(var Z=l();Z===f(E,!0)&&At(E,0,e.length-1,!t.rewind);)E<M?--E:++E;return E}function te(E){return m?(E+T)%T||0:E}function U(){for(var E=T-(le()||m&&D?1:I);k&&E-- >0;)if(f(T-1,!0)!==f(E,!0)){E++;break}return Xe(E,0,T-1)}function B(E){return Xe(le()?E:I*E,0,w)}function A(E){return le()?Re(E,w):Ct((E>=w?T-1:E)/I)}function z(E){var Z=s.toIndex(E);return p?Xe(Z,0,w):Z}function X(E){E!==M&&(y=M,M=E)}function ce(E){return E?y:M}function le(){return!bt(t.focus)||t.isNavigation}function xe(){return e.state.is([nt,vt])&&!!t.waitForTransition}return{mount:C,go:N,scroll:$,getNext:S,getPrev:L,getAdjacent:H,getEnd:U,setIndex:X,getIndex:ce,toIndex:B,toPage:A,toDest:z,hasFocus:le,isBusy:xe}}var ur="http://www.w3.org/2000/svg",cr="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",It=40;function dr(e,i,t){var n=ne(e),o=n.on,r=n.bind,s=n.emit,l=t.classes,u=t.i18n,f=i.Elements,d=i.Controller,g=f.arrows,v=f.track,k=g,m=f.prev,p=f.next,S,L,M={};function w(){T(),o(fe,y)}function y(){D(),w()}function T(){var $=t.arrows;$&&!(m&&p)&&W(),m&&p&&(ht(M,{prev:m,next:p}),gt(k,$?"":"none"),Me(k,L=wi+"--"+t.direction),$&&(I(),N(),Y([m,p],Mt,v.id),s(yn,m,p)))}function D(){n.destroy(),Ae(k,L),S?(Ye(g?[m,p]:k),m=p=null):Le([m,p],Si)}function I(){o([Be,ot,ae,qe,xt],N),r(p,"click",K(C,">")),r(m,"click",K(C,"<"))}function C($){d.go($,!0)}function W(){k=g||Je("div",l.arrows),m=P(!0),p=P(!1),S=!0,_t(k,[m,p]),!g&&ci(k,v)}function P($){var x='<button class="'+l.arrow+" "+($?l.prev:l.next)+'" type="button"><svg xmlns="'+ur+'" viewBox="0 0 '+It+" "+It+'" width="'+It+'" height="'+It+'" focusable="false"><path d="'+(t.arrowPath||cr)+'" />';return sn(x)}function N(){if(m&&p){var $=e.index,x=d.getPrev(),H=d.getNext(),V=x>-1&&$<x?u.last:u.prev,re=H>-1&&$>H?u.first:u.next;m.disabled=x<0,p.disabled=H<0,Y(m,be,V),Y(p,be,re),s(vn,m,p,x,H)}}return{arrows:M,mount:w,destroy:D,update:N}}var fr=fi+"-interval";function hr(e,i,t){var n=ne(e),o=n.on,r=n.bind,s=n.emit,l=Bt(t.interval,e.go.bind(e,">"),I),u=l.isPaused,f=i.Elements,d=i.Elements,g=d.root,v=d.toggle,k=t.autoplay,m,p,S=k==="pause";function L(){k&&(M(),v&&Y(v,Mt,f.track.id),S||w(),D())}function M(){t.pauseOnHover&&r(g,"mouseenter mouseleave",function(W){m=W.type==="mouseenter",T()}),t.pauseOnFocus&&r(g,"focusin focusout",function(W){p=W.type==="focusin",T()}),v&&r(v,"click",function(){S?w():y(!0)}),o([$e,Pt,ae],l.rewind),o($e,C)}function w(){u()&&i.Slides.isEnough()&&(l.start(!t.resetProgress),p=m=S=!1,D(),s(yi))}function y(W){W===void 0&&(W=!0),S=!!W,D(),u()||(l.pause(),s(vi))}function T(){S||(m||p?y(!1):w())}function D(){v&&(Ee(v,Ve,!S),Y(v,be,t.i18n[S?"play":"pause"]))}function I(W){var P=f.bar;P&&_e(P,"width",W*100+"%"),s(_n,W)}function C(W){var P=i.Slides.getAt(W);l.set(P&&+Se(P.slide,fr)||t.interval)}return{mount:L,destroy:l.cancel,play:w,pause:y,isPaused:u}}function gr(e,i,t){var n=ne(e),o=n.on;function r(){t.cover&&(o(bi,K(l,!0)),o([Be,fe,ae],K(s,!0)))}function s(u){i.Slides.forEach(function(f){var d=St(f.container||f.slide,"img");d&&d.src&&l(u,d,f)})}function l(u,f,d){d.style("background",u?'center/cover no-repeat url("'+f.src+'")':"",!0),gt(f,u?"none":"")}return{mount:r,destroy:K(s,!1)}}var mr=10,pr=600,yr=.6,vr=1.5,br=800;function kr(e,i,t){var n=ne(e),o=n.on,r=n.emit,s=e.state.set,l=i.Move,u=l.getPosition,f=l.getLimit,d=l.exceededLimit,g=l.translate,v=e.is(it),k,m,p=1;function S(){o($e,y),o([fe,ae],T)}function L(I,C,W,P,N){var $=u();if(y(),W&&(!v||!d())){var x=i.Layout.sliderSize(),H=ti(I)*x*Ct(ge(I)/x)||0;I=l.toPosition(i.Controller.toDest(I%x))+H}var V=ln($,I,1);p=1,C=V?0:C||$t(ge(I-$)/vr,br),m=P,k=Bt(C,M,K(w,$,I,N),1),s(vt),r(Pt),k.start()}function M(){s(et),m&&m(),r(qe)}function w(I,C,W,P){var N=u(),$=I+(C-I)*D(P),x=($-N)*p;g(N+x),v&&!W&&d()&&(p*=yr,ge(x)<mr&&L(f(d(!0)),pr,!1,m,!0))}function y(){k&&k.cancel()}function T(){k&&!k.isPaused()&&(y(),M())}function D(I){var C=t.easingFunc;return C?C(I):1-Math.pow(1-I,4)}return{mount:S,destroy:y,scroll:L,cancel:T}}var Qe={passive:!1,capture:!0};function _r(e,i,t){var n=ne(e),o=n.on,r=n.emit,s=n.bind,l=n.unbind,u=e.state,f=i.Move,d=i.Scroll,g=i.Controller,v=i.Elements.track,k=i.Media.reduce,m=i.Direction,p=m.resolve,S=m.orient,L=f.getPosition,M=f.exceededLimit,w,y,T,D,I,C=!1,W,P,N;function $(){s(v,Zt,Kt,Qe),s(v,Jt,Kt,Qe),s(v,On,H,Qe),s(v,"click",te,{capture:!0}),s(v,"dragstart",Te),o([Be,fe],x)}function x(){var j=t.drag;Ni(!j),D=j==="free"}function H(j){if(W=!1,!P){var ee=de(j);se(j.target)&&(ee||!j.button)&&(g.isBusy()?Te(j,!0):(N=ee?v:window,I=u.is([nt,vt]),T=null,s(N,Zt,V,Qe),s(N,Jt,re,Qe),f.cancel(),d.cancel(),U(j)))}}function V(j){if(u.is(Tt)||(u.set(Tt),r(gn)),j.cancelable)if(I){f.translate(w+he(le(j)));var ee=xe(j)>Yi,Fe=C!==(C=M());(ee||Fe)&&U(j),W=!0,r(mn),Te(j)}else z(j)&&(I=A(j),Te(j))}function re(j){u.is(Tt)&&(u.set(et),r(pn)),I&&(B(j),Te(j)),l(N,Zt,V),l(N,Jt,re),I=!1}function te(j){!P&&W&&Te(j,!0)}function U(j){T=y,y=j,w=L()}function B(j){var ee=X(j),Fe=ce(ee),st=t.rewind&&t.rewindByDrag;k(!1),D?g.scroll(Fe,0,t.snap):e.is(Lt)?g.go(S(ti(ee))<0?st?"<":"-":st?">":"+"):e.is(it)&&C&&st?g.go(M(!0)?">":"<"):g.go(g.toDest(Fe),!0),k(!0)}function A(j){var ee=t.dragMinThreshold,Fe=ct(ee),st=Fe&&ee.mouse||0,Qn=(Fe?ee.touch:+ee)||10;return ge(le(j))>(de(j)?Qn:st)}function z(j){return ge(le(j))>ge(le(j,!0))}function X(j){if(e.is(rt)||!C){var ee=xe(j);if(ee&&ee<Yi)return le(j)/ee}return 0}function ce(j){return L()+ti(j)*Re(ge(j)*(t.flickPower||600),D?1/0:i.Layout.listSize()*(t.flickMaxPages||1))}function le(j,ee){return Z(j,ee)-Z(E(j),ee)}function xe(j){return ei(j)-ei(E(j))}function E(j){return y===j&&T||y}function Z(j,ee){return(de(j)?j.changedTouches[0]:j)["page"+p(ee?"Y":"X")]}function he(j){return j/(C&&e.is(it)?er:1)}function se(j){var ee=t.noDrag;return!dt(j,"."+Dn+", ."+Vt)&&(!ee||!dt(j,ee))}function de(j){return typeof TouchEvent<"u"&&j instanceof TouchEvent}function Xn(){return I}function Ni(j){P=j}return{mount:$,disable:Ni,isDragging:Xn}}var Sr={Spacebar:" ",Right:Ut,Left:Ft,Up:Mn,Down:Ln};function Mi(e){return e=ze(e)?e:e.key,Sr[e]||e}var Vi="keydown";function wr(e,i,t){var n=ne(e),o=n.on,r=n.bind,s=n.unbind,l=e.root,u=i.Direction.resolve,f,d;function g(){v(),o(fe,k),o(fe,v),o($e,p)}function v(){var L=t.keyboard;L&&(f=L==="global"?window:l,r(f,Vi,S))}function k(){s(f,Vi)}function m(L){d=L}function p(){var L=d;d=!0,en(function(){d=L})}function S(L){if(!d){var M=Mi(L);M===u(Ft)?e.go("<"):M===u(Ut)&&e.go(">")}}return{mount:g,destroy:k,disable:m}}var lt=fi+"-lazy",Nt=lt+"-srcset",Mr="["+lt+"], ["+Nt+"]";function Lr(e,i,t){var n=ne(e),o=n.on,r=n.off,s=n.bind,l=n.emit,u=t.lazyLoad==="sequential",f=[ot,qe],d=[];function g(){t.lazyLoad&&(v(),o(ae,v))}function v(){De(d),k(),u?L():(r(f),o(f,m),m())}function k(){i.Slides.forEach(function(M){di(M.slide,Mr).forEach(function(w){var y=Se(w,lt),T=Se(w,Nt);if(y!==w.src||T!==w.srcset){var D=t.classes.spinner,I=w.parentElement,C=St(I,"."+D)||Je("span",D,I);d.push([w,M,C]),w.src||gt(w,"none")}})})}function m(){d=d.filter(function(M){var w=t.perPage*((t.preloadPages||1)+1)-1;return M[1].isWithin(e.index,w)?p(M):!0}),d.length||r(f)}function p(M){var w=M[0];Me(M[1].slide,oi),s(w,"load error",K(S,M)),Y(w,"src",Se(w,lt)),Y(w,"srcset",Se(w,Nt)),Le(w,lt),Le(w,Nt)}function S(M,w){var y=M[0],T=M[1];Ae(T.slide,oi),w.type!=="error"&&(Ye(M[2]),gt(y,""),l(bi,y,T),l(tt)),u&&L()}function L(){d.length&&p(d.shift())}return{mount:g,destroy:K(De,d),check:m}}function Ir(e,i,t){var n=ne(e),o=n.on,r=n.emit,s=n.bind,l=i.Slides,u=i.Elements,f=i.Controller,d=f.hasFocus,g=f.getIndex,v=f.go,k=i.Direction.resolve,m=u.pagination,p=[],S,L;function M(){w(),o([fe,ae,xt],M);var P=t.pagination;m&&gt(m,P?"":"none"),P&&(o([$e,Pt,qe],W),y(),W(),r(bn,{list:S,items:p},C(e.index)))}function w(){S&&(Ye(m?Pe(S.children):S),Ae(S,L),De(p),S=null),n.destroy()}function y(){var P=e.length,N=t.classes,$=t.i18n,x=t.perPage,H=d()?f.getEnd()+1:mt(P/x);S=m||Je("ul",N.pagination,u.track.parentElement),Me(S,L=Gt+"--"+I()),Y(S,Ne,"tablist"),Y(S,be,$.select),Y(S,_i,I()===Ht?"vertical":"");for(var V=0;V<H;V++){var re=Je("li",null,S),te=Je("button",{class:N.page,type:"button"},re),U=l.getIn(V).map(function(A){return A.slide.id}),B=!d()&&x>1?$.pageX:$.slideX;s(te,"click",K(T,V)),t.paginationKeyboard&&s(te,"keydown",K(D,V)),Y(re,Ne,"presentation"),Y(te,Ne,"tab"),Y(te,Mt,U.join(" ")),Y(te,be,ii(B,V+1)),Y(te,Ke,-1),p.push({li:re,button:te,page:V})}}function T(P){v(">"+P,!0)}function D(P,N){var $=p.length,x=Mi(N),H=I(),V=-1;x===k(Ut,!1,H)?V=++P%$:x===k(Ft,!1,H)?V=(--P+$)%$:x==="Home"?V=0:x==="End"&&(V=$-1);var re=p[V];re&&(rn(re.button),v(">"+V),Te(N,!0))}function I(){return t.paginationDirection||t.direction}function C(P){return p[f.toPage(P)]}function W(){var P=C(g(!0)),N=C(g());if(P){var $=P.button;Ae($,Ve),Le($,Bi),Y($,Ke,-1)}if(N){var x=N.button;Me(x,Ve),Y(x,Bi,!0),Y(x,Ke,"")}r(kn,{list:S,items:p},P,N)}return{items:p,mount:M,destroy:w,getAt:C,update:W}}var Tr=[" ","Enter"];function Er(e,i,t){var n=t.isNavigation,o=t.slideFocus,r=[];function s(){e.splides.forEach(function(m){m.isParent||(f(e,m.splide),f(m.splide,e))}),n&&d()}function l(){r.forEach(function(m){m.destroy()}),De(r)}function u(){l(),s()}function f(m,p){var S=ne(m);S.on($e,function(L,M,w){p.go(p.is(rt)?w:L)}),r.push(S)}function d(){var m=ne(e),p=m.on;p(gi,v),p(Sn,k),p([Be,fe],g),r.push(m),m.emit(pi,e.splides)}function g(){Y(i.Elements.list,_i,t.direction===Ht?"vertical":"")}function v(m){e.go(m.index)}function k(m,p){ui(Tr,Mi(p))&&(v(m),Te(p))}return{setup:K(i.Media.set,{slideFocus:bt(o)?n:o},!0),mount:s,destroy:l,remount:u}}function Ar(e,i,t){var n=ne(e),o=n.bind,r=0;function s(){t.wheel&&o(i.Elements.track,"wheel",l,Qe)}function l(f){if(f.cancelable){var d=f.deltaY,g=d<0,v=ei(f),k=t.wheelMinThreshold||0,m=t.wheelSleep||0;ge(d)>k&&v-r>m&&(e.go(g?"<":">"),r=v),u(g)&&Te(f)}}function u(f){return!t.releaseWheel||e.state.is(nt)||i.Controller.getAdjacent(f)!==-1}return{mount:s}}var Nr=90;function Dr(e,i,t){var n=ne(e),o=n.on,r=i.Elements.track,s=t.live&&!t.isNavigation,l=Je("span",Xo),u=Bt(Nr,K(d,!1));function f(){s&&(v(!i.Autoplay.isPaused()),Y(r,Ui,!0),l.textContent="â€¦",o(yi,K(v,!0)),o(vi,K(v,!1)),o([ot,qe],K(d,!0)))}function d(k){Y(r,Fi,k),k?(_t(r,l),u.start()):(Ye(l),u.cancel())}function g(){Le(r,[Wi,Ui,Fi]),Ye(l)}function v(k){s&&Y(r,Wi,k?"off":"polite")}return{mount:f,disable:v,destroy:g}}var $r=Object.freeze({__proto__:null,Media:Bo,Direction:Wo,Elements:tr,Slides:nr,Layout:or,Clones:sr,Move:ar,Controller:lr,Arrows:dr,Autoplay:hr,Cover:gr,Scroll:kr,Drag:_r,Keyboard:wr,LazyLoad:Lr,Pagination:Ir,Sync:Er,Wheel:Ar,Live:Dr}),Cr={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},xr={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:Jo,i18n:Cr,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function jr(e,i,t){var n=i.Slides;function o(){ne(e).on([Be,ae],r)}function r(){n.forEach(function(l){l.style("transform","translateX(-"+100*l.index+"%)")})}function s(l,u){n.style("transition","opacity "+t.speed+"ms "+t.easing),en(u)}return{mount:o,start:s,cancel:Kt}}function Or(e,i,t){var n=i.Move,o=i.Controller,r=i.Scroll,s=i.Elements.list,l=K(_e,s,"transition"),u;function f(){ne(e).bind(s,"transitionend",function(k){k.target===s&&u&&(g(),u())})}function d(k,m){var p=n.toPosition(k,!0),S=n.getPosition(),L=v(k);ge(p-S)>=1&&L>=1?t.useScroll?r.scroll(p,L,!1,m):(l("transform "+L+"ms "+t.easing),n.translate(p,!0),u=m):(n.jump(k),m())}function g(){l(""),r.cancel()}function v(k){var m=t.rewindSpeed;if(e.is(it)&&m){var p=o.getIndex(!0),S=o.getEnd();if(p===0&&k>=S||p>=S&&k===0)return m}return t.speed}return{mount:f,start:d,cancel:g}}var zr=function(){function e(t,n){this.event=ne(),this.Components={},this.state=Ro(Ze),this.splides=[],this._o={},this._E={};var o=ze(t)?an(document,t):t;at(o,o+" is invalid."),this.root=o,n=je({label:Se(o,be)||"",labelledby:Se(o,ki)||""},xr,e.defaults,n||{});try{je(n,JSON.parse(Se(o,fi)))}catch{at(!1,"Invalid JSON")}this._o=Object.create(je({},n))}var i=e.prototype;return i.mount=function(n,o){var r=this,s=this.state,l=this.Components;at(s.is([Ze,Dt]),"Already mounted!"),s.set(Ze),this._C=l,this._T=o||this._T||(this.is(Lt)?jr:Or),this._E=n||this._E;var u=ht({},$r,this._E,{Transition:this._T});return He(u,function(f,d){var g=f(r,l,r._o);l[d]=g,g.setup&&g.setup()}),He(l,function(f){f.mount&&f.mount()}),this.emit(Be),Me(this.root,Qo),s.set(et),this.emit(Ri),this},i.sync=function(n){return this.splides.push({splide:n}),n.splides.push({splide:this,isParent:!0}),this.state.is(et)&&(this._C.Sync.remount(),n.Components.Sync.remount()),this},i.go=function(n){return this._C.Controller.go(n),this},i.on=function(n,o){return this.event.on(n,o),this},i.off=function(n){return this.event.off(n),this},i.emit=function(n){var o;return(o=this.event).emit.apply(o,[n].concat(Pe(arguments,1))),this},i.add=function(n,o){return this._C.Slides.add(n,o),this},i.remove=function(n){return this._C.Slides.remove(n),this},i.is=function(n){return this._o.type===n},i.refresh=function(){return this.emit(ae),this},i.destroy=function(n){n===void 0&&(n=!0);var o=this.event,r=this.state;return r.is(Ze)?ne(this).on(Ri,this.destroy.bind(this,n)):(He(this._C,function(s){s.destroy&&s.destroy(n)},!0),o.emit(mi),o.destroy(),n&&De(this.splides),r.set(Dt)),this},Co(e,[{key:"options",get:function(){return this._o},set:function(n){this._C.Media.set(n,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),e}(),Li=zr;Li.defaults={};Li.STATES=jo;const Gi=[cn,yn,vn,vi,yi,_n,gi,mi,gn,pn,mn,hn,dn,bi,Be,$e,ot,pi,bn,kn,ae,tt,Rt,Pt,qe,fe,fn],zn="splide";function qi(e){return e!==null&&typeof e=="object"}function Rr(e,i){if(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const o=t[n];if(o!=="__proto__"&&i(e[o],o)===!1)break}}return e}function Rn(e,i){const t=e;return Rr(i,(n,o)=>{Array.isArray(n)?t[o]=n.slice():qi(n)?t[o]=Rn(qi(t[o])?t[o]:{},n):t[o]=n}),t}const Pr=si({name:"SplideTrack",setup(){eo(()=>{var e;const i=to(zn);(e=i?.value)==null||e.refresh()})}}),Ii=(e,i)=>{const t=e.__vccOpts||e;for(const[n,o]of i)t[n]=o;return t},Br={class:"splide__track"},Wr={class:"splide__list"};function Fr(e,i,t,n,o,r){return a(),c("div",Br,[h("ul",Wr,[ut(e.$slots,"default")])])}const Ur=Ii(Pr,[["render",Fr]]),Hr=si({name:"Splide",emits:Gi.map(e=>`splide:${e}`),components:{SplideTrack:Ur},props:{tag:{default:"div",type:String},options:{default:{},type:Object},extensions:Object,transition:Function,hasTrack:{default:!0,type:Boolean}},setup(e,i){const t=Di(),n=Di();Zn(()=>{n.value&&(t.value=new Li(n.value,e.options),u(t.value),t.value.mount(e.extensions,e.transition))}),Jn(()=>{var f;(f=t.value)==null||f.destroy()}),Kn(()=>Rn({},e.options),f=>{t.value&&(t.value.options=f)},{deep:!0}),io(zn,t);const o=$i(()=>{var f;return((f=t.value)==null?void 0:f.index)||0}),r=$i(()=>{var f;return((f=t.value)==null?void 0:f.length)||0});function s(f){var d;(d=t.value)==null||d.go(f)}function l(f){var d;(d=t.value)==null||d.sync(f)}function u(f){Gi.forEach(d=>{f.on(d,(...g)=>{i.emit(`splide:${d}`,f,...g)})})}return{splide:t,root:n,index:o,length:r,go:s,sync:l}}});function Yr(e,i,t,n,o,r){const s=Oe("SplideTrack");return a(),O(yt(e.tag),{class:"splide",ref:"root"},{default:ie(()=>[e.hasTrack?(a(),O(s,{key:0},{default:ie(()=>[ut(e.$slots,"default")]),_:3})):ut(e.$slots,"default",{key:1})]),_:3},512)}const Vr=Ii(Hr,[["render",Yr]]),Gr=si({name:"SplideSlide"}),qr={class:"splide__slide"};function Xr(e,i,t,n,o,r){return a(),c("li",qr,[ut(e.$slots,"default")])}const Qr=Ii(Gr,[["render",Xr]]),Zr={name:"carousel",props:["detailsBook","books","width","mobileWidth"],components:{Splide:Vr,SplideSlide:Qr},mixins:[Ce],data:function(){return{options:{type:"loop",rewind:!0,width:null,trimSpace:!1,gap:"4px",lazyLoad:"nearby",preloadPages:1,perPage:5},coverSize:127,scrolling:!1,scrollContainer:null,inLibrary:null,inSeries:{asin:null,obj:null,ownedBooksLength:null},inSameSeries:null,inWishlist:null,storePageURL:null,scrollContainer:null,tippy:null,prevIndex:null,book:null}},mounted:function(){const e=window.innerWidth,i=e<="716";this.options.width=i?e:this.$el.offsetWidth;const t=i?e-42*2:this.$el.offsetWidth-42*2;e<="500"&&(this.coverSize=102),e<="415"&&(this.coverSize=72),this.options.perPage=Math.floor(t/this.coverSize),this.scrollContainer=document.querySelector(".list-view-inner-wrap")||window,this.scrollContainer.addEventListener("scroll",this.windowScrollStarted,{passive:!0})},beforeUnmount:function(){this.scrollContainer.removeEventListener("scroll",this.windowScrollStarted,{passive:!0})},methods:{appendTo(){return document.querySelector("#ale-bookdetails")},windowScrollStarted(){this.$route.query.carousel&&this.$updateQueries({carousel:null})},tippyMount(e){},onShow(e,i){const t=i.target.getAttribute("data-book-index");this.prevIndex!==t&&(this.prevIndex=t,this.repositionTooltip(e),this.additionalData=null,this.inLibrary=null,this.inSeries.asin=null,this.inSeries.obj=null,this.inSeries.ownedBooksLength=null,this.inSameSeries=null,this.inWishlist=null,this.book=this.books[t],this.findBookFromLibrary(),this.findBookFromSeries(),this.findSameSeries(),this.findInWishlist(),this.storePageURL=this.makeUrl("book",this.book.asin),this.$updateQueries({carousel:!0}),this.repositionTooltip(e))},onHide(e,i){e.clearDelayTimeouts()},scrollHide(){const e=this.tippy;e&&e.state.isVisible&&(e.hide(),e.reference.blur())},repositionTooltip(e){this.$nextTick(()=>{try{e.popperInstance.update()}catch{}})},findBookFromLibrary(){const e=this.$store.state.library.books;_.find(e,{asin:this.book.asin})&&(this.inLibrary=!0)},findBookFromSeries(){const e=this.book.asin,i=this.$store.state.library.series,t=_.find(i,function(n){const o=_.get(n,"allBooks");if(o)return _.find(o,{asin:e})});if(t){this.inSeries.asin=t.asin,this.inSeries.obj=t;const n=_.get(t,"allBooks");n&&(this.inSeries.ownedBooksLength=_.filter(n,function(o){return!o.notInLibrary}).length)}},findSameSeries(){if(this.inSeries.obj){const e=_.get(this.inSeries,"obj.allBooks"),i=_.find(e,{asin:this.detailsBook.asin});this.inSameSeries=!!i}},findInWishlist(){const e=this.book.asin,i=this.$store.state.library.wishlist;this.inWishlist=_.find(i,{asin:e})}}},Jr=["data-scrolling"],Kr={class:"ale-heading"};function es(e,i,t,n,o,r){const s=Do,l=Oe("splide-slide"),u=Oe("splide"),f=Oe("tippy-singleton"),d=ri;return a(),c("div",{class:"ale-carousel","data-scrolling":e.scrolling},[h("h3",Kr,[ut(e.$slots,"default")]),R(d,{offset:-60,delay:10,class:"lazyboy"},{default:ie(()=>[R(f,{"move-transition":"transform 0.2s ease-out",placement:"top",appendTo:r.appendTo,interactive:!0,interactiveDebounce:75,interactiveBorder:30,allowHTML:!0,delay:1e3,onTrigger:r.onShow,onUntrigger:r.onHide},{default:ie(()=>[R(u,{options:e.options,ref:"splide"},{default:ie(()=>[(a(!0),c(pe,null,ye(t.books,(g,v)=>(a(),O(l,{class:"ale-carousel-item",key:v},{default:ie(()=>[R(s,{detailsBook:t.detailsBook,book:g,index:v,mobileWidth:t.mobileWidth,inLibrary:e.inLibrary,inSeries:e.inSeries,inSameSeries:e.inSameSeries,inWishlist:e.inWishlist,storePageURL:e.storePageURL},null,8,["detailsBook","book","index","mobileWidth","inLibrary","inSeries","inSameSeries","inWishlist","storePageURL"])]),_:2},1024))),128))]),_:1},8,["options"])]),_:1},8,["appendTo","onTrigger","onUntrigger"])]),_:1})],8,Jr)}const ts=q(Zr,[["render",es]]),is={viewBox:"0 0 448 512",width:"1.06em",height:"1.2em"};function ns(e,i){return a(),c("svg",is,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0"},null,-1)]))}const Pn=oe({name:"fa-solid-chevron-down",render:ns}),os={viewBox:"0 0 448 512",width:"1.06em",height:"1.2em"};function rs(e,i){return a(),c("svg",os,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"m240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495L69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001"},null,-1)]))}const ss=oe({name:"fa-solid-chevron-up",render:rs}),as={props:["up"]},ls={class:"chevron-icon"};function us(e,i,t,n,o,r){const s=ss,l=Pn;return a(),c("div",ls,[t.up?(a(),O(s,{key:0})):(a(),O(l,{key:1}))])}const qt=q(as,[["render",us],["__scopeId","data-v-1386621c"]]),cs={name:"starRating",props:["size","rating","stars","ratings","ratingsText","prioritizeRatingsText","number","numberOf","block","image","placeholderImage","placeholderOpacity","noPlaceholder"],data:function(){return{opt:null,config:{rating:null,length:null}}},created:function(){this.opt={rating:5,stars:5,size:15,number:!1,numberOf:!1,block:!1,image:!1,placeholderImage:!1,placeholderOpacity:!1,noPlaceholder:!1};const e=this.splitDecimals(this.rating);this.config.rating=this.toPercentage(e);const i=this.noPlaceholder||this.opt.noPlacehoder;this.config.length=i?this.config.rating.whole+(this.config.rating.fraction?1:0):parseInt(this.stars||this.opt.stars,10)},methods:{splitDecimals:function(e){const i=""+e;let t;return i.indexOf(".")>-1?t=i.split("."):i.indexOf(",")>-1&&(t=i.split(",")),t?{whole:t[0],fraction:"."+t[1]}:{whole:e,fraction:null}},toPercentage:function(e){let i={whole:parseInt(e.whole,10)};return e.fraction&&(i.originalFraction=e.fraction),e.fraction&&(i.fraction=Math.floor(parseFloat(e.fraction,10)*100)),i}}},ds=["data-rating"],fs={key:0,class:"rating-count"},hs=["innerHTML"],gs={key:0},ms=["data-star","data-whole","data-fraction"],ps=["innerHTML"],ys={key:2,class:"rating-count"},vs=["innerHTML"],bs={key:0};function ks(e,i,t,n,o,r){return e.config.rating?(a(),c("div",{key:0,class:G(["sRatings-wrapper",{"sRatings-block":t.block||e.opt.block,"prioritize-ratings-text":t.prioritizeRatingsText}]),"data-rating":t.rating||0},[t.ratings&&t.prioritizeRatingsText?(a(),c("div",fs,[h("span",{innerHTML:t.ratings},null,8,hs),t.ratingsText!==!1?(a(),c("span",gs," ratings")):b("",!0)])):b("",!0),(a(!0),c(pe,null,ye(e.config.length,(s,l)=>(a(),c("div",{key:l,"data-star":s,"data-whole":e.config.rating.whole===s,"data-fraction":e.config.rating.fraction&&e.config.rating.whole===s-1,style:ue({width:e.config.rating.whole===s-1&&(t.noPlaceholder||e.opt.noPlaceholder)&&e.config.rating.fraction?(t.size||e.opt.size)*e.config.rating.originalFraction+"px":(t.size||e.opt.size)+"px",height:(t.size||e.opt.size)+"px"})},[e.config.rating.whole<=s&&!(t.noPlaceholder||e.opt.noPlaceholder)?(a(),c("div",{key:0,class:G(["sRatings-placeholder",{"sRatings-show":e.config.rating.whole<s}]),style:ue({left:e.config.rating.fraction&&e.config.rating.whole===s-1?e.config.rating.fraction+"%":"0%","background-size":(t.size||e.opt.size)+"px","background-image":t.image||t.placeholderImage||e.opt.placeholderImage?"url("+(t.image&&!t.placeholderImage?t.image:t.placeholderImage||e.opt.placeholderImage)+")":!1,opacity:t.placeholderOpacity||e.opt.placeholderOpacity})},null,6)):b("",!0),e.config.rating.whole>=s||e.config.rating.fraction&&e.config.rating.whole===s-1?(a(),c("div",{key:1,class:"sRatings-star",style:ue({width:e.config.rating.whole>=s||e.config.rating.whole===s-1&&(t.noPlaceholder||e.opt.noPlaceholder)?"100%":e.config.rating.fraction+"%","background-size":(t.size||e.opt.size)+"px","background-image":t.image||e.opt.image?"url("+(t.image||e.opt.image)+")":!1})},null,4)):b("",!0)],12,ms))),128)),t.number||e.opt.number?(a(),c("div",{key:1,class:"text-label",style:ue({width:t.numberOf||e.opt.numberOf?"auto":!1,padding:t.numberOf||e.opt.numberOf?"0 6px":!1}),innerHTML:t.numberOf||e.opt.numberOf?t.rating+"/"+(t.stars||e.opt.stars):t.rating},null,12,ps)):b("",!0),t.ratings&&!t.prioritizeRatingsText?(a(),c("div",ys,[i[0]||(i[0]=J("(")),h("span",{innerHTML:t.ratings},null,8,vs),t.ratingsText!==!1?(a(),c("span",bs," ratings")):b("",!0),i[1]||(i[1]=J(")"))])):b("",!0)],10,ds)):b("",!0)}const Ti=q(cs,[["render",ks],["__scopeId","data-v-e117bf15"]]),_s={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function Ss(e,i){return a(),c("svg",_s,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"m14.878.282l.348 1.071a2.2 2.2 0 0 0 1.399 1.397l1.071.348l.021.006a.423.423 0 0 1 0 .798l-1.071.348a2.2 2.2 0 0 0-1.399 1.397l-.348 1.07a.423.423 0 0 1-.798 0l-.349-1.07a2.2 2.2 0 0 0-.532-.867a2.2 2.2 0 0 0-.866-.536l-1.071-.348a.423.423 0 0 1 0-.798l1.071-.348a2.2 2.2 0 0 0 1.377-1.397l.348-1.07a.423.423 0 0 1 .799 0m4.905 7.931l-.766-.248a1.58 1.58 0 0 1-.998-.999l-.25-.764a.302.302 0 0 0-.57 0l-.248.764a1.58 1.58 0 0 1-.984.999l-.765.248a.303.303 0 0 0 0 .57l.765.249a1.58 1.58 0 0 1 1 1.002l.248.764a.302.302 0 0 0 .57 0l.249-.764a1.58 1.58 0 0 1 .999-.999l.765-.248a.303.303 0 0 0 0-.57zM11.43 2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-5.692a.5.5 0 0 0-.125-.181a.6.6 0 0 0-.22-.14L15 9.77V16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h4.088a1.42 1.42 0 0 1 .863-.846zm1.424 4.147A.5.5 0 0 0 12.5 6h-5l-.09.008A.5.5 0 0 0 7.5 7h5l.09-.008a.5.5 0 0 0 .264-.845m-.264 4.345a.5.5 0 0 0-.09-.992h-5l-.09.008a.5.5 0 0 0 .09.992h5zm0 3.5A.5.5 0 0 0 12.5 13h-5l-.09.008A.5.5 0 0 0 7.5 14h5z"},null,-1)]))}const ws=oe({name:"fluent-document-one-page-sparkle20-regular",render:Ss}),Ms={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Ls(e,i){return a(),c("svg",Ms,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M256 80C141.1 80 48 173.1 48 288v104c0 13.3-10.7 24-24 24S0 405.3 0 392V288C0 146.6 114.6 32 256 32s256 114.6 256 256v104c0 13.3-10.7 24-24 24s-24-10.7-24-24V288c0-114.9-93.1-208-208-208M80 352c0-35.3 28.7-64 64-64h16c17.7 0 32 14.3 32 32v128c0 17.7-14.3 32-32 32h-16c-35.3 0-64-28.7-64-64zm288-64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64h-16c-17.7 0-32-14.3-32-32V320c0-17.7 14.3-32 32-32z"},null,-1)]))}const Bn=oe({name:"fa6-solid-headphones-simple",render:Ls}),Is={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Ts(e,i){return a(),c("svg",Is,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M256 512a256 256 0 1 0 0-512a256 256 0 1 0 0 512m-24-168v-64h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24h64v-64c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64v64c0 13.3-10.7 24-24 24s-24-10.7-24-24"},null,-1)]))}const Es=oe({name:"fa6-solid-circle-plus",render:Ts}),As={viewBox:"0 0 576 512",width:"1.36em",height:"1.2em"};function Ns(e,i){return a(),c("svg",As,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M253.3 35.1c6.1-11.8 1.5-26.3-10.2-32.4s-26.3-1.5-32.4 10.2L117.6 192H32c-17.7 0-32 14.3-32 32s14.3 32 32 32l51.9 207.5C91 492 116.6 512 146 512h284c29.4 0 55-20 62.1-48.5L544 256c17.7 0 32-14.3 32-32s-14.3-32-32-32h-85.6L365.3 12.9c-6.1-11.7-20.6-16.3-32.4-10.2s-16.3 20.6-10.2 32.4L404.3 192H171.7zM192 304v96c0 8.8-7.2 16-16 16s-16-7.2-16-16v-96c0-8.8 7.2-16 16-16s16 7.2 16 16m96-16c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16s-16-7.2-16-16v-96c0-8.8 7.2-16 16-16m128 16v96c0 8.8-7.2 16-16 16s-16-7.2-16-16v-96c0-8.8 7.2-16 16-16s16 7.2 16 16"},null,-1)]))}const Ds=oe({name:"fa6-solid-basket-shopping",render:Ns}),$s={name:"bookTags",props:["book"],mixins:[Ce],data:function(){return{}},computed:{routerOrLink(){return this.$store.state.sticky.detailLinksToAudible?{tag:"a",attr:"href"}:{tag:"router-link",attr:"to"}}}},Cs={class:"book-tags"};function xs(e,i,t,n,o,r){return a(),c("div",Cs,[(a(!0),c(pe,null,ye(t.book.tags,s=>(a(),O(yt(r.routerOrLink.tag),Qi({[r.routerOrLink.attr||""]:e.makeUrl("tags",s,e.$store.state.sticky.detailLinksToAudible?null:t.book.tags),target:e.$store.state.sticky.detailLinksToAudible?"_blank":null,rel:"noopener noreferrer",class:"book-tag",key:s.name}),{default:ie(()=>[J(F(s.name),1)]),_:2},1040,["target"]))),128))])}const js=q($s,[["render",xs],["__scopeId","data-v-cd5bd9c7"]]),Os={name:"arrayToHTML",data:function(){return{inputDataExists:null}},props:["label","array","delim","noLabel","chevron"],mixins:[Ce],created:function(){this.inputDataExists=this.checkIfArrayHasData()},computed:{identifierClass:function(){return"details-"+_.kebabCase(this.label)}},methods:{checkIfArrayHasData:function(){return this.array&&!_.isEmpty(this.array)},stringifyBookNumbers(e){return _.isArray(e)?_.join(e,","):e},routerOrLink(e){return!this.$store.state.sticky.detailLinksToAudible&&!(e==="store"||e==="book")?{tag:"router-link",attr:"to"}:{tag:"a",attr:"href"}}}},zs={key:0,class:"strong-label"},Rs={key:0},Ps={key:0,class:"chevron"},Bs={key:1},Ws={key:0,class:"book-number"};function Fs(e,i,t,n,o,r){const s=ro;return e.inputDataExists?(a(),c("div",{key:0,class:G(["array-list-wrapper",r.identifierClass])},[t.noLabel?b("",!0):(a(),c("strong",zs,F(t.label)+":",1)),(a(!0),c(pe,null,ye(t.array,(l,u)=>(a(),c("span",{clas:"array-item",key:l.name+"("+u+")"},[u!==0?(a(),c("span",Rs,[t.chevron?(a(),c("span",Ps,[R(s)])):(a(),c("span",Bs,F(t.delim||", "),1))])):b("",!0),h("span",null,[(a(),O(yt(r.routerOrLink(t.label.toLowerCase()).tag),Qi({[r.routerOrLink(t.label.toLowerCase()).attr||""]:e.makeUrl(t.label.toLowerCase(),l,e.$store.state.sticky.detailLinksToAudible?null:t.array),target:e.$store.state.sticky.detailLinksToAudible?"_blank":null,rel:"noopener noreferrer"}),{default:ie(()=>[J(F(l.name),1),l.bookNumbers?(a(),c("span",Ws," (book "+F(r.stringifyBookNumbers(l.bookNumbers))+")",1)):b("",!0)]),_:2},1040,["target"]))])]))),128))],2)):b("",!0)}const Wn=q(Os,[["render",Fs],["__scopeId","data-v-fcdd9df5"]]),Us={name:"bookDetailsTitle",props:["book","tempAsin"],mixins:[Ce],computed:{showSubtitle(){const e=this.$store.state.sticky.bookDetailSettings.titleShort,i=!!this.book.subtitle,t=!!this.book.title&&!!this.book.titleShort&&this.book.title!==this.book.titleShort;return e&&(i||t)},audibleURL(){if(this.tempAsin){const e=_.get(this.book,"series.0");return this.makeUrl("series",e)}else return this.makeUrl("book",this.book.asin)}}},Hs={class:"book-title"},Ys=["href"],Vs=["innerHTML"],Gs=["innerHTML"],qs=["innerHTML"];function Xs(e,i,t,n,o,r){return a(),c("div",null,[h("h2",Hs,[h("a",{href:r.audibleURL,target:"_blank",rel:"noopener noreferrer"},[e.$store.state.sticky.bookDetailSettings.titleShort?(a(),c("span",{key:1,innerHTML:t.book.titleShort||t.book.title},null,8,Gs)):(a(),c("span",{key:0,innerHTML:t.book.title||t.book.titleShort},null,8,Vs))],8,Ys)]),r.showSubtitle?(a(),c("div",{key:0,class:"subblementary-book-title",innerHTML:t.book.subtitle||t.book.title},null,8,qs)):b("",!0)])}const Fn=q(Us,[["render",Xs]]),Qs={name:"bookSummary",props:["book","bookSummary","mobileWidth"],mixins:[Ce],data:function(){return{summary:{readmore:{toggle:!1,exists:!1},maxHeight:null,maxHeightTemp:null,fullHeight:null},showReview:!1}},watch:{summaryHTML(e){e&&this.getSummaryMaxHeight()}},computed:{summaryHTML:function(){return this.book.summary||this.bookSummary||this.book.blurb},showReadMore:function(){const e=this.summary;if(e.maxHeightTemp)return e.fullHeight>e.maxHeightTemp},review(){return _.find(this.$store.state.library.userReviews,{asin:this.book.asin})},reviewSummary(){return"<h2>"+_.get(this.review,"title")+"</h2>"+_.get(this.review,"summary")},reviewRatings(){return _.get(this.review,"ratings",[])}},mounted:function(){this.getSummaryMaxHeight()},created:function(){this.$compEmitter.on("afterWindowResize",this.windowResized),this.$compEmitter.on("resizeSummary",this.getSummaryMaxHeight)},beforeUnmount:function(){this.$compEmitter.off("afterWindowResize",this.windowResized),this.$compEmitter.off("resizeSummary",this.getSummaryMaxHeight)},methods:{getSummaryMaxHeight(){this.summaryHTML&&this.$nextTick(function(){const i=_.get(this.$refs,"summaryMetaTop.offsetHeight",0)+300,t=_.get(this.$refs,"summary.offsetHeight",0);this.summary.fullHeight=t;const n=document.querySelector("#ale-bookdetails .information"),o=_.get(n,"offsetHeight",0);let r=o;(this.mobileWidth||t>i&&i>o)&&(r=i),this.summary.maxHeight=r,this.summary.maxHeightTemp=r})},windowResized(){this.getSummaryMaxHeight()},summaryReadMoreclick:function(){if(this.summary.readmore.toggle=!this.summary.readmore.toggle,this.summary.maxHeight=this.summary.readmore.toggle?"none":this.summary.maxHeightTemp,!this.summary.readmore.toggle){const e=this.$refs.readMoreBtn.getBoundingClientRect().top;this.$nextTick(function(){scroll({top:this.$refs.readMoreBtn.getBoundingClientRect().top+window.pageYOffset-e})})}},clickedShowReview(){this.getSummaryMaxHeight(),this.$nextTick(()=>{this.showReview=!this.showReview})}}},Zs={class:"book-summary",ref:"summary"},Js={class:"summary-meta-top",ref:"summaryMetaTop"},Ks={key:0,class:"categories"},ea={class:"inline-children smoll-text"},ta={class:"info-tags"},ia={key:0,class:"info-tag store-page-changed",content:"There is a store page for the book, but it's for a different version of the book. <br><br>This is the reason why some data is unavailable."},na={key:1,class:"info-tag store-page-missing",content:"Store page was possibly removed or it became unavailable in your region since it was added. In some cases there may still be a store page for a different version of the book. <br><br>This is the reason why some data is unavailable."},oa=["content"],ra=["content"],sa={key:1,class:"release-date",content:"YYYY-MM-DD"},aa={key:1,class:"my-review-wrapper"},la={key:0,class:"review-ratings"},ua={class:"review-rating"},ca=["innerHTML"];function da(e,i,t,n,o,r){const s=Fn,l=Wn,u=js,f=Ds,d=Es,g=Bn,v=ws,k=Ti,m=qt,p=me("tippy");return a(),c("div",{class:G(["book-summary-wrapper",{expanded:e.summary.readmore.toggle}]),ref:"summaryWrapper",style:ue({maxHeight:e.summary.maxHeight?e.summary.maxHeight+"px":null,paddingBottom:e.summary.readmore.toggle?"50px":"0px"})},[h("div",Zs,[h("div",Js,[R(s,{book:t.book},null,8,["book"]),t.book.categories?(a(),c("div",Ks,[t.book.categories?(a(),O(l,{key:0,label:"categories",noLabel:!0,array:t.book.categories,chevron:!0},null,8,["array"])):b("",!0)])):b("",!0),h("div",ea,[t.book.tags?(a(),O(u,{key:0,book:t.book},null,8,["book"])):b("",!0),h("div",ta,[t.book.storePageChanged?Q((a(),c("div",ia,[R(f),i[2]||(i[2]=J(" changed "))])),[[p,{maxWidth:300}]]):t.book.storePageMissing?Q((a(),c("div",na,[R(f),i[3]||(i[3]=J(" missing "))])),[[p,{maxWidth:300}]]):b("",!0),t.book.fromPlusCatalog?Q((a(),c("div",{key:2,class:G(["info-tag plus-catalog",{"plus-catalog-unavailable":t.book.unavailable}]),content:t.book.unavailable?"Used to be in the plus catalog but you no longer have access to it":"In the plus catalog"},[R(d),i[4]||(i[4]=J(" Plus catalog "))],10,oa)),[[p,{maxWidth:300}]]):b("",!0),t.book.whispersync?Q((a(),c("div",{key:3,class:G(["info-tag whispersync",{owned:t.book.whispersync==="owned"}]),content:t.book.whispersync==="owned"?"I own the Kindle version":"Kindle book available for purchase..."},[R(g),i[5]||(i[5]=J(" whispersync "))],10,ra)),[[p,{maxWidth:300}]]):b("",!0)]),t.book.releaseDate?Q((a(),c("div",sa,[i[6]||(i[6]=h("span",{class:"strong-label"},"Released: ",-1)),h("span",null,F(t.book.releaseDate),1)])),[[p]]):b("",!0)]),i[8]||(i[8]=h("div",{class:"meta-padding"},null,-1)),r.review?(a(),c("div",aa,[h("div",{class:G(["my-review-btn",{active:e.showReview}]),onClick:i[0]||(i[0]=(...S)=>r.clickedShowReview&&r.clickedShowReview(...S))},[R(v),i[7]||(i[7]=J(" My review "))],2),e.showReview?(a(),c("div",la,[(a(!0),c(pe,null,ye(r.reviewRatings,S=>(a(),c("div",ua,[h("strong",null,F(S.name)+":",1),R(k,{size:12,rating:S.stars,number:"true"},null,8,["rating"])]))),256))])):b("",!0)])):b("",!0)],512),r.summaryHTML?(a(),c("div",{key:0,class:"summary-inner-wrap",ref:"summaryInnerWrap",innerHTML:e.showReview?r.reviewSummary:r.summaryHTML},null,8,ca)):b("",!0)],512),r.showReadMore?(a(),c("div",{key:0,class:"summary-read-more",ref:"readMoreBtn",onClick:i[1]||(i[1]=(...S)=>r.summaryReadMoreclick&&r.summaryReadMoreclick(...S))},[h("span",null,F(e.summary.readmore.toggle?"Read less":"Read more"),1),R(m,{class:"read-more-icon",up:e.summary.readmore.toggle},null,8,["up"])],512)):b("",!0)],6)}const fa=q(Qs,[["render",da]]),ha={name:"booksInSeriesLink",props:["series","book","index","seriesName"],mixins:[Ce],data:function(){return{seriesPage:!1,routerLink:null,title:null,linkDisabled:!1,sameSeries:null}},created:function(){this.seriesPage=this.$route.name==="series",this.routerLink={name:"series",params:{series:this.series.asin},query:{subPageSource:"library",refresh:!0}},this.seriesName?this.routerLink.query.closeBookDetails=!0:this.routerLink.query.book=this.book.asin;const e=this.seriesPage&&this.$route.params.series===this.series.asin;this.linkDisabled=this.book.notInLibrary||e,this.sameSeries=e},methods:{openBook:function(e){e.preventDefault(),this.book&&!this.book.notInLibrary&&this.book.asin!==this.$route.query.book&&this.$compEmitter.emit("book-clicked",this.book.obj.asin)}}},ga={class:"linky"},ma={key:0,class:"series-not-link"},pa=["href","content"],ya={class:"numbers"},va={class:"title"},ba={key:0,style:{"white-space":"normal","padding-bottom":"3px",display:"inline-block"}},ka={key:1,class:"numbers"},_a={key:2,class:"title"};function Sa(e,i,t,n,o,r){const s=Oe("router-link"),l=me("tippy");return a(),c("div",ga,[t.seriesName&&e.linkDisabled?(a(),c("span",ma,F(t.seriesName),1)):!t.seriesName&&t.book.notInLibrary&&t.book.asin?Q((a(),c("a",{key:1,class:"clickety-click cursor-alias",target:"_blank",rel:"noopener noreferrer",href:e.makeUrl("book",t.book.asin),content:t.book.title!==t.book.titleShort?t.book.title:!1},[h("span",ya,F(t.book.bookNumbers),1),h("span",va,F(t.book.titleShort||t.book.title),1)],8,pa)),[[l,{maxWidth:350,placement:"right",flipBehavior:["right","top","bottom"]}]]):Q((a(),O(s,{key:2,class:G(["clickety-click",{"link-disabled":e.linkDisabled,"same-series":e.sameSeries}]),event:e.linkDisabled?"":"click",onClick:i[0]||(i[0]=u=>e.linkDisabled&&r.openBook(u)),to:e.linkDisabled?"":e.routerLink,content:t.seriesName?null:(t.book.notInLibrary?"<strong>Not available:</strong> ":"")+(t.book.title!==t.book.titleShort?t.book.title:"")},{default:ie(()=>[t.seriesName?(a(),c("span",ba,F(t.seriesName),1)):b("",!0),t.seriesName?b("",!0):(a(),c("span",ka,F(t.book.bookNumbers),1)),t.seriesName?b("",!0):(a(),c("span",_a,F(t.book.titleShort||t.book.title),1))]),_:1},8,["class","event","to","content"])),[[l,{maxWidth:350,placement:"right",flipBehavior:["right","top","bottom"]}]])])}const Un=q(ha,[["render",Sa],["__scopeId","data-v-c0436286"]]),wa={name:"goodReadsLink",props:["book","icon","size","muted"],mixins:[so],data:function(){return{goodreadsUrl:null}},created:function(){this.book&&(this.goodreadsUrl=this.makeGoodReadsUrl())}},Ma=["href"],La={key:0,src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiM0ZTM0MmUiLz48L3N2Zz4=",alt:""},Ia={key:1,alt:"",src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="},Ta={key:1};function Ea(e,i,t,n,o,r){const s=me("tippy");return e.goodreadsUrl||t.muted?(a(),c("a",{key:0,href:e.goodreadsUrl,target:"_blank",rel:"noopener noreferrer",class:G(["good-reads-icon",{muted:t.muted,placeholder:!e.goodreadsUrl}])},[t.icon?Q((a(),c("div",{key:0,class:"gr-icon",style:ue({width:(t.size||30)+"px",height:(t.size||30)+"px"}),content:"Search for the book in Goodreads"},[t.muted?(a(),c("img",Ia)):(a(),c("img",La))],4)),[[s]]):(a(),c("span",Ta,"Search in Goodreads"))],10,Ma)):b("",!0)}const Hn=q(wa,[["render",Ea],["__scopeId","data-v-c78c02f7"]]),Aa={name:"openInApp",props:["book","size","muted"],data:function(){return{url:null}},created:function(){_.get(this.book,"asin")&&(this.url="https://smart.link/o3waqx4wg1gdn?asin="+this.book.asin)}},Na=["href","tabindex"];function Da(e,i,t,n,o,r){const s=me("tippy");return e.url||t.muted?(a(),c("a",{key:0,href:e.url,target:"_blank",rel:"noopener noreferrer",class:G(["audible-app-link",{muted:t.muted,placeholder:!t.book.asin}]),tabindex:t.muted?0:-1},[Q((a(),c("div",{class:"gr-icon",style:ue({width:(t.size||30)+"px",height:(t.size||30)+"px"}),content:"Open in app"},i[0]||(i[0]=[h("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""},null,-1)]),4)),[[s,{placement:t.muted?"left":"top",flipBehavior:t.muted?["left","top","bottom","right"]:["top","bottom","right","left"]}]])],10,Na)):b("",!0)}const Yn=q(Aa,[["render",Da],["__scopeId","data-v-8ea68bc0"]]),$a={name:"booksInSeriesBooks",props:["series","book"],data:function(){return{}},computed:{filteredBooks(){return _.filter(this.series.books,i=>{if(_.get(i,"notInLibrary"))return this.$store.state.sticky.booksInSeriesAll;if(this.$store.state.sticky.booksInSeriesFinished)return!0;{let t=_.get(i,"obj.progress");return t?!t.match(/finished/i):!0}})}},methods:{numbersClass:function(e){var i=_.get(e,"obj.progress");return{finished:!!(i&&i.toLowerCase().match("finished")),reading:!!(i&&!i.toLowerCase().match("finished")),unfinished:!i,current:this.book.asin===_.get(e,"obj.asin"),"not-in-library":e.notInLibrary,"in-wishlist":e.inWishlist}},iconTippyContent:function(e){if(e.free&&e.notInLibrary)return"This book is free...";if(e.plus&&e.notInLibrary)return"In the plus catalog...";if(e.notInLibrary)return"Not in library...";if(e.inWishlist)return"In wishlist";{const t=this.numbersClass(e);var i="";return t.finished?i="Finished!":t.unfinished?i="Not started...":t.reading&&(i="Started..."),i}},booksInSeriesIcon:function(e){if(e.free&&e.notInLibrary)return"fa-solid fa-circle-minus";if(e.plus&&e.notInLibrary)return"fa-solid fa-circle-plus";if(e.inWishlist)return"fa-solid fa-hand-holding-heart";if(e.notInLibrary)return"fa-solid fa-ban";{const t=this.numbersClass(e);var i="";return t.finished?i="fa-solid fa-archive":t.unfinished?i="fa-solid fa-book":t.reading&&(i="fa-solid fa-book-reader"),i}}}},Ca=["data-series-name"],xa=["content"];function ja(e,i,t,n,o,r){const s=Yn,l=Hn,u=Un,f=me("tippy");return a(),c("div",null,[(a(!0),c(pe,null,ye(r.filteredBooks,(d,g)=>(a(),c("div",{"data-series-name":t.series.name,class:G(["numbers-list-item",r.numbersClass(d)]),key:d.asin},[e.$store.state.sticky.booksInSeriesOpenInApp?(a(),O(s,{key:0,size:14,book:d,muted:!0},null,8,["book"])):(a(),O(l,{key:1,size:14,book:d,icon:!0,muted:!0},null,8,["book"])),Q((a(),c("span",{class:"icon",content:r.iconTippyContent(d)},[h("i",{class:G(r.booksInSeriesIcon(d))},null,2)],8,xa)),[[f,{placement:"left",flipBehavior:["left","top","bottom"]}]]),R(u,{series:t.series,book:d,index:g},null,8,["series","book","index"])],10,Ca))),128))])}const Oa=q($a,[["render",ja]]),za={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Ra(e,i){return a(),c("svg",za,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M32 32h448c17.7 0 32 14.3 32 32v32c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32m0 128h448v256c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64zm128 80c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16"},null,-1)]))}const Pa=oe({name:"fa6-solid-box-archive",render:Ra}),Ba={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Wa(e,i){return a(),c("svg",Ba,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5m45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5zM0 256a256 256 0 1 1 512 0a256 256 0 1 1-512 0"},null,-1)]))}const Ei=oe({name:"fa6-solid-ban",render:Wa}),Fa={name:"booksInSeriesFilters",props:["series"],data:function(){return{store:this.$store.state,showAllToggle:!1,showFinishedToggle:!1,count:{notInLibrary:0,finished:0}}},created:function(){this.series.collection&&(this.count.finished=this.countFinished(),this.showFinishedToggle=this.count.finished>0,this.count.notInLibrary=this.countNotInLibrary(),this.showAllToggle=this.count.notInLibrary>0)},methods:{countFinished:function(){let e=0;return _.each(this.series.collection,function(i){if(i.books){let t=_.filter(i.books,function(n){let o=_.get(n,"obj.progress");return o?o.match(/finished/i):!1});e+=t.length}}),e},countNotInLibrary:function(){let e=0;return _.each(this.series.collection,function(i){if(i.books){let t=_.filter(i.books,"notInLibrary");e+=t.length}}),e},clickedShowAll(){this.$store.commit("stickyProp",{key:"booksInSeriesAll",value:!this.$store.state.sticky.booksInSeriesAll}),this.$nextTick(function(){this.$compEmitter.emit("resizeSummary")})},clickedShowFinished(){this.$store.commit("stickyProp",{key:"booksInSeriesFinished",value:!this.$store.state.sticky.booksInSeriesFinished}),this.$nextTick(function(){this.$compEmitter.emit("resizeSummary")})}}},Ua={class:"row"},Ha={key:0},Ya={key:0},Va={key:0},Ga={key:1};function qa(e,i,t,n,o,r){const s=Ei,l=Pa;return a(),c("div",{class:"list-filter-wrapper",style:ue({top:e.$store.state.sticky.viewMode==="grid"?e.$store.state.topNavOffset+"px":"31px"})},[h("div",Ua,[e.showAllToggle?(a(),c("div",{key:0,class:"show-all-toggle",onClick:i[0]||(i[0]=(...u)=>r.clickedShowAll&&r.clickedShowAll(...u))},[h("div",null,[R(s,{style:{"padding-right":"4px"},class:G({active:e.$store.state.sticky.booksInSeriesAll})},null,8,["class"]),e.showFinishedToggle?b("",!0):(a(),c("span",Ha,"Not in library:")),h("span",null,F(e.count.notInLibrary),1)])])):b("",!0),e.showFinishedToggle?(a(),c("div",{key:1,class:"show-finished",onClick:i[1]||(i[1]=(...u)=>r.clickedShowFinished&&r.clickedShowFinished(...u))},[h("div",null,[R(l,{style:{"padding-right":"4px"},class:G({active:e.$store.state.sticky.booksInSeriesFinished})},null,8,["class"]),e.showAllToggle?b("",!0):(a(),c("span",Ya,"Finished books:")),h("span",null,F(e.count.finished),1)])])):b("",!0),h("div",{style:{flex:"unset","padding-left":"6px","padding-right":"6px","min-width":"30px"},onClick:i[2]||(i[2]=u=>e.$store.commit("stickyProp",{key:"booksInSeriesOpenInApp",value:!e.$store.state.sticky.booksInSeriesOpenInApp}))},[e.$store.state.sticky.booksInSeriesOpenInApp?(a(),c("span",Va,i[3]||(i[3]=[h("img",{class:"img-icon",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""},null,-1)]))):(a(),c("span",Ga,i[4]||(i[4]=[h("img",{class:"img-icon",src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="},null,-1)])))])])],4)}const Xa=q(Fa,[["render",qa],["__scopeId","data-v-a69b04a3"]]),Qa={name:"booksInSeries",props:["book"],mixins:[Ce],data:function(){return{inSeries:!1,series:{collection:null,toggle:!1}}},created:function(){this.seriesPage=this.$route.name==="series",this.series.collection=this.getBooksInSeries(),this.series.count=this.getSeriesCount(),_.each(this.series.collection,e=>{if(e.books.length)return this.inSeries=!0,!1})},mounted:function(){this.$store.state.sticky.booksInSeriesToggle&&this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})},methods:{inLibraryLength:function(e){return _.filter(e.books,function(i){return!i.notInLibrary}).length},checkFilter:function(e){if(_.get(e,"notInLibrary"))return this.$store.state.sticky.booksInSeriesAll;if(this.$store.state.sticky.booksInSeriesFinished)return!0;{let i=_.get(e,"obj.progress");return i?!i.match(/finished/i):!0}},getBooksInSeries:function(){const e=this;let i=[];return e.book.series&&_.each(e.book.series,function(t,n){const o=_.find(e.$store.state.library.series,{asin:t.asin});if(o){let r=o.books;o.allBooks&&(r=o.allBooks),i.push({asin:t.asin,name:t.name,length:o.length,books:_.map(r,function(s){let l=s.asin||s,u=_.includes(o.books,l);const f=_.find(e.$store.state.library.wishlist,{asin:l});if(u){let g=_.find(e.$store.state.library.books,{asin:l});var d=_.find(g.series,{asin:t.asin});let v=o.allBooks?s.bookNumbers:_.isArray(d.bookNumbers)?d.bookNumbers.join(", "):d.bookNumbers;return{asin:s.asin||g.asin,bookNumbers:v,title:s.title||g.title,titleShort:s.titleShort||g.titleShort,obj:g}}else return f?{asin:l,title:f.title,titleShort:s.titleShort,obj:f,bookNumbers:s.bookNumbers,inWishlist:!0,notInLibrary:!0}:(s.notInLibrary=!0,s.obj={authors:e.book.authors,notInLibrary:!0},s)})})}}),i.length>0?i:null},getSeriesCount:function(){let e=[];return _.each(this.series.collection,function(i,t){i.books.length&&_.each(i.books,function(n){n.notInLibrary||(e[t]||e.push(0),++e[t])})}),e.join(", ")},booksInSeriesLabelClick:function(){this.$store.commit("stickyProp",{key:"booksInSeriesToggle",value:!this.$store.state.sticky.booksInSeriesToggle}),this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})}}},Za={key:0,"data-scroll-to-url-param":"&scrollToSeries=true"},Ja={class:"count"},Ka={key:0,class:"hidden-section my-books-in-series"},el={class:"series-heading",content:"<div style='text-align: left;'>The first number is how many books you have in the series. The total is based on every single listing in the series page, including different versions or bundles with books you may already have.</div>"},tl={class:"series-name"},il={class:"series-length"};function nl(e,i,t,n,o,r){const s=qt,l=Xa,u=Un,f=Oa,d=me("tippy");return e.inSeries?(a(),c("div",Za,[h("div",{class:"label hidden-section-label my-books-in-series-label",onClick:i[0]||(i[0]=(...g)=>r.booksInSeriesLabelClick&&r.booksInSeriesLabelClick(...g))},[i[1]||(i[1]=h("span",{class:"heading"},"My books in the series",-1)),h("span",Ja,F(e.series.count),1),R(s,{up:e.$store.state.sticky.booksInSeriesToggle},null,8,["up"])]),e.$store.state.sticky.booksInSeriesToggle?(a(),c("div",Ka,[R(l,{series:e.series},null,8,["series"]),(a(!0),c(pe,null,ye(e.series.collection,(g,v)=>(a(),c("div",{class:G(["series-section",{first:v===0}]),key:g.asin},[Q((a(),c("div",el,[h("div",tl,[R(u,{series:g,book:{},index:-1,seriesName:g.name},null,8,["series","seriesName"])]),h("div",il,F(r.inLibraryLength(g))+" / "+F(g.length),1)])),[[d,{placement:"right",flipBehavior:["right","top","bottom"],maxWidth:300,allowHTML:!0}]]),R(f,{series:g,book:t.book},null,8,["series","book"])],2))),128))])):b("",!0)])):b("",!0)}const ol=q(Qa,[["render",nl]]),rl={name:"collectionsDrawer",props:["book"],data:function(){return{collections:null,store:this.$store.state}},created:function(){this.compileCollections()},mounted:function(){this.$store.state.sticky.collectionsDrawerToggle&&this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})},methods:{compileCollections:function(){const e=this.book.collectionIds,i=this.store.library.collections;!e||!i||(this.collections=_.filter(i,function(t){return _.includes(e,t.id)}))},labelClick:function(){this.$store.commit("stickyProp",{key:"collectionsDrawerToggle",value:!this.$store.state.sticky.collectionsDrawerToggle}),this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})}}},sl={key:0},al={class:"count"},ll={key:0,class:"hidden-section"},ul={class:"text"},cl={class:"total-books"};function dl(e,i,t,n,o,r){const s=qt,l=Oe("router-link");return e.collections?(a(),c("div",sl,[h("div",{class:"label hidden-section-label",onClick:i[0]||(i[0]=(...u)=>r.labelClick&&r.labelClick(...u))},[i[1]||(i[1]=h("span",{class:"heading"},"This book in collections",-1)),h("span",al,F(e.collections.length),1),R(s,{up:e.$store.state.sticky.collectionsDrawerToggle},null,8,["up"])]),e.$store.state.sticky.collectionsDrawerToggle?(a(),c("div",ll,[(a(!0),c(pe,null,ye(e.collections,u=>(a(),O(l,{class:"collection-link",key:u.id,to:{name:"collection",params:{collection:u.id},query:{book:t.book.asin}}},{default:ie(()=>[h("span",ul,F(u.title),1),h("span",cl,F(u.books.length),1)]),_:2},1032,["to"]))),128))])):b("",!0)])):b("",!0)}const fl=q(rl,[["render",dl],["__scopeId","data-v-759d3f3d"]]),hl={name:"aleBookBasicInfo",props:["book","goodreads"],data:function(){return{ratingTippyOpts:{placement:"top",flipBehavior:["top","right","left","bottom"],allowHTML:!0},ratingLegend:`
        <style>
        .ratings-tippy {
          margin: 0; 
          padding: 0px 0px 0px 15px;
        }
        .ratings-tippy li {
          padding-bottom: 5px;
        }
        </style>
        <ol class="ratings-tippy">
          <li>Not for me</li>
          <li>Itâ€™s okay</li>
          <li>Pretty good</li>
          <li>Itâ€™s great</li>
          <li>I love it</li>
        </ol>
      `}},methods:{myRatingLabel:function(e){switch(parseFloat(e)){case 1:return"Not for me";case 2:return"Itâ€™s okay";case 3:return"Pretty good";case 4:return"Itâ€™s great";case 5:return"I love it"}}}},gl={class:"basic-info"},ml={key:4},pl={key:5,class:"language"},yl={key:6,class:"format"},vl={key:7,class:"format",content:"YYYY-MM-DD"},bl={key:8,class:"rating"},kl=["content"],_l={key:9,class:"own-rating"},Sl=["content"];function wl(e,i,t,n,o,r){const s=Wn,l=Ti,u=me("tippy");return a(),c("div",gl,[t.book.authors?(a(),O(s,{key:0,label:"Author",array:t.book.authors},null,8,["array"])):b("",!0),t.book.narrators?(a(),O(s,{key:1,label:"Narrator",array:t.book.narrators},null,8,["array"])):b("",!0),t.book.series?(a(),O(s,{key:2,label:"Series",array:t.book.series},null,8,["array"])):b("",!0),t.book.publishers?(a(),O(s,{key:3,label:"Publisher",array:t.book.publishers},null,8,["array"])):b("",!0),t.book.length?(a(),c("div",ml,[i[0]||(i[0]=h("strong",{class:"strong-label"},"Length:",-1)),J(F(t.book.length),1)])):b("",!0),t.book.language?(a(),c("div",pl,[i[1]||(i[1]=h("strong",{class:"strong-label"},"Language:",-1)),h("span",null,F(t.book.language),1)])):b("",!0),t.book.format?(a(),c("div",yl,[i[2]||(i[2]=h("strong",{class:"strong-label"},"Format:",-1)),h("span",null,F(t.book.format),1)])):b("",!0),t.book.releaseDate?Q((a(),c("div",vl,[i[3]||(i[3]=h("strong",{class:"strong-label"},"Release date:",-1)),h("span",null,F(t.book.releaseDate),1)])),[[u]]):b("",!0),t.book.rating?(a(),c("div",bl,[Q((a(),c("strong",{class:"strong-label",content:e.ratingLegend},i[4]||(i[4]=[J("Rating:")]),8,kl)),[[u,e.ratingTippyOpts]]),R(l,{size:12,rating:t.book.rating,number:"true",ratings:t.book.ratings},null,8,["rating","ratings"])])):b("",!0),t.book.myRating?(a(),c("div",_l,[Q((a(),c("strong",{class:"strong-label",content:e.ratingLegend},i[5]||(i[5]=[J("My rating: ")]),8,Sl)),[[u,e.ratingTippyOpts]]),Q(R(l,{size:12,content:r.myRatingLabel(t.book.myRating),rating:t.book.myRating,number:"true"},null,8,["content","rating"]),[[u,{placement:"right",flipBehavior:["right","top","bottom"]}]])])):b("",!0)])}const Ml=q(hl,[["render",wl],["__scopeId","data-v-36e31c42"]]),Ll={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Il(e,i){return a(),c("svg",Ll,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"m21.32 9.55l-1.89-.63l.89-1.78A1 1 0 0 0 20.13 6L18 3.87a1 1 0 0 0-1.15-.19l-1.78.89l-.63-1.89A1 1 0 0 0 13.5 2h-3a1 1 0 0 0-.95.68l-.63 1.89l-1.78-.89A1 1 0 0 0 6 3.87L3.87 6a1 1 0 0 0-.19 1.15l.89 1.78l-1.89.63a1 1 0 0 0-.68.94v3a1 1 0 0 0 .68.95l1.89.63l-.89 1.78A1 1 0 0 0 3.87 18L6 20.13a1 1 0 0 0 1.15.19l1.78-.89l.63 1.89a1 1 0 0 0 .95.68h3a1 1 0 0 0 .95-.68l.63-1.89l1.78.89a1 1 0 0 0 1.13-.19L20.13 18a1 1 0 0 0 .19-1.15l-.89-1.78l1.89-.63a1 1 0 0 0 .68-.94v-3a1 1 0 0 0-.68-.95M20 12.78l-1.2.4A2 2 0 0 0 17.64 16l.57 1.14l-1.1 1.1l-1.11-.6a2 2 0 0 0-2.79 1.16l-.4 1.2h-1.59l-.4-1.2A2 2 0 0 0 8 17.64l-1.14.57l-1.1-1.1l.6-1.11a2 2 0 0 0-1.16-2.82l-1.2-.4v-1.56l1.2-.4A2 2 0 0 0 6.36 8l-.57-1.11l1.1-1.1L8 6.36a2 2 0 0 0 2.82-1.16l.4-1.2h1.56l.4 1.2A2 2 0 0 0 16 6.36l1.14-.57l1.1 1.1l-.6 1.11a2 2 0 0 0 1.16 2.79l1.2.4ZM12 8a4 4 0 1 0 4 4a4 4 0 0 0-4-4m0 6a2 2 0 1 1 2-2a2 2 0 0 1-2 2"},null,-1)]))}const Tl=oe({name:"uil-cog",render:Il}),El={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Al(e,i){return a(),c("svg",El,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M8 7a5 5 0 0 0 0 10h8a5 5 0 0 0 0-10zm0-2h8a7 7 0 1 1 0 14H8A7 7 0 1 1 8 5m0 10a3 3 0 1 1 0-6a3 3 0 0 1 0 6"},null,-1)]))}const Nl=oe({name:"ri-toggle-line",render:Al}),Dl={name:"sidebarFlipper",data:function(){return{detailSettings:this.$store.state.sticky.bookDetailSettings}},methods:{flip(){this.$store.commit("prop",{key:"sticky.bookDetailSettings.reverseDirection",value:!this.detailSettings.reverseDirection})}}};function $l(e,i,t,n,o,r){const s=Nl;return a(),c("div",{class:G(["action-reverse-direction",{flip:e.detailSettings.reverseDirection}]),onClick:i[0]||(i[0]=(...l)=>r.flip&&r.flip(...l))},[R(s)],2)}const Cl=q(Dl,[["render",$l],["__scopeId","data-v-7ff18f57"]]),xl={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"};function jl(e,i){return a(),c("svg",xl,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M128 24a104 104 0 1 0 104 104A104.11 104.11 0 0 0 128 24m24 144a8 8 0 0 1 0 16h-48a8 8 0 0 1-6.4-12.8l43.17-57.56a16 16 0 1 0-27.86-15a8 8 0 0 1-15.09-5.34a32 32 0 1 1 55.74 29.93L120 168Z"},null,-1)]))}const Ol=oe({name:"ph-number-circle-two-fill",render:jl}),zl={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"};function Rl(e,i){return a(),c("svg",zl,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M128 24a104 104 0 1 0 104 104A104.11 104.11 0 0 0 128 24m12 152a8 8 0 0 1-16 0V95l-11.56 7.71a8 8 0 1 1-8.88-13.32l24-16A8 8 0 0 1 140 80Z"},null,-1)]))}const Pl=oe({name:"ph-number-circle-one-fill",render:Rl}),Bl={name:"sidebarFlipper",data:function(){return{detailSettings:this.$store.state.sticky.bookDetailSettings}},methods:{flip(){this.$store.commit("prop",{key:"sticky.bookDetailSettings.hideFirstSection",value:!this.detailSettings.hideFirstSection})}}};function Wl(e,i,t,n,o,r){const s=Pl,l=Ol;return a(),c("div",{class:G(["details-first-hider",{flip:e.detailSettings.hideFirstSection}]),onClick:i[0]||(i[0]=(...u)=>r.flip&&r.flip(...u))},[e.detailSettings.hideFirstSection?(a(),O(s,{key:0})):(a(),O(l,{key:1}))],2)}const Fl=q(Bl,[["render",Wl],["__scopeId","data-v-eb8637be"]]),Ul={viewBox:"0 0 640 512",width:"1.5em",height:"1.2em"};function Hl(e,i){return a(),c("svg",Ul,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M640 199.9v54l-320 200L0 254v-54l320 200zm-194.5 72l47.1-29.4c-37.2-55.8-100.7-92.6-172.7-92.6s-135.5 36.7-172.6 92.4h.3c2.5-2.3 5.1-4.5 7.7-6.7c89.7-74.4 219.4-58.1 290.2 36.3m-220.1 18.8c16.9-11.9 36.5-18.7 57.4-18.7c34.4 0 65.2 18.4 86.4 47.6l45.4-28.4c-20.9-29.9-55.6-49.5-94.8-49.5c-38.9 0-73.4 19.4-94.4 49M103.6 161.1c131.8-104.3 318.2-76.4 417.5 62.1l.7 1l48.8-30.4C517.1 112.1 424.8 58.1 319.9 58.1c-103.5 0-196.6 53.5-250.5 135.6c9.9-10.5 22.7-23.5 34.2-32.6m467 32.7"},null,-1)]))}const Yl=oe({name:"fa6-brands-audible",render:Hl}),Vl={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Gl(e,i){return a(),c("svg",Vl,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M84 480H28a12 12 0 0 1-12-12V92a12 12 0 0 1 12-12h56a12 12 0 0 1 12 12v376a12 12 0 0 1-12 12m156-272v-52a12 12 0 0 0-12-12H124a12 12 0 0 0-12 12v52ZM112 416v52a12 12 0 0 0 12 12h104a12 12 0 0 0 12-12v-52Zm0-176h128v144H112zm228 240h-72a12 12 0 0 1-12-12V44a12 12 0 0 1 12-12h72a12 12 0 0 1 12 12v424a12 12 0 0 1-12 12m29-379.3l30 367.83a12 12 0 0 0 13.45 10.92l72.16-9a12 12 0 0 0 10.47-12.9L465 91.21a12 12 0 0 0-13.2-10.94l-72.13 7.51A12 12 0 0 0 369 100.7"},null,-1)]))}const ql=oe({name:"ion-library-sharp",render:Gl}),Xl={name:"openWebPlayer",props:["book","icon","topRight","size","tooltip","noBG"],data:function(){return{url:null}},created:function(){this.book&&(this.url="https://www.audible.com/webplayer?asin="+this.book.asin)}},Ql=["href"],Zl=["content"],Jl={key:1};function Kl(e,i,t,n,o,r){const s=me("tippy");return e.url?(a(),c("a",{key:0,href:e.url,target:"_blank",rel:"noopener noreferrer",class:G({"top-right":t.topRight,"no-bg":t.noBG})},[t.icon?Q((a(),c("div",{key:0,class:"gr-icon audible-cloudplayer-link",style:ue({width:(t.size||30)+"px",height:(t.size||30)+"px"}),content:t.tooltip?"Open web player":""},i[0]||(i[0]=[h("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""},null,-1)]),12,Zl)),[[s]]):(a(),c("span",Jl,"Search in Goodreads"))],10,Ql)):b("",!0)}const Ai=q(Xl,[["render",Kl],["__scopeId","data-v-7e5681f8"]]),eu={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function tu(e,i){return a(),c("svg",eu,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M0 256a256 256 0 1 1 512 0a256 256 0 1 1-512 0m188.3-108.9c-7.6 4.2-12.3 12.3-12.3 20.9v176c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"},null,-1)]))}const iu=oe({name:"fa6-solid-circle-play",render:tu}),nu={name:"sampleButton",props:["book","index","topRight","size"],methods:{playSample:function(e,i){e.sample?this.$store.commit("prop",{key:"audioPlayer.audio",value:{from:"book",route:this.$route,book:e,index:i}}):window.open(`${this.$store.state.urlOrigin}/webplayer?asin=${e.asin}&isSample=true`,"_blank")}}};function ou(e,i,t,n,o,r){const s=iu,l=me("tippy");return Q((a(),O(s,{class:G(["pointer",{"top-right":t.topRight}]),onClick:i[0]||(i[0]=u=>r.playSample(t.book,e.rowIndex)),style:ue({width:(t.size||30)+"px",height:"auto"}),content:"Play sample audio"},null,8,["class","style"])),[[l]])}const Vn=q(nu,[["render",ou],["__scopeId","data-v-84a79cf9"]]),ru={name:"book-info-toolbar",props:["book","tempAsin"],data:function(){return{size:20}}},su={class:"book-info-toolbar"};function au(e,i,t,n,o,r){const s=Vn,l=Hn,u=Yn,f=Ai;return a(),c("div",su,[R(s,{size:e.size,book:t.book},null,8,["size","book"]),R(l,{size:e.size,book:t.book,icon:!0},null,8,["size","book"]),t.tempAsin?b("",!0):(a(),O(u,{key:0,size:e.size,book:t.book},null,8,["size","book"])),!t.tempAsin&&!t.book.notInLibrary?(a(),O(f,{key:1,size:e.size,book:t.book,icon:!0},null,8,["size","book"])):b("",!0)])}const lu=q(ru,[["render",au]]),Gn={mixins:[Ot],methods:{progressbarWidth:function(e){if(e.progress){if(e.progress.toLowerCase().trim()==="finished")return{width:"100%"};if(e.length){var i=this.timeStringToSeconds(e.progress);const t=this.timeStringToSeconds(e.length);return i=t-i,{width:i/t*100+"%"}}else return{width:0}}else return{width:0}}}},uu={name:"bookDetails",props:["asin"],mixins:[Ot,Ki,Gn,jt,Ce],data:function(){return{store:this.$store.state,sticky:this.$store.state.sticky,book:null,index:null,maxWidth:"unset",loading:!0,clickedBook:null,peopleAlsoBoughtJSON:null,bookSummaryJSON:null,scrpt:null,imageLoaded:!1,clientX:0,clientY:0,firstClientX:0,firstClientY:0,animate_detailLinksToAudible:!0}},watch:{},created:function(){this.index=_.findIndex(this.$store.state.chunkCollection,{asin:this.asin}),this.book=this.$store.state.chunkCollection[this.index],this.loadJSON()},mounted:function(){this.$nextTick(function(){this.clickedBook=document.querySelector('.ale-book[data-asin="'+this.book.asin+'"]')||document.querySelector('.ale-row[data-asin="'+this.book.asin+'"]'),this.resetScroll(),this.maxWidth=this.repositionBookDetails()+"px",this.$store.commit("prop",{key:"timeStamp",value:new Date().getTime()}),this.$compEmitter.on("afterWindowResize",this.onWindowResize),this.loading=!1,this.scrollToCarousel(),this.scrollToMyBooksInTheSeries()})},beforeUnmount:function(){this.scrpt&&(this.scrpt.remove(),this.scrpt=null),this.$compEmitter.off("afterWindowResize",this.onWindowResize),this.peopleAlsoBoughtJSON=null,this.bookSummaryJSON=null,this.$store.commit("prop",{key:"bookDetailSettingsOpen",value:!1});const e=document.querySelector("#ale-bookdetails");e&&e.remove()},computed:{peopleAlsoBought:function(){return this.book.peopleAlsoBought||this.peopleAlsoBoughtJSON},getMaxWidth:function(){return this.sticky.viewMode==="spreadsheet"?this.maxWidth:window.innerWidth>800?this.maxWidth:"800px"},mobileWidth(){return this.store.windowWidth<=688},tempAsin(){return!!this.book.asin.match(/temp-asin/i)}},methods:{collapseBtnClicked:function(e){this.$store.commit("stickyProp",{key:e,value:!this.sticky[e]}),this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})},loadJSON:function(e){if(this.store.standalone){let i=this,t=document.createElement("script");this.scrpt=t,t.src="data/split-book-data/"+i.book.asin+"."+this.store.library.extras.cacheID+".js",t.type="text/javascript",t.onload=function(){i.bookSummaryJSON=window.bookSummaryJSON,window.bookSummaryJSON=!0,i.peopleAlsoBoughtJSON=window.peopleAlsoBoughtJSON,window.peopleAlsoBoughtJSON=!0,t=null},t.onerror=function(){t=null,setTimeout(function(){e||i.loadJSON("afterError")},1e3)},document.head.appendChild(t)}},onWindowResize:function(e){e.widthChanged&&(this.maxWidth=this.repositionBookDetails()+"px",this.resetScroll())},changeUrl:function(){_.get(this.$route,"query.book")!==this.book.asin&&this.$router.replace({query:{book:this.book.asin}})},resetScroll:function(){this.$nextTick(function(){this.$nextTick(function(){this.sticky.viewMode==="grid"?scroll({top:this.clickedBook.offsetTop-this.store.topNavOffset-25,behavior:"auto"}):document.querySelector(".list-view-inner-wrap").scroll({top:this.clickedBook.offsetTop-45})})})},scrollToCarousel:function(){this.$route.query.carousel&&(this.$updateQueries({carousel:null}),this.$nextTick(function(){const e=parseFloat(this.$route.query.y);this.sticky.viewMode==="grid"?scroll({top:e}):document.querySelector(".list-view-inner-wrap").scroll({top:e})}))},scrollToMyBooksInTheSeries:function(){this.$route.query.scrollToSeries&&(this.$updateQueries({scrollToSeries:null}),this.$store.commit("stickyProp",{key:"booksInSeriesToggle",value:!0}),this.$nextTick(function(){const e=this.$el.querySelector(".my-books-in-series-label");if(e){let i=e.getBoundingClientRect().top+window.scrollY;i=i-$store.state.topNavOffset-25,this.sticky.viewMode==="grid"?scroll({top:i,behavior:"smooth"}):document.querySelector(".list-view-inner-wrap").scroll({top:i,behavior:"smooth"})}}))},repositionBookDetails:function(){const e=document.querySelector(".ale-books"),i=e.querySelector(".ale-book")?e.querySelectorAll(".ale-book"):e.querySelector("table tbody").querySelectorAll(".ale-row"),t={};t.el=i[this.index],t.index=this.index,t.width=t.el.getBoundingClientRect().width,t.siblings=i;const n={};n.el=e,n.width=n.el.getBoundingClientRect().width;const o={};o.cols=Math.floor(n.width/t.width)||1,o.cols<2?o.rowEndEl=t.el:(o.currentRow=Math.floor(t.index/o.cols)+1,o.rowEnd=o.currentRow*o.cols,o.getRowEndEl=function(s){let l=t.siblings[s];return l||(l=o.getRowEndEl(--s)),l},o.rowEndEl=o.getRowEndEl(o.rowEnd-1));let r=document.querySelector(".target-row-end");return r&&r.classList.remove("target-row-end"),o.rowEndEl.classList.add("target-row-end"),o.rowEndEl.parentNode.insertBefore(this.$refs.bookDetails,o.rowEndEl.nextSibling),this.sticky.viewMode!=="spreadsheet"&&this.repositionBookDetailsArrow(t.el),this.sticky.viewMode==="spreadsheet"?n.width-60:t.width*o.cols},repositionBookDetailsArrow:function(e){const t=e.getBoundingClientRect().left+window.scrollX+e.offsetWidth/2;this.$refs.arrow.style.left=t+"px"},openAdjacentBookDetails:_.throttle(function(e){const i=this;if(this.sticky.viewMode==="grid")switch(e.srcKey){case"left":case"tabShift":i.keyboardMove("prev");break;case"right":case"tab":i.keyboardMove("next");break;case"up":case"down":i.keyboardMove_inGrid_vertically(e);break}else switch(e.srcKey){case"left":case"up":case"tabShift":i.keyboardMove("prev");break;case"right":case"down":case"tab":i.keyboardMove("next");break}},70,{leading:!1,trailing:!0}),keyboardMove(e){const i=e==="prev",t=i?this.index-1:this.index+1,n=this.store.chunkCollection[t];(i?t>-1:t<this.store.chunkCollection.length)&&(!i&&t>this.store.chunkCollection.length-2?(this.$store.commit("chunkCollectionAdd"),this.$nextTick(function(){this.$compEmitter.emit("book-clicked",n.asin)})):this.$compEmitter.emit("book-clicked",n.asin))},keyboardMove_inGrid_vertically(e){const i=this,t={};t.el=document.querySelector(".ale-books"),t.width=t.el.offsetWidth;const n={};n.el=this.clickedBook,n.index=this.index,n.width=n.el.offsetWidth;const o=Math.floor(t.width/n.width),s=function(){const d=e.srcKey;let g=-1;if(d==="up")g=i.index-o,g<0&&(g=0);else{g=i.index+o;const v=i.store.chunkCollection.length-1;g>v&&(g=v)}return g}(),l=i.store.chunkCollection[s],u=this.store.chunkCollection.length-1;(e.srcKey==="up"?!(i.index===0&&s==0):!(i.index===u&&s===u))&&(e.srcKey==="down"&&s>i.store.chunkCollection.length-2?(this.$store.commit("chunkCollectionAdd"),this.$nextTick(function(){this.$compEmitter.emit("book-clicked",l.asin)})):this.$compEmitter.emit("book-clicked",l.asin))},closeBookDetails:function(){_.get(this.$route,"query.book")&&this.$compEmitter.emit("book-clicked",null)},progressTooltip:function(e){if(e.progress.toLowerCase().trim()==="finished"){const i=this.timeStringToSeconds(e.length);return"Finished: ( "+this.secondsToTimeString(i)+" )"}else{const i=this.timeStringToSeconds(e.progress),t=this.timeStringToSeconds(e.length),n=t-i;return"Progress: "+this.secondsToTimeString(n)+" / "+this.secondsToTimeString(t)}},progressInfo:function(e){if(e.progress&&e.length)if(e.progress.toLowerCase().trim()==="finished"){const i=this.timeStringToSeconds(e.length);return'<div class="stretch-center" style="flex: 1;"><strong>Finished!</strong> ( '+this.secondsToTimeString(i,!0)+" )</div>"}else{const i=this.timeStringToSeconds(e.progress),t=this.timeStringToSeconds(e.length),n=t-i;return"<strong>Progress: </strong><div>"+this.secondsToTimeString(n,!0)+" / "+this.secondsToTimeString(t,!0)+"</div>"}else return'<div class="stretch-center" style="flex: 1;"><strong>Length:</strong> '+(e.length||"unkown")+"</div>"},swipeHandler(e){this.mobileWidth&&this.$store.commit("prop",{key:"sticky.bookDetailSettings.reverseDirection",value:!this.$store.state.sticky.bookDetailSettings.reverseDirection})},touchStart(e){this.mobileWidth&&(this.firstClientX=e.touches[0].clientX,this.firstClientY=e.touches[0].clientY)},preventTouch(e){if(!this.mobileWidth)return;const i=5;if(this.clientX=e.touches[0].clientX-this.firstClientX,this.clientY=e.touches[0].clientY-this.firstClientY,Math.abs(this.clientX)>i)return e.preventDefault(),e.returnValue=!1,!1},detailLinksToAudible(){this.$store.commit("prop",{key:"sticky.detailLinksToAudible",value:!this.sticky.detailLinksToAudible});const e=_.get(this.$refs,"detailLinksToAudible");e._tippy.show(),setTimeout(()=>{e._tippy.hide()},2e3)}}},cu={key:0,class:"arrow",ref:"arrow"},du={class:"details-toolbar"},fu=["content"],hu={key:0,class:"information",ref:"information"},gu=["content"],mu=["href"],pu={class:"progressbar"},yu=["src"],vu=["innerHTML"],bu={class:"basic-details"},ku=["content"],_u={key:0,class:"carousel-wrap"};function Su(e,i,t,n,o,r){const s=Ei,l=Fn,u=lu,f=ql,d=Yl,g=Fl,v=Cl,k=Tl,m=qt,p=Ml,S=fl,L=ol,M=fa,w=ts,y=me("tippy"),T=me("shortkey");return e.book?Q((a(),c("div",{key:0,id:"ale-bookdetails",ref:"bookDetails",onShortkey:i[6]||(i[6]=(...D)=>r.closeBookDetails&&r.closeBookDetails(...D)),class:G({"spreadsheet-details":e.sticky.viewMode==="spreadsheet","mobile-width":r.mobileWidth,"links-lead-to-library":!e.sticky.detailLinksToAudible&&e.animate_detailLinksToAudible})},[e.sticky.viewMode!=="spreadsheet"?(a(),c("div",cu,null,512)):b("",!0),Q((a(),c("div",{id:"book-info-container",onShortkey:i[5]||(i[5]=(...D)=>r.openAdjacentBookDetails&&r.openAdjacentBookDetails(...D))},[e.book.notInLibrary?(a(),c("div",{key:0,class:"inner-wrap",style:ue({maxWidth:r.getMaxWidth})},[Q(R(s,{style:{"font-size":"30px",color:"#ff404e","margin-bottom":"20px"},content:"Not in my library..."},null,512),[[y,{trigger:"mouseenter click"}]]),R(l,{book:e.book,tempAsin:r.tempAsin},null,8,["book","tempAsin"]),e.sticky.bookDetailSettings.sidebar.iconToolbar?(a(),O(u,{key:0,style:{"margin-top":"15px"},book:e.book,tempAsin:r.tempAsin},null,8,["book","tempAsin"])):b("",!0)],4)):(a(),c("div",{key:1,class:"inner-wrap",style:ue({maxWidth:r.getMaxWidth})},[h("div",du,[Q((a(),c("div",{class:"audible-vs-local-links",onClick:i[0]||(i[0]=D=>r.detailLinksToAudible()),content:e.sticky.detailLinksToAudible?"Links lead to Audible":"Links lead to my library",ref:"detailLinksToAudible"},[e.sticky.detailLinksToAudible?(a(),O(d,{key:1})):(a(),O(f,{key:0}))],8,fu)),[[y,{trigger:"manual"}]]),r.mobileWidth?(a(),O(g,{key:0})):b("",!0),R(v),R(k,{class:G(["book-details-info",{active:e.store.bookDetailSettingsOpen}]),onClick:i[1]||(i[1]=D=>e.$store.commit("prop",{key:"bookDetailSettingsOpen",value:!e.store.bookDetailSettingsOpen}))},null,8,["class"])]),h("div",{class:G(["top details-wrap",{"reverse-direction":e.sticky.bookDetailSettings.reverseDirection}])},[e.sticky.bookDetailSettings.sidebar.show&&!(!e.sticky.bookDetailSettings.reverseDirection&&e.sticky.bookDetailSettings.hideFirstSection&&r.mobileWidth)?(a(),c("div",hu,[r.mobileWidth?b("",!0):Q((a(),c("div",{key:0,class:"collapse-btn",content:(e.sticky.bookDetailsCollapsedCover?"Expand":"Collapse")+" cover image.",style:{top:"5px"},onClick:i[2]||(i[2]=D=>r.collapseBtnClicked("bookDetailsCollapsedCover"))},[R(m,{up:!e.sticky.bookDetailsCollapsedCover},null,8,["up"])],8,gu)),[[y]]),h("div",{class:G(["cover-wrap",{"cover-height":!e.sticky.bookDetailsCollapsedCover&&e.book.cover&&!r.mobileWidth}])},[h("a",{href:e.makeUrl("book",e.book.asin),target:"_blank",rel:"noopener noreferrer"},[h("div",pu,[h("div",{class:"progress",style:ue(e.progressbarWidth(e.book))},null,4)]),!e.sticky.bookDetailsCollapsedCover&&e.book.cover&&!r.mobileWidth?Q((a(),c("img",{key:0,onLoad:i[3]||(i[3]=D=>e.imageLoaded=!0),crossorigin:"anonymous",class:G(["cover",{loaded:e.imageLoaded}]),src:e.makeCoverUrl(e.book.cover)},null,42,yu)),[[Zi,e.imageLoaded]]):b("",!0)],8,mu)],2),h("div",{class:"progress-info",innerHTML:r.progressInfo(e.book)},null,8,vu),h("div",bu,[Q((a(),c("div",{class:"collapse-btn",content:(e.sticky.bookDetailsCollapsedDetails?"Expand":"Collapse")+" book details.",style:ue({top:e.sticky.bookDetailsCollapsedDetails?"-10px":"25px"}),onClick:i[4]||(i[4]=D=>r.collapseBtnClicked("bookDetailsCollapsedDetails"))},[R(m,{up:!e.sticky.bookDetailsCollapsedDetails},null,8,["up"])],12,ku)),[[y]]),e.sticky.bookDetailSettings.sidebar.iconToolbar?(a(),O(u,{key:0,book:e.book},null,8,["book"])):b("",!0),e.sticky.bookDetailsCollapsedDetails?b("",!0):(a(),O(p,{key:1,book:e.book},null,8,["book"]))]),e.sticky.bookDetailSettings.sidebar.seriesList?(a(),O(S,{key:1,book:e.book},null,8,["book"])):b("",!0),e.sticky.bookDetailSettings.sidebar.collectionsList?(a(),O(L,{key:2,book:e.book},null,8,["book"])):b("",!0)],512)):b("",!0),!e.loading&&!(e.sticky.bookDetailSettings.reverseDirection&&e.sticky.bookDetailSettings.hideFirstSection&&r.mobileWidth)?(a(),O(M,{key:1,book:e.book,bookSummary:e.bookSummaryJSON,mobileWidth:r.mobileWidth},null,8,["book","bookSummary","mobileWidth"])):b("",!0)],2),e.sticky.bookDetailSettings.carousel&&!e.loading?(a(),c("div",_u,[r.peopleAlsoBought&&r.peopleAlsoBought!==!0&&!(e.store.standalone&&!e.store.siteOnline)?(a(),O(w,{detailsBook:e.book,books:r.peopleAlsoBought,key:e.maxWidth,mobileWidth:r.mobileWidth},{default:ie(()=>i[7]||(i[7]=[J(" Listeners also enjoyed ")])),_:1,__:[7]},8,["detailsBook","books","mobileWidth"])):b("",!0)])):b("",!0)],4))],32)),[[T,{left:["arrowleft"],up:["arrowup"],right:["arrowright"],down:["arrowdown"],tab:["tab"],tabShift:["tab","shift"]}]])],34)),[[T,["esc"],void 0,{once:!0}]]):b("",!0)}const wu=q(uu,[["render",Su],["__scopeId","data-v-4d82a01b"]]),Mu={name:"aleListItem",props:["book","rowIndex","keys"],mixins:[Ji,jt,Ce],data:function(){return{sticky:this.$store.state.sticky,coverUrl:"",coverUrl27:"",bookTitle:"",goodreadsUrl:"",columns:null,imageLoading:!0}},created:function(){this.coverUrl=this.makeCoverUrl(this.book.cover),this.coverUrl&&(this.coverUrl27=this.coverUrl.replace("_SL500_","_SL54_")),this.bookTitle=this.book.title||this.book.titleShort,this.columns=this.prepareColumns()},mounted:function(){this.$nextTick(function(){this.imageLoading=!1})},methods:{prepareColumns:function(){const e=this;return _.map(this.keys,function(i){let t={};switch(t.key=i,t.class="col-"+_.kebabCase(i),i){case"authors":case"narrators":case"categories":case"publishers":case"tags":t.text=e.stringifyArray(e.book[i],"name",i==="categories"?" > ":null);break;case"series":var n=e.book.series;n&&(n=_.map(n,function(s){let l=s.bookNumbers?" (book "+_.castArray(s.bookNumbers).join(", ")+")":"";return s.name?s.name+l:""}).join(", ")),t.text=n||"";break;case"title":t.text=e.book[i]||e.book.titleShort,t.class+=" sticky-col";break;case"bookNumbers":if(!e.book.series)t.text="";else{let s=e.book.series.filter(function(l){return l.bookNumbers});s=s.map(function(l){return l.bookNumbers}),s=s.join(", "),t.text=s||"âˆž"}break;case"isbn10":const o=_.find(e.book.isbns,{type:"ISBN_10"});o&&(t.text=o.identifier);break;case"isbn13":const r=_.find(e.book.isbns,{type:"ISBN_13"});r&&(t.text=r.identifier);break;default:t.text=e.book[i],t.name="";break}return t.text||(t.text=null),t})}}},Lu=["name"],Iu={class:"ale-col-inner"},Tu={key:0,class:"icons-n-stuff"},Eu={class:"info-icon"},Au={key:1,class:"cloud-player-icon"},Nu={class:"thumbnail-wrapper"},Du=["src"],$u={class:"text-container"};function Cu(e,i,t,n,o,r){const s=Pn,l=Vn,u=Ai;return a(),c("tr",{class:"ale-row-inner",onClick:i[0]||(i[0]=f=>e.$compEmitter.emit("book-clicked",t.book.asin))},[(a(!0),c(pe,null,ye(e.columns,f=>(a(),c("td",{key:f.key,class:G(["ale-col",f.class]),name:f.name},[h("div",Iu,[f.key==="title"?(a(),c("span",Tu,[h("span",Eu,[R(s,{class:"pointer"})]),e.sticky.bookDetailSettings.playButton?(a(),O(l,{key:0,book:t.book,index:t.rowIndex,size:16},null,8,["book","index"])):t.book.asin&&e.sticky.bookDetailSettings.cloudPlayer?(a(),c("div",Au,[R(u,{size:20,book:t.book,icon:!0,tooltip:!1,noBG:!0},null,8,["book"])])):b("",!0),h("div",Nu,[e.imageLoading?b("",!0):(a(),c("img",{key:0,crossorigin:"anonymous",src:e.coverUrl27,alt:""},null,8,Du))])])):b("",!0),h("span",$u,F(f.text||"Â "),1)])],10,Lu))),128))])}const xu=q(Mu,[["render",Cu]]),ju={name:"colResizer",props:["identifier"],data:function(){return{colClass:"",startPosition:null,endPosition:null,dragging:!1,minWidth:30,width:null,mouseX:0,threshold:10}},created:function(){this.colClass=this.identifier.split(" ")[0]},methods:{resizeMouseDown:function(e){this.endPosition=null,this.startPosition=e.clientX},resizeMouseMove:_.throttle(function(e){this.startPosition&&Math.abs(this.startPosition-e.clientX)>=this.threshold&&(this.dragging=!0,this.mouseX=e.clientX)},65),resizeMouseUp:function(e){if(this.dragging){this.endPosition=e.clientX;const i=this.width?this.width:e.currentTarget.parentElement.offsetWidth,t=Math.abs(this.startPosition-this.endPosition),n=this.endPosition>this.startPosition,o=i+(n?+t:-t);this.width=o<this.minWidth?this.minWidth:o}this.dragging=null,this.endPosition=null,this.startPosition=null,this.mouseX=0}}};function Ou(e,i,t,n,o,r){return a(),c("div",{class:G(["col-resizer",{dragging:e.startPosition}]),onMousedown:i[0]||(i[0]=(...s)=>r.resizeMouseDown&&r.resizeMouseDown(...s)),onMouseup:i[1]||(i[1]=(...s)=>r.resizeMouseUp&&r.resizeMouseUp(...s)),onMousemove:i[2]||(i[2]=(...s)=>r.resizeMouseMove&&r.resizeMouseMove(...s))},[e.mouseX?(a(),c("div",{key:0,class:"floater-boy",style:ue({left:e.mouseX+"px"})},null,4)):b("",!0),e.width?(a(),O(yt("style"),{key:1,type:"text/css"},{default:ie(()=>[J(" ."+F(e.colClass)+" { width: "+F(e.width)+"px !important; } ",1)]),_:1})):b("",!0)],34)}const zu=q(ju,[["render",Ou],["__scopeId","data-v-f559502f"]]),Ru={name:"aleHeader",props:["keys"],data:function(){return{listName:"sort",optionsList:null,headers:null}},created:function(){this.optionsList=this.$store.state.listRenderingOpts[this.listName],this.headers=this.prepareHeaders(this.keys)},methods:{prepareHeaders:function(e){return _.map(e,function(i){const t={key:i,label:_.startCase(i),align:"left",class:"col-"+_.kebabCase(i)};switch(i){case"titleShort":case"title":t.class=t.class+" sticky-col";break;case"authors":case"narrators":case"publishers":case"tags":t.key+=".name";break}return t})},sorterIndex:function(e){return _.findIndex(this.optionsList,{key:e.key})},sorterItem:function(e){const i=new RegExp("^"+e);return _.find(this.optionsList,function(t){return t.key.match(i)})}}},Pu={class:"list-view-header ale-row"},Bu={class:"ale-row-inner"},Wu={class:"ale-col-inner"},Fu={key:1,class:"text-container"};function Uu(e,i,t,n,o,r){const s=zu,l=fo;return a(),c("div",Pu,[h("tr",Bu,[(a(!0),c(pe,null,ye(e.headers,(u,f)=>(a(),c("th",{key:u.label,class:G(["header-item ale-col",u.class])},[R(s,{identifier:u.class},null,8,["identifier"]),h("div",Wu,[r.sorterIndex(u)>-1?(a(),O(l,{key:0,label:!1,item:r.sorterItem(u.key),index:r.sorterIndex(u),currentList:e.optionsList,listName:e.listName,tippyTop:!0},{default:ie(()=>[J(F(u.label),1)]),_:2},1032,["item","index","currentList","listName"])):(a(),c("span",Fu,F(u.label),1))])],2))),128))])])}const Hu=q(Ru,[["render",Uu]]),Yu={name:"aleBooks",mixins:[Ji,ao],data:function(){return{spreadsheetTop:170,keys:"",prevScrollTop:0}},watch:{"$store.state.desktopPlayerHeight"(){this.setSpreadsheetOffset()}},created:function(){this.keys=this.prepareKeys()},mounted:function(){this.setSpreadsheetOffset(),this.$compEmitter.on("afterWindowResize",this.setSpreadsheetOffset)},beforeUnmount:function(){this.$compEmitter.off("afterWindowResize",this.setSpreadsheetOffset)},methods:{setSpreadsheetOffset:function(){this.$nextTick(function(){const e=document.querySelector("#ale-search-wrap"),i=window.pageYOffset+e.getBoundingClientRect().top,t=e.offsetHeight;this.spreadsheetTop=i+t})}}},Vu={class:"list-view-inner-wrap"};function Gu(e,i,t,n,o,r){const s=Hu,l=xu,u=ri;return a(),c("div",{class:"ale-books list-view",ref:"listView",style:ue({top:e.spreadsheetTop+"px"})},[h("div",Vu,[h("table",null,[h("thead",null,[R(s,{keys:e.keys},null,8,["keys"])]),h("tbody",null,[(a(!0),c(pe,null,ye(e.$store.state.chunkCollection,(f,d)=>(a(),O(u,{class:"ale-row","data-asin":f.asin,key:"book:"+f.asin,ref_for:!0,ref:"domBooks"},{default:ie(()=>[R(l,{book:f,rowIndex:d,keys:e.keys},null,8,["book","rowIndex","keys"])]),_:2},1032,["data-asin"]))),128))])])])],4)}const qu=q(Yu,[["render",Gu]]),Xu={viewBox:"0 0 448 512",width:"1.06em",height:"1.2em"};function Qu(e,i){return a(),c("svg",Xu,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"},null,-1)]))}const Zu=oe({name:"fa6-solid-book",render:Qu}),Ju={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Ku(e,i){return a(),c("svg",Ju,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248s248-111 248-248S393 8 256 8m144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12z"},null,-1)]))}const ec=oe({name:"fa-solid-plus-circle",render:Ku}),tc={viewBox:"0 0 448 512",width:"1.06em",height:"1.2em"};function ic(e,i){return a(),c("svg",tc,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M224 64c-44.2 0-80 35.8-80 80v48h240c35.3 0 64 28.7 64 64v192c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64h16v-48C80 64.5 144.5 0 224 0c57.5 0 107 33.7 130.1 82.3c7.6 16 .8 35.1-15.2 42.6s-35.1.8-42.6-15.2C283.4 82.6 255.9 64 224 64m32 320c17.7 0 32-14.3 32-32s-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32s14.3 32 32 32z"},null,-1)]))}const nc=oe({name:"fa6-solid-unlock-keyhole",render:ic}),oc={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"};function rc(e,i){return a(),c("svg",oc,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"m243.31 90.91l-128.4 128.4a16 16 0 0 1-22.62 0l-71.62-72a16 16 0 0 1 0-22.61l20-20a16 16 0 0 1 22.58 0L104 144.22l96.76-95.57a16 16 0 0 1 22.59 0l19.95 19.54a16 16 0 0 1 .01 22.72"},null,-1)]))}const sc=oe({name:"ph-check-fat-fill",render:rc}),ac={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function lc(e,i){return a(),c("svg",ac,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9"},null,-1)]))}const uc=oe({name:"fa-solid-heart",render:lc}),cc={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function dc(e,i){return a(),c("svg",cc,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"m47.6 300.4l180.7 168.7c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9l180.7-168.7c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141c-45.6-7.6-92 7.3-124.6 39.9l-12 12l-12-12c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5"},null,-1)]))}const fc=oe({name:"fa6-solid-heart",render:dc}),hc={name:"sortValues",props:["book"],mixins:[Ot,Ki,Gn],data:function(){return{notAvailable:"&nbsp;"}},methods:{sortContents:function(){let e=this.$store.getters.sortBy;switch(e){case"bookNumbers":if(this.$route.params.series&&this.book.series){let o=_.find(this.book.series,{asin:this.$route.params.series});return _.isArray(_.get(o,"bookNumbers"))?o.bookNumbers.join(", "):""}else if(this.book.series){let o=_.filter(this.book.series,"bookNumbers");return o=_.map(o,"bookNumbers"),o=_.flatten(o),_.isEmpty(o)?o=null:_.isArray(o)&&(o=o.join(", ")),o||"âˆž"}else return"";case"seriesOrder":const n=", ";if(this.book.series){const o=this.$route.params.series,r=_.find(this.book.series,{asin:o});if(r){const s=r.bookNumbers;return s?_.castArray(s).join(n):"âˆž"}else return this.notAvailable}else return this.notAvailable;case"authors.name":case"narrators.name":case"publishers.name":case"tags.name":var i=_.get(this.book,e.replace(".name","[0].name"));return i||this.notAvailable;case"rating":return this.book.ratings?this.book[e]:this.notAvailable;case"ratings":return this.book.rating?this.book.rating:this.notAvailable;case"progress":var t=this.progressbarWidth(this.book);return this.progress(this.book)+'<div class="progress-bar"><div style="width: '+t.width+';"></div></div>';case"title":return this.book.titleShort||this.book.title||this.notAvailable;case"series":return this.book.series?_.map(this.book.series,"name").join(", "):this.notAvailable;case"categories":return this.book.categories?this.book.categories[0].name:this.notAvailable;case"isbn10":case"isbn13":if(this.book.isbns)if(e==="isbn10"){const o=_.find(this.book.isbns,["type","ISBN_10"]);if(o)return o.identifier}else if(e==="isbn13"){const o=_.find(this.book.isbns,["type","ISBN_13"]);if(o)return o.identifier}else return this.notAvailable;else return this.notAvailable;break;case"narratorsNumber":if(this.book.narrators){let o=_.find(this.book.narrators,function(r){return r.name.match("full cast")});return o&&this.book.narrators.length===1?"â€‹âˆž full cast":this.book.narrators.length-(o?1:0)+(o?" full cast":"")}else return this.notAvailable;default:return this.book[e]?this.book[e]:this.notAvailable}},progress:function(e){if(e.progress&&e.length)if(e.progress.toLowerCase().trim()==="finished"){const i=this.timeStringToSeconds(e.length);return"<div>Finished ( "+this.secondsToTimeString(i,!0)+" )</div>"}else{const i=this.timeStringToSeconds(e.progress),t=this.timeStringToSeconds(e.length),n=t-i;return this.secondsToTimeString(n,!0)+" <strong class='audible-orange-text'>/</strong> "+this.secondsToTimeString(t,!0)}else return e.progress?"<div>"+e.progress+" ("+this.notAvailable+")</div>":e.length?"<div>Length: "+e.length+"</div>":"<div>"+e.progress+"</div>"}}},gc={class:"sort-values-container"},mc=["content"],pc=["innerHTML","content"],yc={key:1};function vc(e,i,t,n,o,r){const s=Ti,l=fc,u=me("tippy");return a(),c("div",gc,[(e.$store.getters.sortBy==="myRating"||e.$store.getters.sortBy==="rating"||e.$store.getters.sortBy==="ratings")&&r.sortContents()!=="Â "?Q((a(),c("div",{key:0,class:"ratings",content:(e.$store.getters.sortBy!=="myRating"&&t.book.myRating?"My rating: "+t.book.myRating+"<br>":"")+(e.$store.getters.sortBy==="myRating"&&t.book.rating?"Average rating: "+t.book.rating+"<br>":"")+(e.$store.getters.sortBy==="myRating"&&t.book.ratings?"Number of ratings: "+t.book.ratings+"<br>":"")},[R(s,{prioritizeRatingsText:e.$store.getters.sortBy==="ratings",size:10,rating:r.sortContents(),number:!0,ratingsText:!1,ratings:(e.$store.getters.sortBy==="rating"||e.$store.getters.sortBy==="ratings")&&t.book.ratings?t.book.ratings:null},null,8,["prioritizeRatingsText","rating","ratings"])],8,mc)),[[u,{trigger:"click mouseenter",allowHTML:!0}]]):e.$store.getters.sortBy!=="favorite"?Q((a(),c("div",{key:1,class:G("sort-"+e.$store.getters.sortBy),innerHTML:r.sortContents(),content:(e.$store.getters.sortBy==="progress"?t.book.progress:"")+""},null,10,pc)),[[u,{trigger:"click mouseenter",allowHTML:!0}]]):(a(),c("div",{key:2,class:G("sort-"+e.$store.getters.sortBy)},[t.book.favorite?(a(),O(l,{key:0})):(a(),c("span",yc,"Â "))],2))])}const bc=q(hc,[["render",vc]]),kc={name:"book",props:["book","index","sortValuesEnabled","imageLoaded"],mixins:[jt],data:function(){return{store:this.$store.state,sticky:this.$store.state.sticky,smartLink:"https://smart.link/o3waqx4wg1gdn?asin="}},methods:{playSample:function(e,i){e.sample?this.$store.commit("prop",{key:"audioPlayer.audio",value:{from:"book",route:this.$route,book:e,index:i}}):window.open(`${this.$store.state.urlOrigin}/webplayer?asin=${e.asin}&isSample=true`,"_blank")}}},_c={class:"ale-cover"},Sc={key:1,class:"ale-play-sample cloud-player-icon"},wc=["content"],Mc={class:"info-icons-wrapper"},Lc={key:0,class:"favorite-marker"},Ic={key:1,class:"finished-marker"},Tc={key:2,class:"plus-catalog-marker"},Ec={key:0},Ac={key:1},Nc={key:3,class:"kindle-marker"},Dc={key:1,class:"placeholder-cover"},$c={class:"cover-content"},Cc={key:0,class:"title"},xc={key:1,class:"author"},jc={key:2,class:"cover-img-wrapper"},Oc=["src"];function zc(e,i,t,n,o,r){const s=bc,l=lo,u=Ai,f=uc,d=sc,g=nc,v=ec,k=Bn,m=Ei,p=Zu,S=me("tippy");return a(),c("div",{class:G(["details-inner-wrap",{"not-in-library":t.book.notInLibrary}])},[t.sortValuesEnabled?(a(),O(s,{key:0,book:t.book},null,8,["book"])):b("",!0),h("div",_c,[e.sticky.bookDetailSettings.playButton?(a(),c("div",{key:0,class:"ale-play-sample",onClick:i[0]||(i[0]=L=>r.playSample(t.book,t.index))},[h("div",null,[R(l)])])):t.book.asin&&e.sticky.bookDetailSettings.cloudPlayer?(a(),c("div",Sc,[R(u,{size:20,book:t.book,icon:!0,tooltip:!1,noBG:!0},null,8,["book"])])):b("",!0),h("div",{class:"ale-click-wrap",onClick:i[3]||(i[3]=L=>t.book.asin?e.$compEmitter.emit("book-clicked",t.book.asin):null)},[t.book.blurb&&e.sticky.bookDetailSettings.blurb?Q((a(),c("div",{key:0,class:"blurb-tooltip",content:t.book.blurb},null,8,wc)),[[S,{delay:150,placement:"left",flipBehavior:["left","right","top","bottom"],maxWidth:300}]]):b("",!0),h("div",Mc,[t.book.favorite&&e.sticky.bookDetailSettings.favorite?(a(),c("div",Lc,[h("span",null,[R(f)]),i[4]||(i[4]=h("span",null,"favorite",-1))])):b("",!0),t.book.progress==="Finished"&&e.sticky.bookDetailSettings.finished?(a(),c("div",Ic,[h("span",null,[R(d)]),i[5]||(i[5]=h("span",null,"finished",-1))])):b("",!0),t.book.fromPlusCatalog&&e.sticky.bookDetailSettings.plusCatalog?(a(),c("div",Tc,[t.book.unavailable?(a(),c("span",Ec,[R(g)])):(a(),c("span",Ac,[R(v)])),i[6]||(i[6]=h("span",null,"catalog",-1))])):b("",!0),t.book.whispersync==="owned"&&e.sticky.bookDetailSettings.whispersync?(a(),c("div",Nc,[h("span",null,[R(k)]),i[7]||(i[7]=h("span",null,"In my kindle",-1))])):b("",!0)]),h("div",{class:G(["ale-info-indicator",{"not-in-library":t.book.notInLibrary,"open-details-icon":!t.book.notInLibrary}])},[h("div",null,[t.book.notInLibrary?(a(),O(m,{key:0})):(a(),O(p,{key:1}))])],2),t.book.cover?(a(),c("div",jc,[R(oo,{name:"fade"},{default:ie(()=>[Q(h("img",{onLoad:i[1]||(i[1]=L=>e.$emit("update:imageLoaded",!0)),class:G(["ale-cover-image",{loaded:t.imageLoaded}]),crossorigin:"anonymous",draggable:"false",onTouchstart:i[2]||(i[2]=no(()=>{},["prevent"])),src:e.makeCoverUrl(t.book.cover,280),alt:""},null,42,Oc),[[Zi,t.imageLoaded]])]),_:1})])):(a(),c("div",Dc,[h("div",$c,[t.book.titleShort||t.book.title?(a(),c("div",Cc,F(t.book.titleShort||t.book.title),1)):b("",!0),t.book.authors?(a(),c("div",xc,F(t.book.authors[0].name),1)):b("",!0)])]))])])],2)}const Rc=q(kc,[["render",zc],["__scopeId","data-v-26eb7178"]]),Pc={name:"aleBooks",mixins:[Ge],data:function(){return{imageLoaded:!1}}};function Bc(e,i,t,n,o,r){const s=Rc,l=ri;return a(),c("div",{class:G(["ale-books grid-view",{"sort-values-on":e.$store.getters.sortValues&&e.$store.getters.sortBy!=="bookNumbers"&&e.$store.getters.sortBy!=="seriesOrder"}]),ref:"booksWrapper"},[(a(!0),c(pe,null,ye(e.$store.state.chunkCollection,(u,f)=>(a(),O(l,{class:G(["ale-book",{"details-open":!!e.$route.query.book&&e.$route.query.book===u.asin,"image-loaded":e.imageLoaded}]),"data-asin":u.asin,key:"book:"+u.asin},{default:ie(()=>[R(s,{book:u,index:f,sortValuesEnabled:e.$store.getters.sortValues,imageLoaded:e.imageLoaded,"onUpdate:imageLoaded":i[0]||(i[0]=d=>e.imageLoaded=d)},null,8,["book","index","sortValuesEnabled","imageLoaded"])]),_:2},1032,["class","data-asin"]))),128))],2)}const Wc=q(Pc,[["render",Bc]]),Fc={viewBox:"0 0 576 512",width:"1.36em",height:"1.2em"};function Uc(e,i){return a(),c("svg",Fc,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32v-48C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64v192c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64h-32z"},null,-1)]))}const Hc=oe({name:"fa6-solid-lock-open",render:Uc}),Yc=""+new URL("contextMenuReminder.BpYUWanu.png",import.meta.url).href,Vc={name:"contextMenuReminder",data(){return{img:Yc}},methods:{hide:function(){this.$store.commit("stickyProp",{key:"contextMenuReminder",value:!1})}}},Gc={class:"reminder slide-in-blurred-top"},qc=["src"];function Xc(e,i,t,n,o,r){const s=uo;return a(),c("div",Gc,[i[0]||(i[0]=h("span",null,[J("You can open this gallery page any time from "),h("br"),J("the browser context menu (right-click) ")],-1)),h("div",null,[h("img",{src:o.img,alt:""},null,8,qc)]),R(s,{class:"hide",onClick:r.hide},null,8,["onClick"])])}const Qc=q(Vc,[["render",Xc],["__scopeId","data-v-9a824e7b"]]),Zc={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Jc(e,i){return a(),c("svg",Zc,i[0]||(i[0]=[h("path",{fill:"currentColor",d:"M256 512a256 256 0 1 0 0-512a256 256 0 1 0 0 512m-86.2-346.7c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24v-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1h-58.3c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0a32 32 0 1 1-64 0"},null,-1)]))}const Kc=oe({name:"fa6-solid-circle-question",render:Jc}),ed=""+new URL("gallery-sidebar.Bajr0ENT.jpg",import.meta.url).href,td=""+new URL("gallery-cover-plus-calatog-indicator.B1UW-gDE.jpg",import.meta.url).href,id=""+new URL("gallery-sidebar-series-list.DKTQoPX6.jpg",import.meta.url).href,nd=""+new URL("gallery-sidebar-toolbar.CNNqQQcd.jpg",import.meta.url).href,od=""+new URL("gallery-carousel.BaPlQJvf.jpg",import.meta.url).href,rd=""+new URL("gallery-prefer-short-title.Dxk_hNNF.jpg",import.meta.url).href,sd=""+new URL("gallery-sample-play-button.BNgV3E80.jpg",import.meta.url).href,Xi=""+new URL("gallery-cover-favorite-finished-indicators.C5YxlCzj.jpg",import.meta.url).href,ad=""+new URL("gallery-book-cover-cloud-player-button.BgZU_K88.jpg",import.meta.url).href,ld=""+new URL("gallery-blurb-hover-corner.CBDVAavy.jpg",import.meta.url).href,ud=""+new URL("gallery-sidebar-collections-list.UXmJCueq.jpg",import.meta.url).href,cd=""+new URL("gallery-cover-whispersync-indicator.Dyv0OkrY.jpg",import.meta.url).href,dd=""+new URL("gallery-sidebar-main-info.CmaR8Kxe.jpg",import.meta.url).href,fd=""+new URL("gallery-sidebar-cover.C2b2Zenh.jpg",import.meta.url).href,hd={name:"bookDetailsSettings",data:function(){const e=this,i=this.$store.state,t=this.$store.state.sticky;return{store:i,showSettings:!0,settings:[{type:"heading",label:"Grid book cover"},{enabled:!0,type:"checkbox",label:"Show sample play button",infoOpen:!1,info:`<img src="${sd}" class="tippy-info-image" />`,parent:"sampleButton",value:t.bookDetailSettings.playButton,event:function(n){const o=[{key:"sticky.bookDetailSettings.playButton",value:n.target.checked}];t.bookDetailSettings.cloudPlayer&&(o.push({key:"sticky.bookDetailSettings.cloudPlayer",value:!n.target.checked}),e.mutateChildren("cloudButton","value",!n.target.checked)),e.mutateChildren("sampleButton","value",n.target.checked),e.$store.commit("prop",o)}},{enabled:!0,type:"checkbox",label:"Show cloud player button",parent:"cloudButton",infoOpen:!1,info:`You have to be logged in to this button. Try opening <a target="_blank" href="${i.urlOrigin}/library">your library</a> first before opening the cloud player.<br>If you can open your library, you can also open the cloud player through the ALE gallery.<br><img src="${ad}" class="tippy-info-image" />`,interactiveTippy:!0,value:t.bookDetailSettings.cloudPlayer,event:function(n){const o=[{key:"sticky.bookDetailSettings.cloudPlayer",value:n.target.checked}];t.bookDetailSettings.playButton&&(o.push({key:"sticky.bookDetailSettings.playButton",value:!n.target.checked}),e.mutateChildren("sampleButton","value",!n.target.checked)),e.mutateChildren("cloudButton","value",n.target.checked),e.$store.commit("prop",o)}},{enabled:!0,type:"checkbox",label:"Show blurb on hover",infoOpen:!1,info:`This is never visible on mobile <br/><img src="${ld}" class="tippy-info-image" />`,value:t.bookDetailSettings.blurb,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailSettings.blurb",value:n.target.checked})}},{enabled:!0,type:"checkbox",label:"Show whispersync (owned) indicator",infoOpen:!1,info:`<img src="${cd}" class="tippy-info-image" />`,value:t.bookDetailSettings.whispersync,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailSettings.whispersync",value:n.target.checked})}},{enabled:!0,type:"checkbox",label:"Show plus catalog indicator",infoOpen:!1,info:`<img src="${td}" class="tippy-info-image" />`,value:t.bookDetailSettings.plusCatalog,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailSettings.plusCatalog",value:n.target.checked})}},{enabled:!0,type:"checkbox",label:"Show favorite indicator",infoOpen:!1,info:`<strong>The RED dot</strong><br><img src="${Xi}" class="tippy-info-image" />`,value:t.bookDetailSettings.favorite,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailSettings.favorite",value:n.target.checked})}},{enabled:!0,type:"checkbox",label:"Show finished indicator",infoOpen:!1,info:`<strong>The GREEN dot</strong><br><img src="${Xi}" class="tippy-info-image" />`,value:t.bookDetailSettings.finished,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailSettings.finished",value:n.target.checked})}},{type:"divider"},{type:"heading",label:"Above summary"},{enabled:!0,type:"checkbox",label:"Prefer short title",infoOpen:!1,info:`This makes the title a little more readable without actually removing anything from the title, just diplaying it differently. Short title is used if available (for newly extracted data since v.0.2.9). Subtitle is shown below with a smaller font similar to Audible store pages. <br/><br/><strong>In case subtitle is not available, the full title is shown below instead, so you always get to see the full title either way.</strong><br/><img src='${rd}' class='tippy-info-image' />`,value:t.bookDetailSettings.titleShort,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailSettings.titleShort",value:n.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{type:"divider"},{type:"heading",label:"Sidebar"},{enabled:!0,type:"checkbox",label:"Show sidebar",infoOpen:!1,info:`<strong>The entire sidebar!</strong> <br><img src="${ed}" class="tippy-info-image" />`,value:t.bookDetailSettings.sidebar.show,event:function(n){const o=n.target.checked;e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.show",value:o}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")}),e.mutateChildren("sidebar","enabled",o)},init:function(n){e.mutateChildren("sidebar","enabled",t.bookDetailSettings.sidebar.show)}},{enabled:!0,type:"checkbox",label:"Show book cover",parent:"sidebar",infoOpen:!1,info:`There is also an easy access toggle swith on the left side of the sidebar (arrow up) <br><img src="${fd}" class="tippy-info-image" />`,value:!t.bookDetailsCollapsedCover,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailsCollapsedCover",value:!n.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show icon toolbar",parent:"sidebar",infoOpen:!1,info:`<img src="${nd}" class="tippy-info-image" />`,value:t.bookDetailSettings.sidebar.iconToolbar,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.iconToolbar",value:n.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show main details",parent:"sidebar",infoOpen:!1,info:`There is also an easy access toggle swith on the left side of the sidebar (arrow up) <br><img src="${dd}" class="tippy-info-image" />`,value:!t.bookDetailsCollapsedDetails,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailsCollapsedDetails",value:!n.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show collections list",parent:"sidebar",infoOpen:!1,info:`If a book is in a collection... <br><img src="${ud}" class="tippy-info-image" />`,value:t.bookDetailSettings.sidebar.collectionsList,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.collectionsList",value:n.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show series list",parent:"sidebar",infoOpen:!1,info:`If a book is in a series... <br><img src="${id}" class="tippy-info-image" />`,value:t.bookDetailSettings.sidebar.seriesList,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.seriesList",value:n.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{type:"divider"},{type:"heading",label:"Bottom of the details view"},{enabled:!0,type:"checkbox",label:"Show carousel",infoOpen:!1,info:`<img src="${od}" class="tippy-info-image" />`,value:t.bookDetailSettings.carousel,event:function(n){e.$store.commit("prop",{key:"sticky.bookDetailSettings.carousel",value:n.target.checked})}}]}},created:function(){const e=_.filter(this.settings,"init");_.each(e,function(i){i.init(i)}),this.dividerIds()},methods:{mutateChildren:function(e,i,t){const n=_.filter(this.settings,{parent:e});_.each(n,function(o){o[i]=t})},dividerIds:function(){const e="divider",i=_.filter(this.settings,{type:e});_.each(i,function(t,n){t.label=e+"-"+n})},openInfo(e){_.each(this.settings,i=>{const t=e.label===i.label;i.infoOpen=t?!i.infoOpen:!1})}}},gd={class:"tabs"},md={key:0,class:"settings-wrapper"},pd={key:0,class:"heading"},yd={key:1,class:"divider"},vd={key:2,class:"inner-wrapper"},bd={class:"row-wrapper"},kd=["checked","onChange","disabled"],_d={class:"label-text"},Sd=["onClick"],wd=["innerHTML"],Md={key:1,class:"shortcuts-wrapper"};function Ld(e,i,t,n,o,r){const s=Kc,l=co;return a(),O(l,{class:"bookdetails-settings",onCloseModal:i[2]||(i[2]=u=>e.$store.commit("prop",{key:"bookDetailSettingsOpen",value:!e.store.bookDetailSettingsOpen}))},{default:ie(()=>[h("div",gd,[h("h3",{onClick:i[0]||(i[0]=u=>e.showSettings=!0),class:G({active:e.showSettings})},"Settings",2),h("h3",{onClick:i[1]||(i[1]=u=>e.showSettings=!1),class:G({active:!e.showSettings})},"Shortcuts",2)]),h("div",null,[e.showSettings?(a(),c("div",md,[i[4]||(i[4]=h("div",{class:"settings-info"}," Your browser will remember these settings! ",-1)),(a(!0),c(pe,null,ye(e.settings,u=>(a(),c("div",{class:G(["setting",{disabled:!u.enabled}]),key:u.label},[u.type==="heading"?(a(),c("div",pd,[h("h3",null,F(u.label),1)])):u.type==="divider"?(a(),c("div",yd)):(a(),c("div",vd,[h("div",bd,[h("label",null,[h("input",{type:"checkbox",checked:u.value,onChange:u.event,disabled:!u.enabled},null,40,kd),i[3]||(i[3]=h("div",{class:"visual-checkbox"},[h("div",{class:"switch"})],-1)),h("div",_d,[h("span",null,F(u.label),1)])]),u.info?(a(),c("div",{key:0,class:G(["more-info-icon",{open:u.infoOpen}]),onClick:f=>r.openInfo(u)},[R(s)],10,Sd)):b("",!0)]),u.infoOpen?(a(),c("div",{key:0,class:"setting-info",innerHTML:u.info},null,8,wd)):b("",!0)]))],2))),128))])):(a(),c("div",Md,i[5]||(i[5]=[h("h3",null,"Desktop",-1),h("table",null,[h("tr",null,[h("th",null,"Description"),h("th",null,"Shortcut")]),h("tr",null,[h("td",null,"Close"),h("td",null,"Esc")]),h("tr",null,[h("td",null,"Open adjacent book"),h("td",null,"Arrow Keys")]),h("tr",null,[h("td",null,"Open adjacent book"),h("td",null,"TAB & Shift+TAB")])],-1),h("h3",null,"Mobile",-1),h("table",null,[h("tr",null,[h("th",null,"Description"),h("th",null,"Shortcut")]),h("tr",null,[h("td",null,"Make infobox and summary change places"),h("td",null,"Swipe left or right")])],-1)])))])]),_:1})}const Id=q(hd,[["render",Ld],["__scopeId","data-v-fe046e34"]]),Td={mixins:[Ge],methods:{prepCategoriesSubPage:function(e){if(this.$route.name==="category"){const i=this,t={parent:this.$route.params.parent,child:this.$route.params.child,book:this.$route.params.query};let n=_.filter(this.subPageSource.collection,function(o){if(o.categories){const r=o.categories[0]?i.slugify(o.categories[0].name):!1,s=o.categories[1]?i.slugify(o.categories[1].name):!1;if(r&&s&&t.parent===r&&t.child===s)return!0;if(r&&t.parent===r&&!t.child)return!0}});if(n&&(t.parent||t.child)){const o=_.get(n,"0.categories.0.name"),r=_.get(n,"0.categories.1.name");o&&(this.pageTitle=this.$store.commit("prop",{key:"pageTitle",value:o})),r&&t.child?this.$store.commit("prop",{key:"pageSubTitle",value:r}):this.$route.query.tagTitle&&this.$store.commit("prop",{key:"pageSubTitle",value:this.$route.query.tagTitle})}this.$store.commit("prop",{key:"pageCollection",value:n}),this.collectionSource="pageCollection"}}}},Ed={mixins:[Ge],methods:{prepCollectionsSubPage:function(e){if(this.$route.name==="collection"){let i=this.$route.params.collection,t=_.find(this.$store.state.library.collections,{id:i});if(t){let n=_.filter(this.$store.state.library.books,function(o){return _.includes(t.books,o.asin)});t.title&&this.$store.commit("prop",{key:"pageTitle",value:t.title}),t.description&&this.$store.commit("prop",{key:"pageSubTitle",value:t.description}),this.$store.commit("prop",{key:"pageCollection",value:n}),this.collectionSource="pageCollection"}}}}},Ad={methods:{prepSeriesSubPage:function(){if(this.$route.name==="series"){const e=this.$route.params.series,i=_.find(this.$store.state.library.series,{asin:e}),t=i&&i.books&&i.books.length>0&&this.subPageSource.name=="library";if(t){this.$store.commit("addListRenderingOpts",{listName:"sort",option:{active:!1,current:!1,key:"seriesOrder",label:"Series order",type:"sort",tippy:"The infinite symbol (âˆž) means the book doesn't have a number"},activate:!(this.$route.query.sort&&this.$route.query.sort!=="seriesOrder"),sortValues:!0,splice:3}),this.$store.commit("addListRenderingOpts",{listName:"filter",option:{type:"divider",key:"divider-series-filters"},splice:3});const o=this.$store.state.sticky.seriesFilters,r=(this.$route.query.filterExtras||"").split(",");this.$store.commit("addListRenderingOpts",{listName:"filter",option:{active:_.includes(r,"notInLibrary")||o.notInLibrary,type:"filterExtras",label:"Not In Library",key:"notInLibrary",group:"filterExtras",condition:function(s){return _.get(s,"notInLibrary")},tippy:"This filter is persistent: if you open the gallery later or when you open another series sub page, this setting will carry over."},splice:3}),this.$store.commit("addListRenderingOpts",{listName:"filter",option:{active:_.includes(r,"inLibrary")||o.inLibrary,type:"filterExtras",label:"In Library",key:"inLibrary",group:"filterExtras",condition:function(s){return!_.get(s,"notInLibrary")},tippy:"This filter is persistent: if you open the gallery later or when you open another series sub page, this setting will carry over."},splice:3})}else this.$store.commit("updateListRenderingOpts",{listName:"sort",key:"bookNumbers",active:!1,sortValues:!0});let n=[];if(t){const o=_.get(i,"allBooks"),r=_.get(i,"books");let s=0;n=_.map(o,l=>{++s;const u=_.includes(r,l.asin)||!l.notInLibrary;if(!u){const d=_.merge({added:s,series:[{asin:i.asin,name:i.name,bookNumbers:l.bookNumbers}]},l);return d.asin||(d.asin=i.asin+"-"+s+"-temp-asin"),d}else if(u){let d=_.find(this.subPageSource.collection,{asin:l.asin});return d=_.cloneDeep(d),d.added=s,d}})}else n=_.filter(this.subPageSource.collection,function(o){return _.find(o.series,{asin:e})});if(n.length>0){let o=null;_.each(n,r=>{const s=_.find(_.get(r,"series"),l=>(l=l||{},e===l.asin&&!!l.name));if(s)return o=s.name,!1}),o&&this.$store.commit("prop",{key:"pageTitle",value:o}),t||this.$store.commit("prop",{key:"pageSubTitle",value:"Couldn't find series order: using number sort"})}this.$store.commit("prop",{key:"pageCollection",value:n}),this.collectionSource="pageCollection"}}}},Nd={mixins:[Ge],methods:{prepNarratorsSubPage:function(){const e=this;if(this.$route.name==="narrator"){const i=this.$route.params.narrator;let t=_.filter(this.subPageSource.collection,function(r){if(r.narrators)return _.find(r.narrators,function(s){return e.slugify(s.name)===i})});const n=_.get(t,"0.narrators"),o=_.find(n,r=>this.slugify(r.name)===i);this.$store.commit("prop",{key:"pageTitle",value:_.get(o,"name")}),this.$store.commit("prop",{key:"pageCollection",value:t}),this.collectionSource="pageCollection"}}}},Dd={methods:{prepAuthorsSubPage:function(){if(this.$route.name==="author"){const e=this.$route.params.author;let i=_.filter(this.subPageSource.collection,function(o){if(o.authors)return _.find(o.authors,function(r){return r.url===e})});const t=_.get(i,"0.authors"),n=_.find(t,o=>o.url===e);this.$store.commit("prop",{key:"pageTitle",value:_.get(n,"name")}),this.$store.commit("prop",{key:"pageCollection",value:i}),this.collectionSource="pageCollection"}}}},$d={mixins:[Ge],methods:{prepPublishersSubPage:function(){const e=this;if(this.$route.name==="publisher"){const i=this.$route.params.publisher;let t=_.filter(this.subPageSource.collection,function(n){if(n.publishers)return _.find(n.publishers,function(o){return e.slugify(o.name)===i})});if(t.length>0){const n=_.find(t[0].publishers,function(o){return e.slugify(o.name)===i});n&&n.name&&this.$store.commit("prop",{key:"pageTitle",value:n.name})}this.$store.commit("prop",{key:"pageCollection",value:t}),this.collectionSource="pageCollection"}}}},Cd={mixins:[Ge],methods:{prepPodcasts:function(e){this.$route.name==="podcasts"&&(this.$store.commit("prop",{key:"pageCollection",value:this.$store.getters.podcasts}),this.collectionSource="pageCollection")}}},xd={mixins:[Ge],methods:{prepWishlist:function(e){this.$route.name==="wishlist"&&(this.$store.commit("prop",{key:"pageCollection",value:this.$store.state.library.wishlist}),this.collectionSource="pageCollection")}}},jd={methods:{updateListRenderingOptions:function(){const e=this;let i={scope:[{active:!0,key:"title",weight:15},{active:!0,key:"authors.name",weight:5},{active:!0,key:"narrators.name",weight:5},{active:!0,key:"series.name",weight:10},{active:!1,key:"categories.name",weight:1},{active:!1,key:"tags.name",weight:1},{active:!1,key:"publishers.name",weight:1},{active:!1,key:"blurb",weight:1},{active:!1,key:"summary",weight:1},{active:!0,key:"asin",weight:20}],filter:[{active:!0,type:"filter",label:"Not started",key:"notStarted",condition:function(t){return!t.progress}},{active:!0,type:"filter",label:"Started",key:"started",condition:function(t){return!!(t.progress&&!t.progress.toLowerCase().match("finished"))},excludeFromWishlist:!0,excludeFromPodcasts:!0},{active:!0,type:"filter",label:"Finished",key:"finished",condition:function(t){return!!(t.progress&&t.progress.toLowerCase().match("finished"))},excludeFromWishlist:!0,excludeFromPodcasts:!0},{onlyWishlist:!0,active:!1,type:"filterExtras",label:"On sale",key:"onsale",group:"filterExtras",condition:function(t){return t.onSale}},{onlyWishlist:!0,active:!1,type:"filterExtras",label:"Price",key:"price",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",rangeInterval:1,rangeMin:function(){let t=e.$store.getters.collectionSource;const n=_.minBy(t,"price");return n?Math.floor(n.price):-1},rangeMax:function(){let t=e.$store.getters.collectionSource;const n=_.maxBy(t,"price");return n?Math.ceil(n.price):-1},condition:function(t){if(t.price){let n=this.range[0],o=this.range[1];return t.price>=n&&t.price<=o}}},{type:"divider",key:"divider1",onlyWishlist:!0},{excludeFromSeriesSubPage:!0,active:!1,type:"filterExtras",label:"In series",key:"inseries",group:"filterExtras",condition:function(t){return t.series}},{excludeFromSeriesSubPage:!0,active:!1,type:"filterExtras",label:"Not in series",key:"not-inseries",group:"filterExtras",condition:function(t){return!t.series}},{excludeFromSeriesSubPage:!0,type:"divider",key:"divider1.1"},{active:!1,type:"filterExtras",label:"Not from plus catalog",key:"not-from-plus-catalog",group:"filterExtras",condition:function(t){return!t.fromPlusCatalog}},{active:!1,type:"filterExtras",label:"Plus catalog: Available",key:"plus-catalog-available",group:"filterExtras",condition:function(t){return t.fromPlusCatalog&&!t.unavailable},tippy:"It is possible for this status to change after last gallery update..."},{active:!1,type:"filterExtras",label:"Plus catalog: Unavailable",excludeFromWishlist:!0,key:"plus-catalog-unavailable",group:"filterExtras",condition:function(t){return t.fromPlusCatalog&&t.unavailable},tippy:"Books that are from the plus catalog, but they are locked. Conditions: a book left the plus catalog or inactive membership."},{type:"divider",key:"divider1.3.1",excludeFromWishlist:!0,excludeFromPodcasts:!0},{active:!1,type:"filterExtras",label:"Podcast episodes: include",key:"podcasts-inlcude",group:"filterExtras",excludeFromWishlist:!0,excludeFromPodcasts:!0,condition:function(t){return _.get(t,"format")==="Podcast"&&!_.get(t,"podcastParent")}},{active:!1,type:"filterExtras",label:"Podcast episodes: exclude",key:"podcasts-exclude",group:"filterExtras",excludeFromWishlist:!0,excludeFromPodcasts:!0,condition:function(t){return _.get(t,"format")!=="Podcast"&&!_.get(t,"podcastParent")}},{type:"divider",key:"divider1.3"},{active:!1,type:"filterExtras",label:"Store page available",key:"store-page-available",group:"filterExtras",condition:function(t){return!(t.storePageChanged||t.storePageMissing)}},{active:!1,type:"filterExtras",label:"Store page unavailable",key:"store-page-unavailable",group:"filterExtras",condition:function(t){return t.storePageChanged||t.storePageMissing},tippy:"Store page has been removed or changed after it was added."},{type:"divider",key:"divider1.4",excludeFromWishlist:!0,excludeFromPodcasts:!0},{active:!1,type:"filterExtras",label:"Favorites: include",key:"favorites",excludeFromWishlist:!0,excludeFromPodcasts:!0,group:"filterExtras",condition:function(t){return t.favorite}},{active:!1,type:"filterExtras",label:"Favorites: exclude",key:"favorites-not",excludeFromWishlist:!0,excludeFromPodcasts:!0,group:"filterExtras",condition:function(t){return!t.favorite}},{type:"divider",key:"divider1.4.1",excludeFromWishlist:!0,excludeFromPodcasts:!0},{active:!1,type:"filterExtras",label:"Books I have rated",excludeFromWishlist:!0,excludeFromPodcasts:!0,key:"rated-by-me",group:"filterExtras",condition:function(t){return t.myRating}},{active:!1,type:"filterExtras",label:"Books I haven't rated",excludeFromWishlist:!0,excludeFromPodcasts:!0,key:"not-rated-by-me",group:"filterExtras",condition:function(t){return!t.myRating}},{active:!1,type:"filterExtras",label:"Books I have reviewed",key:"my-review",group:"filterExtras",condition:function(t){return _.find(e.$store.state.library.userReviews,{asin:t.asin})}},{type:"divider",key:"divider1.4.2",excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"New books",excludeFromWishlist:!0,key:"new-books",group:"filterExtras",condition:function(t){return t.isNew},tippy:"Most recent additions."},{type:"divider",key:"divider2.0"},{active:!1,type:"filterExtras",label:"Full cast: include",key:"full-cast-include",group:"filterExtras",condition:function(t){return _.find(t.narrators,function(n){return n.name.match(/full cast/im)})}},{active:!1,type:"filterExtras",label:"Full cast: exclude",key:"full-cast-exclude",group:"filterExtras",condition:function(t){return!_.find(t.narrators,function(n){return n.name.match(/full cast/im)})}},{type:"divider",key:"divider1.9"},{active:!1,excludeFromWishlist:!0,excludeFromPodcasts:!0,type:"filterExtras",label:"Whisperync: owned",key:"whispersync-owned",group:"filterExtras",condition:function(t){return t.whispersync==="owned"}},{active:!1,type:"filterExtras",label:"Whispersync: available",excludeFromPodcasts:!0,key:"whispersync-available",group:"filterExtras",condition:function(t){return t.whispersync==="available"}},{active:!1,excludeFromWishlist:!0,excludeFromPodcasts:!0,type:"filterExtras",label:"Whisperync: available + owned",key:"whispersync-owned-or-available",group:"filterExtras",condition:function(t){return t.whispersync}},{active:!1,type:"filterExtras",label:"Whispersync: unavailable",excludeFromPodcasts:!0,key:"whispersync-false",group:"filterExtras",tippy:"Either unavailable or unkown...",condition:function(t){return!t.whispersync}},{excludeFromWishlist:!0,excludeFromPodcasts:!0,type:"divider",key:"divider-archived"},{active:!1,excludeFromWishlist:!0,excludeFromPodcasts:!0,type:"filterExtras",label:"Archived",key:"archived",group:"filterExtras",condition:function(t){return t.archived}},{active:!1,excludeFromWishlist:!0,excludeFromPodcasts:!0,type:"filterExtras",label:"Not archived",key:"not-archived",group:"filterExtras",condition:function(t){return!t.archived}},{excludeFromPodcasts:!0,type:"divider",key:"divider2.2"},{active:!1,type:"filterExtras",label:"Length",key:"length",group:"filterExtras",range:!0,rangeMinDist:1,rangeSuffix:"h",rangeMin:function(){return 0},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){return e.timeStringToSeconds(o.length)});return n?Math.ceil(e.timeStringToSeconds(n.length)/3600):0},condition:function(t){if(t.length){let n=this.range[0],o=this.range[1],r=e.timeStringToSeconds(t.length)/3600;return r>=n&&r<=o}}},{type:"divider",key:"divider2.1"},{active:!1,type:"filterExtras",label:"Narrators",key:"narrators",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",rangeMin:function(){return 1},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){let r=_.filter(o.narrators,function(s){return s.name&&!s.name.match("full cast")});return!r.length&&o.narrators&&o.narrators.length&&(r=o.narrators),o.narrators?o.narrators.length:0});return n?n.narrators.length:0},condition:function(t){if(t.narrators){let n=_.find(t.narrators,function(l){return l.name.match("full cast")}),o=this.range[0],r=this.range[1],s=t.narrators.length;return n&&s===1&&(s=r),s>=o&&s<=r}}},{type:"divider",key:"divider3",excludeFromWishlist:!0},{active:!1,type:"filterExtras",excludeFromWishlist:!0,label:"books in series",key:"booksinseries",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",tippy:"Number of owned books in series",rangeMin:function(){return 1},rangeMax:function(){let t=_.filter(e.$store.getters.collectionSource,"series"),n=1;return _.each(t,function(o){let r=_.maxBy(o.series,function(s){let l=_.find(e.$store.state.library.series,{asin:s.asin});if(l&&l.books)return l.books.length});if(r){const s=_.find(e.$store.state.library.series,{asin:r.asin}).books.length;n<s&&(n=s)}}),n},condition:function(t){if(t.series){let n=this.range[0],o=this.range[1],r=!1;return _.each(t.series,function(s){const l=_.find(e.$store.state.library.series,{asin:s.asin});if(l&&l.books.length>=n&&l.books.length<=o)return r=!0,!1}),r}}},{type:"divider",key:"divider4"},{active:!1,type:"filterExtras",label:"Average rating",key:"rating",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",rangeMin:function(){let t=e.$store.getters.collectionSource,n=_.minBy(t,function(o){if(o.rating)return parseFloat(o.rating)});return n?parseFloat(n.rating):0},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){if(o.rating)return parseFloat(o.rating)});return n?parseFloat(n.rating):0},condition:function(t){if(t.rating){let n=this.range[0],o=this.range[1],r=parseFloat(t.rating);return r>=n&&r<=o}},rangeInterval:.1},{type:"divider",key:"divider5.2"},{active:!1,type:"filterExtras",label:"Ratings",key:"number-of-ratings",group:"filterExtras",range:!0,rangeMinDist:1,rangeSuffix:"",rangeMin:function(){let t=e.$store.getters.collectionSource,n=_.minBy(t,function(o){if(o.ratings)return parseFloat(o.ratings)});return n?n.ratings:0},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){if(o.ratings)return parseFloat(o.ratings)});return n?n.ratings:0},condition:function(t){if(t.ratings){let n=this.range[0],o=this.range[1],r=parseFloat(t.ratings);return r>=n&&r<=o}}},{type:"divider",key:"divider5",excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"My rating",excludeFromWishlist:!0,key:"myrating",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",rangeInterval:1,rangeMarks:function(t){return!0},rangeMin:function(){let t=e.$store.getters.collectionSource,n=_.minBy(t,function(o){if(o.myRating)return parseFloat(o.myRating)});return n?parseFloat(n.myRating):0},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){if(o.myRating)return parseFloat(o.myRating)});return n?parseFloat(n.myRating):0},condition:function(t){if(t.myRating){let n=this.range[0],o=this.range[1],r=parseFloat(t.myRating);return r>=n&&r<=o}},tooltipFormatter:function(t){switch(t){case 1:return t+" (Not for me)";case 2:return t+" (Itâ€™s okay)";case 3:return t+" (Pretty good)";case 4:return t+" (Itâ€™s great)";case 5:return t+" (I love it)";default:return 0}}},{type:"divider",key:"divider5.1"},{active:!1,type:"filterExtras",label:"Added",key:"added",group:"filterExtras",range:!0,rangeMinDist:1,rangeSuffix:"",rangeMin:function(){let t=e.$store.getters.collectionSource,n=_.minBy(t,function(o){if(o.added)return parseFloat(o.added)});return n?parseFloat(n.added):0},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){if(o.added)return parseFloat(o.added)});return n?parseFloat(n.added):0},condition:function(t){if(t.added){let n=this.range[0],o=this.range[1],r=parseFloat(t.added);return r>=n&&r<=o}},rangeInterval:1,tippy:"Low number = old book <br> High number = new book <br><br> For example: if you pick the range 1-10 you get 10 of the oldest books based on when they were added."},{type:"divider",key:"divider8.8"},{active:!1,type:"filterExtras",label:"Authors",key:"authors-by-name",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.authors&&n.push(_.map(o.authors,"name"))}),n=_.union(_.flatten(n)).sort(),n},value:[],condition:function(t){if(t.authors){let n=_.map(t.authors,"name"),o=this.value;if(o.length>0){let r=!1;return _.each(o,function(s){if(_.includes(n,s))return r=!0,!1}),r}}}},{type:"divider",key:"divider8.9"},{active:!1,type:"filterExtras",label:"Narrators",key:"narrators-by-name",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.narrators&&n.push(_.map(o.narrators,"name"))}),n=_.union(_.flatten(n)).sort(),n},value:[],condition:function(t){if(t.narrators){let n=_.map(t.narrators,"name"),o=this.value;if(o.length>0){let r=!1;return _.each(o,function(s){if(_.includes(n,s))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.0"},{active:!1,type:"filterExtras",label:"Tags",key:"tags",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.tags&&n.push(_.map(o.tags,"name"))}),n=_.union(_.flatten(n)).sort(),n},value:[],condition:function(t){if(t.tags){let n=_.map(t.tags,"name"),o=this.value;if(o.length>0){let r=!1;return _.each(o,function(s){if(_.includes(n,s))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.1"},{active:!1,type:"filterExtras",label:"Language",key:"language",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.language&&n.push(o.language)}),n=_.union(n).sort(),n},value:[],condition:function(t){if(t.language){let n=this.value;return _.includes(n,t.language)}}},{type:"divider",key:"divider9.4"},{active:!1,type:"filterExtras",label:"Series by name",key:"series-by-name",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.series&&n.push(_.map(o.series,"name"))}),n=_.union(_.flatten(n)).sort(),n},value:[],condition:function(t){if(t.series){let n=_.map(t.series,"name"),o=this.value;if(o.length>0){let r=!1;return _.each(o,function(s){if(_.includes(n,s))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.5"},{active:!1,type:"filterExtras",label:"Format",key:"format",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.format&&n.push(o.format)}),n=_.union(n).sort(),n},value:[],condition:function(t){if(t.format)return t.format?_.includes(this.value,t.format):!1}},{type:"divider",key:"divider9.6"},{active:!1,type:"filterExtras",label:"Publishers",key:"publishers-by-name",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.publishers&&n.push(_.map(o.publishers,"name"))}),n=_.union(_.flatten(n)).sort(),n},value:[],condition:function(t){if(t.publishers){let n=_.map(t.publishers,"name"),o=this.value;if(o.length>0){let r=!1;return _.each(o,function(s){if(_.includes(n,s))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.7"},{active:!1,type:"filterExtras",label:"Collections",key:"collections",group:"filterExtras",excludeFromWishlist:!0,dropdownTrackBy:"valueProp",dropdownLabel:"label",dropdownValueProp:"valueProp",dropdownOpts:function(t){if(e.$store.state.library.collections){let n=_.map(e.$store.state.library.collections,function(o){return{label:o.title,valueProp:o.id}});return _.sortBy(n,"title")}else return[]},value:[],condition:function(t){const n=_.get(this,"value")||[],o=_.get(t,"collectionIds",[]),r=_.get(e.$store.state,"library.collections",[]);if(n.length&&o.length&&r.length){let s=!1;return _.each(n,l=>{if(_.includes(t.collectionIds,l))return s=!0,!1}),s}}}],sort:[{active:!1,sticky:!0,key:"sortValues",label:"Show sort values",type:"sortExtras",tippy:"Shows the active sorter's value on top of the cover in the grid view."},{active:!1,key:"randomize",label:"Randomize",type:"sortExtras",tippy:"Sorting is ignored and the order is randomized."},{type:"divider",key:"divider1"},{active:!0,current:!0,key:"added",label:"Added",type:"sort",tippy:'<small>&#9650;</small> Old at the top <br><small style="display: inline-block; transform: rotate(180deg);">&#9650;</small> New at the top'},{onlyWishlist:!0,active:!0,current:!1,key:"price",label:"Price",type:"sort"},{active:!0,current:!1,key:"title",label:"Title",type:"sort"},{active:!0,current:!1,key:"authors.name",label:"Author",type:"sort"},{active:!0,current:!1,key:"narrators.name",label:"Narrator",type:"sort"},{active:!0,current:!1,key:"narratorsNumber",label:"Number of narrators",type:"sort"},{active:!1,current:!1,key:"length",label:"Length",type:"sort"},{active:!0,current:!1,key:"series",label:"Series",type:"sort",tippy:"Sorts books by the series name alphabetically."},{type:"divider",key:"divider2"},{active:!1,current:!1,key:"releaseDate",label:"Release date",type:"sort"},{active:!1,current:!1,key:"rating",label:"Average rating",type:"sort"},{active:!1,current:!1,key:"ratings",label:"Number of ratings",type:"sort"},{active:!1,current:!1,key:"myRating",label:"My rating",type:"sort",excludeFromWishlist:!0},{active:!0,current:!1,key:"publishers.name",label:"Publishers",type:"sort"},{type:"divider",key:"divider3"},{active:!1,current:!1,key:"progress",label:"Progress",type:"sort",excludeFromWishlist:!0},{active:!1,current:!1,key:"favorite",label:"Favorite",type:"sort",excludeFromWishlist:!0},{active:!0,current:!1,key:"categories",label:"Categories",type:"sort"},{active:!0,current:!1,key:"tags.name",label:"Tags",type:"sort"},{active:!1,current:!1,key:"isNew",label:"New books",type:"sort",excludeFromWishlist:!0},{active:!1,current:!1,key:"archived",label:"Archived",type:"sort",excludeFromWishlist:!0},{type:"divider",key:"divider4"},{active:!0,current:!1,key:"language",label:"Language",type:"sort"},{active:!0,current:!1,key:"format",label:"Format",type:"sort"},{active:!1,current:!1,key:"whispersync",label:"Whispersync",type:"sort"},{active:!1,current:!1,key:"fromPlusCatalog",label:"From plus catalog",type:"sort"},{active:!1,current:!1,key:"unavailable",label:"Plus catalog: Unavailable",type:"sort"},{active:!1,current:!1,key:"downloaded",label:"Downloaded",type:"sort",excludeFromWishlist:!0},{type:"divider",key:"divider5"},{active:!1,current:!1,key:"storePageMissing",label:"Store page missing",type:"sort",tippy:"The original store page could not be found. There may be a new store page that replaced it."},{active:!1,current:!1,key:"storePageChanged",label:"Store page changed",type:"sort",tippy:"There is a store page that exists, but it is for a different version of the book."},{active:!1,current:!1,key:"isbn10",label:"Isbn 10",type:"sort",excludeFromWishlist:!0},{active:!1,current:!1,key:"isbn13",label:"Isbn 13",type:"sort",excludeFromWishlist:!0},{active:!0,current:!1,key:"bookNumbers",label:"Book Numbers",type:"sort",tippy:'<strong>This is only a simple number sort.</strong> <br> If you want the correct series order, as listed in Audible, check the series page in the top menu or the "my books in the series" button in book details. <br><br>Click any book cover (or row) to reveal book details. <br><br> The infinite symbol (âˆž) means the book is in a series but does not have a number.'}]};this.removeArchived(i),this.addExcludeDropdowns(i),this.$setListRenderingOpts(i)},addExcludeDropdowns(e){let i=e.filter;const t=_.findIndex(i,"dropdownOpts");i=_.chunk(i,t-1);const n=i[1];_.remove(n,s=>s.type==="divider");const o=_.cloneDeep(n);_.each(o,s=>{s.conditionOriginal=s.condition,s.condition=function(l){return!s.conditionOriginal(l)},s.placeholder="Exclude...",s.key=s.key+"-exclude",s.exclude=!0});let r=_.zip(n,o);_.each(r,(s,l)=>{s.unshift({type:"divider",key:"divider-99999."+l})}),r=_.flatten(r),i[1]=r,e.filter=_.flatten(i)},removeArchived:function(e){if(!this.$store.state.library.collections)return;let i=this.$store.state.library.collections,t=i?_.find(i,{id:"__ARCHIVE"}):null;if(!t||t.books.length<1){let n=["archived","not-archived"];_.remove(e.filter,function(o){return o.key==="divider-archived"||_.includes(n,o.key)}),_.remove(e.sort,function(o){return _.includes(n,o.key)})}}}};var qn={exports:{}};(function(e,i){(function(){function t(){var n=window,o=document;if("scrollBehavior"in o.documentElement.style&&n.__forceSmoothScrollPolyfill__!==!0)return;var r=n.HTMLElement||n.Element,s=468,l={scroll:n.scroll||n.scrollTo,scrollBy:n.scrollBy,elementScroll:r.prototype.scroll||g,scrollIntoView:r.prototype.scrollIntoView},u=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now;function f(y){var T=["MSIE ","Trident/","Edge/"];return new RegExp(T.join("|")).test(y)}var d=f(n.navigator.userAgent)?1:0;function g(y,T){this.scrollLeft=y,this.scrollTop=T}function v(y){return .5*(1-Math.cos(Math.PI*y))}function k(y){if(y===null||typeof y!="object"||y.behavior===void 0||y.behavior==="auto"||y.behavior==="instant")return!0;if(typeof y=="object"&&y.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+y.behavior+" is not a valid value for enumeration ScrollBehavior.")}function m(y,T){if(T==="Y")return y.clientHeight+d<y.scrollHeight;if(T==="X")return y.clientWidth+d<y.scrollWidth}function p(y,T){var D=n.getComputedStyle(y,null)["overflow"+T];return D==="auto"||D==="scroll"}function S(y){var T=m(y,"Y")&&p(y,"Y"),D=m(y,"X")&&p(y,"X");return T||D}function L(y){for(;y!==o.body&&S(y)===!1;)y=y.parentNode||y.host;return y}function M(y){var T=u(),D,I,C,W=(T-y.startTime)/s;W=W>1?1:W,D=v(W),I=y.startX+(y.x-y.startX)*D,C=y.startY+(y.y-y.startY)*D,y.method.call(y.scrollable,I,C),(I!==y.x||C!==y.y)&&n.requestAnimationFrame(M.bind(n,y))}function w(y,T,D){var I,C,W,P,N=u();y===o.body?(I=n,C=n.scrollX||n.pageXOffset,W=n.scrollY||n.pageYOffset,P=l.scroll):(I=y,C=y.scrollLeft,W=y.scrollTop,P=g),M({scrollable:I,method:P,startTime:N,startX:C,startY:W,x:T,y:D})}n.scroll=n.scrollTo=function(){if(arguments[0]!==void 0){if(k(arguments[0])===!0){l.scroll.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:n.scrollY||n.pageYOffset);return}w.call(n,o.body,arguments[0].left!==void 0?~~arguments[0].left:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:n.scrollY||n.pageYOffset)}},n.scrollBy=function(){if(arguments[0]!==void 0){if(k(arguments[0])){l.scrollBy.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}w.call(n,o.body,~~arguments[0].left+(n.scrollX||n.pageXOffset),~~arguments[0].top+(n.scrollY||n.pageYOffset))}},r.prototype.scroll=r.prototype.scrollTo=function(){if(arguments[0]!==void 0){if(k(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");l.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}var y=arguments[0].left,T=arguments[0].top;w.call(this,this,typeof y>"u"?this.scrollLeft:~~y,typeof T>"u"?this.scrollTop:~~T)}},r.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(k(arguments[0])===!0){l.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},r.prototype.scrollIntoView=function(){if(k(arguments[0])===!0){l.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}var y=L(this),T=y.getBoundingClientRect(),D=this.getBoundingClientRect();y!==o.body?(w.call(this,y,y.scrollLeft+D.left-T.left,y.scrollTop+D.top-T.top),n.getComputedStyle(y).position!=="fixed"&&n.scrollBy({left:T.left,top:T.top,behavior:"smooth"})):n.scrollBy({left:D.left,top:D.top,behavior:"smooth"})}}e.exports={polyfill:t}})()})(qn);var Od=qn.exports;const zd=go(Od);zd.polyfill();const Rd={name:"GalleryRoot",mixins:[Td,Ed,Ad,Nd,Dd,$d,Cd,xd,Ot,jd,mo],data:function(){return{loading:!0,collectionSource:"library.books",pageTitle:null,pageSubTitle:null,scrollContainer:null,collapseView:null,realLength:0,prepsCompleted:!1,errorMessage:!1,mountedChildren:!1}},beforeCreate:function(){this.$route.query.view&&this.$store.commit("stickyProp",{key:"viewMode",value:this.$route.query.view})},computed:{galleryStyle:function(){return this.$store.state.searchOptOpenHeight?{overflow:"hidden",height:this.$store.state.searchOptOpenHeight+"px"}:!1}},created:function(){this.updateListRenderingOptions(),this.prepCategoriesSubPage(),this.prepCollectionsSubPage(),this.prepSeriesSubPage(),this.prepNarratorsSubPage(),this.prepAuthorsSubPage(),this.prepPublishersSubPage(),this.prepPodcasts(),this.prepWishlist(),this.prepsCompleted=!0,this.$compEmitter.on("book-clicked",this.toggleBookDetails)},mounted(){this.$nextTick(function(){this.errorMessage=!0})},beforeUnmount:function(){this.$compEmitter.off("book-clicked",this.toggleBookDetails),this.errorMessage=!1},watch:{"$store.getters.collection":function(){this.$store.commit("chunkCollectionReset"),this.$store.commit("chunkCollectionAdd")},"$route.query.book":function(e){this.$store.state.bookClicked?this.$store.commit("prop",{key:"bookClicked",value:!1}):this.$updateQueries({refresh:!0})}},methods:{childrenMounted:function(){this.$nextTick(function(){let e=this.$route.query.y?parseFloat(this.$route.query.y):0;if(this.$route.query.scrolltop&&(e=0),this.$route.query.book){let i=document.querySelector(".ale-books");i.offsetTop;let t=this.$store.state.sticky.viewMode==="grid",n=t?i.querySelector(".ale-book").getBoundingClientRect().height:i.querySelector("table tbody .ale-row").getBoundingClientRect().height,o=t?i.getBoundingClientRect().width:i.getBoundingClientRect().height,r=Math.floor(o/n)||1,s=_.findIndex(this.$store.getters.collection,{asin:this.$route.query.book}),u=(Math.floor(s/r)+1)*r;this.$store.commit("chunkCollectionAdd",{chunkDistance:u+this.$store.state.chunkDistance}),this.$nextTick(function(){this.mountedChildren=!0})}else if(e||this.$route.query.scrolltop){this.$updateQueries({scrolltop:null});let i=document.querySelector(".ale-books"),t=i.offsetTop,n=this.$store.state.sticky.viewMode==="grid",o=n?i.querySelector(".ale-book").getBoundingClientRect().height:i.querySelector("table tbody .ale-row").getBoundingClientRect().height,r=e+window.innerHeight-t,s=Math.ceil(r/o)||1,l=n?i.getBoundingClientRect().width:i.getBoundingClientRect().height,u=Math.floor(l/o)||1,f=n?s*u:u,d=Math.ceil(f/this.$store.state.chunkDistance)||1;d>1&&this.$store.commit("chunkCollectionAdd",{chunkDistance:this.$store.state.chunkDistance*d}),this.$nextTick(function(){this.$store.state.sticky.viewMode==="grid"?scroll({top:e}):document.querySelector(".list-view-inner-wrap").scroll({top:e}),this.$nextTick(function(){this.mountedChildren=!0})})}else this.$nextTick(function(){this.mountedChildren=!0})})},expandView:function(){},gridViewMounted:function(){this.scrollContainer=window,this.scrollContainer.removeEventListener("scroll",this.addDomItems),this.scrollContainer.addEventListener("scroll",this.addDomItems,{passive:!0}),this.childrenMounted()},listViewMounted:function(){this.scrollContainer=document.querySelector(".list-view-inner-wrap"),this.scrollContainer.removeEventListener("scroll",this.addDomItems),this.scrollContainer.addEventListener("scroll",this.addDomItems,{passive:!0}),this.childrenMounted()},viewsbeforeUnmount:function(){this.scrollContainer.removeEventListener("scroll",this.addDomItems),this.mountedChildren=!1},addDomItems:_.throttle(function(e){if(this.$store.state.lazyScroll){const i=this.$store.state.sticky.viewMode==="grid";let t=i?550+window.innerHeight/2:this.scrollContainer.clientHeight/3,n=i?document.documentElement:this.scrollContainer;n.scrollTop+(n.innerHeight||n.clientHeight)+t>=n.scrollHeight&&this.$store.commit("chunkCollectionAdd"),this.$updateQueries({y:n.scrollTop})}},450,{leading:!1,trailing:!0}),searchMounted(){const e=this;this.$nextTick(function(){setTimeout(function(){e.loading=!1},10)})},toggleBookDetails:function(e){this.$store.commit("prop",{key:"bookClicked",value:!0});const i={asin:e},t={asin:_.get(this.$route,"query.book"),newValue:i.asin};!t.newValue==!t.asin&&!t.newValue||(i.asin===t.asin&&(t.newValue=null),t.newValue||(t.newValue=null),this.$updateQueries({book:t.newValue},{src:"toggleBookDetails"}))}}},Pd={id:"ale-gallery"},Bd={key:0},Wd={key:4},Fd={key:5,id:"nothing-here-404"},Ud={key:0},Hd={key:1,class:"error404"};function Yd(e,i,t,n,o,r){const s=Id,l=Qc,u=ho,f=Hc,d=Wc,g=qu,v=wu;return a(),c("div",Pd,[e.$store.state.bookDetailSettingsOpen?(a(),O(s,{key:0})):b("",!0),!e.$store.state.standalone&&e.$store.state.sticky.contextMenuReminder?(a(),O(l,{key:1})):b("",!0),e.prepsCompleted?(a(),O(u,{key:2,collectionSource:e.collectionSource,onVnodeMounted:r.searchMounted},null,8,["collectionSource","onVnodeMounted"])):b("",!0),e.collapseView?(a(),c("div",{key:3,class:"collection-expanded-btn",onClick:i[0]||(i[0]=(...k)=>r.expandView&&r.expandView(...k))},[h("div",null,[i[1]||(i[1]=h("span",null,"Expand view",-1)),e.realLength?(a(),c("span",Bd,"( "+F(e.realLength)+" )",1)):b("",!0),R(f)])])):b("",!0),!e.loading&&e.$store.getters.collection&&e.$store.getters.collection.length>0?(a(),c("div",Wd,[h("div",{style:ue(r.galleryStyle)},[e.$store.state.sticky.viewMode==="grid"?(a(),O(d,{key:0,onVnodeMounted:r.gridViewMounted,onVnodeBeforeUnmount:r.viewsbeforeUnmount},null,8,["onVnodeMounted","onVnodeBeforeUnmount"])):e.$store.state.sticky.viewMode==="spreadsheet"?(a(),O(g,{key:1,onVnodeMounted:r.listViewMounted,onVnodeBeforeUnmount:r.viewsbeforeUnmount},null,8,["onVnodeMounted","onVnodeBeforeUnmount"])):b("",!0),e.mountedChildren&&e.$route.query.book?(a(),O(v,{key:e.$route.query.book,asin:e.$route.query.book},null,8,["asin"])):b("",!0)],4)])):e.errorMessage?(a(),c("div",Fd,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(a(),c("h3",Ud,"Search: no results")):(a(),c("h3",Hd,"404: There's nothing here"))])):b("",!0)])}const af=q(Rd,[["render",Yd],["__scopeId","data-v-b80edad3"]]);export{af as default};
